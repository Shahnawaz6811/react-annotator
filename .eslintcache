[{"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/Workspace/index.js":"1","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/Footer/index.js":"2","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/FooterButton/index.js":"3","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/Toolbar/index.js":"4","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/LeftSidebar/styles.js":"5","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/LeftSidebar/ObjectSelector.js":"6","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/WorkContainer/index.js":"7","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/LeftSidebar/LabelSelector.js":"8","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/LeftSidebar/index.js":"9","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/ImageSwitcher/index.js":"10","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/MainLayout/index.js":"11","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/Toolbar/Slider.js":"12","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/index.js":"13","/Users/shahn/dev/annotator/custom_annotator/src/components/Annotator.js":"14","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/video-reducer.js":"15","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/get-active-image.js":"16","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/MainLayout/styles.js":"17","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/SettingsDialog/index.js":"18","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/TaskDescriptionSidebarBox/index.js":"19","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/KeyframesSelectorSidebarBox/index.js":"20","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/HistorySidebarBox/index.js":"21","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/general-reducer.js":"22","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/ImageCanvas/use-project-box.js":"23","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/PreventScrollToParents/index.js":"24","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionTags/index.js":"25","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/VideoOrImageCanvasBackground/index.js":"26","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/SidebarBox/index.js":"27","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionLabel/styles.js":"28","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/HighlightBox/index.js":"29","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/combine-reducers.js":"30","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/TagsSidebarBox/index.js":"31","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionSelectorSidebarBox/styles.js":"32","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/fix-twisted.js":"33","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/icon-dictionary.js":"34","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/hooks/use-exclude-pattern.js":"35","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/PointDistances/index.js":"36","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionSelectAndTransformBoxes/index.js":"37","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/hooks/xpattern.js":"38","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/utils/get-landmarks-with-transform.js":"39","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/image-reducer.js":"40","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/DebugSidebarBox/index.js":"41","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionSelectorSidebarBox/index.js":"42","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/KeyframeTimeline/get-time-string.js":"43","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/colors.js":"44","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/SidebarBoxContainer/index.js":"45","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/ImageCanvas/region-tools.js":"46","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/ImageCanvas/use-mouse.js":"47","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionLabel/index.js":"48","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/history-handler.js":"49","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/MainLayout/icon-dictionary.js":"50","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/ImageCanvas/index.js":"51","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/ImageCanvas/use-wasd-mode.js":"52","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionShapes/index.js":"53","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/icon-mapping.js":"54"},{"size":3097,"mtime":1607364349106,"results":"55","hashOfConfig":"56"},{"size":2861,"mtime":1607359633549,"results":"57","hashOfConfig":"56"},{"size":1901,"mtime":1607327976073,"results":"58","hashOfConfig":"56"},{"size":2208,"mtime":1607367089543,"results":"59","hashOfConfig":"56"},{"size":1044,"mtime":1606898207916,"results":"60","hashOfConfig":"56"},{"size":6402,"mtime":1607354277060,"results":"61","hashOfConfig":"56"},{"size":633,"mtime":1606844306068,"results":"62","hashOfConfig":"56"},{"size":6037,"mtime":1607349273018,"results":"63","hashOfConfig":"56"},{"size":6014,"mtime":1607349145597,"results":"64","hashOfConfig":"56"},{"size":840,"mtime":1607356965875,"results":"65","hashOfConfig":"56"},{"size":12100,"mtime":1607365738777,"results":"66","hashOfConfig":"56"},{"size":1358,"mtime":1607336363664,"results":"67","hashOfConfig":"56"},{"size":5137,"mtime":1607358731623,"results":"68","hashOfConfig":"56"},{"size":336,"mtime":1607357796217,"results":"69","hashOfConfig":"56"},{"size":2248,"mtime":1607354863652,"results":"70","hashOfConfig":"56"},{"size":691,"mtime":1606844305803,"results":"71","hashOfConfig":"56"},{"size":481,"mtime":1606844306018,"results":"72","hashOfConfig":"56"},{"size":1762,"mtime":1606844306028,"results":"73","hashOfConfig":"56"},{"size":1090,"mtime":1606844306033,"results":"74","hashOfConfig":"56"},{"size":2198,"mtime":1606844306012,"results":"75","hashOfConfig":"56"},{"size":2107,"mtime":1606844305995,"results":"76","hashOfConfig":"56"},{"size":35052,"mtime":1607358878184,"results":"77","hashOfConfig":"56"},{"size":639,"mtime":1606844306007,"results":"78","hashOfConfig":"56"},{"size":1034,"mtime":1606844306021,"results":"79","hashOfConfig":"56"},{"size":3550,"mtime":1606844306027,"results":"80","hashOfConfig":"56"},{"size":4838,"mtime":1607335613431,"results":"81","hashOfConfig":"56"},{"size":2701,"mtime":1606897388869,"results":"82","hashOfConfig":"56"},{"size":906,"mtime":1606844306023,"results":"83","hashOfConfig":"56"},{"size":3342,"mtime":1606844305995,"results":"84","hashOfConfig":"56"},{"size":145,"mtime":1606844305796,"results":"85","hashOfConfig":"56"},{"size":2670,"mtime":1606844306033,"results":"86","hashOfConfig":"56"},{"size":993,"mtime":1606844306026,"results":"87","hashOfConfig":"56"},{"size":155,"mtime":1606844305800,"results":"88","hashOfConfig":"56"},{"size":225,"mtime":1606844306073,"results":"89","hashOfConfig":"56"},{"size":707,"mtime":1606844306036,"results":"90","hashOfConfig":"56"},{"size":2331,"mtime":1606844306019,"results":"91","hashOfConfig":"56"},{"size":7134,"mtime":1607071154153,"results":"92","hashOfConfig":"56"},{"size":280,"mtime":1606844306038,"results":"93","hashOfConfig":"56"},{"size":538,"mtime":1606844306059,"results":"94","hashOfConfig":"56"},{"size":615,"mtime":1606844305806,"results":"95","hashOfConfig":"56"},{"size":978,"mtime":1606844305810,"results":"96","hashOfConfig":"56"},{"size":5300,"mtime":1606844306025,"results":"97","hashOfConfig":"56"},{"size":500,"mtime":1606844306010,"results":"98","hashOfConfig":"56"},{"size":734,"mtime":1606844306035,"results":"99","hashOfConfig":"56"},{"size":2637,"mtime":1606897388863,"results":"100","hashOfConfig":"56"},{"size":3451,"mtime":1606844306001,"results":"101","hashOfConfig":"56"},{"size":4583,"mtime":1607360065794,"results":"102","hashOfConfig":"56"},{"size":4908,"mtime":1606844306022,"results":"103","hashOfConfig":"56"},{"size":1512,"mtime":1606844305805,"results":"104","hashOfConfig":"56"},{"size":2632,"mtime":1606844306016,"results":"105","hashOfConfig":"56"},{"size":14243,"mtime":1607341919772,"results":"106","hashOfConfig":"56"},{"size":1382,"mtime":1606844306008,"results":"107","hashOfConfig":"56"},{"size":6900,"mtime":1607344457042,"results":"108","hashOfConfig":"56"},{"size":1634,"mtime":1607368707428,"results":"109","hashOfConfig":"56"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"18saq4t",{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"114","messages":"115","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116","usedDeprecatedRules":"117"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"120","messages":"121","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"122","usedDeprecatedRules":"123"},{"filePath":"124","messages":"125","errorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"126","usedDeprecatedRules":"127"},{"filePath":"128","messages":"129","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"130","usedDeprecatedRules":"131"},{"filePath":"132","messages":"133","errorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"134","messages":"135","errorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"136","usedDeprecatedRules":"131"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"139"},{"filePath":"140","messages":"141","errorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"142","messages":"143","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"144","usedDeprecatedRules":"131"},{"filePath":"145","messages":"146","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"149","messages":"150","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"151","usedDeprecatedRules":"139"},{"filePath":"152","messages":"153","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"154","usedDeprecatedRules":"127"},{"filePath":"155","messages":"156","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"157","usedDeprecatedRules":"127"},{"filePath":"158","messages":"159","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"139"},{"filePath":"160","messages":"161","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"117"},{"filePath":"162","messages":"163","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"164","messages":"165","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"166","usedDeprecatedRules":"139"},{"filePath":"167","messages":"168","errorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"169"},{"filePath":"170","messages":"171","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"172","usedDeprecatedRules":"127"},{"filePath":"173","messages":"174","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"117"},{"filePath":"175","messages":"176","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"177","messages":"178","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"179","messages":"180","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"181","messages":"182","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"183","usedDeprecatedRules":"127"},{"filePath":"184","messages":"185","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"186","messages":"187","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"188","usedDeprecatedRules":"139"},{"filePath":"189","messages":"190","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"191","usedDeprecatedRules":"127"},{"filePath":"192","messages":"193","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"194","messages":"195","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"196","messages":"197","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"198","messages":"199","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"200","usedDeprecatedRules":"127"},{"filePath":"201","messages":"202","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"139"},{"filePath":"203","messages":"204","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"139"},{"filePath":"205","messages":"206","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"207","usedDeprecatedRules":"127"},{"filePath":"208","messages":"209","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"210","messages":"211","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"212","usedDeprecatedRules":"139"},{"filePath":"213","messages":"214","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"139"},{"filePath":"215","messages":"216","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"217","usedDeprecatedRules":"139"},{"filePath":"218","messages":"219","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"220","messages":"221","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"222","messages":"223","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"224","messages":"225","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"226","messages":"227","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"228"},{"filePath":"229","messages":"230","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"231","messages":"232","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"233","messages":"234","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"235","messages":"236","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"237","messages":"238","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"239","messages":"240","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"241","messages":"242","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/Workspace/index.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/Footer/index.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/FooterButton/index.js",["243","244","245","246","247"],"// @flow\n\nimport React from \"react\"\nimport Button from \"@material-ui/core/Button\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { useIconDictionary } from \"../icon-dictionary.js\"\nimport { iconMapping } from \"../icon-mapping.js\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\n\nimport {\n  faUndo,\n  faRedo,\n  faChevronLeft,\n  faChevronRight,\n} from \"@fortawesome/free-solid-svg-icons\"\nconst emptyObj = {}\nconst faStyle = { marginTop: 4, width: 20, height: 20, marginBottom: 4,color:'green' }\nconst defaultNameIconMapping = iconMapping\n\n\nconst getIcon = (name, customIconMapping) => {\n  const Icon =\n    customIconMapping[name.toLowerCase()] ||\n    defaultNameIconMapping[name.toLowerCase()] ||\n    defaultNameIconMapping.help\n  return <Icon />\n}\n\nconst StyledButton = styled(Button)({\n  textTransform: \"none\",\n  width: 30,\n\n})\nconst ButtonInnerContent = styled(\"div\")({\n  display: \"flex\",\n  flexDirection: \"column\",\n})\nconst IconContainer = styled(\"div\")({})\nconst Text = styled(\"div\")({\n  fontWeight: \"bold\",\n  height: 28,\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n})\n\nconst Icon = (name) => {\n  switch (name) {\n    case 'Undo':\n      return faUndo;\n    case 'Redo':\n      return faRedo;\n      case 'Prev':\n      return faChevronLeft;\n      case 'Next':\n        return faChevronRight;\n    \n  }\n}\n\n\nexport const HeaderButton = ({ name, icon, disabled, onClick,showLabel }) => {\n  const customIconMapping = useIconDictionary()\n  return (\n    <StyledButton onClick={onClick} disabled={disabled}>\n      <ButtonInnerContent>\n      <FontAwesomeIcon style={!disabled ? faStyle : {...faStyle,color:'gray'}} size=\"sm\" fixedWidth icon={Icon(name)} />\n        {\n          showLabel && (\n            <Text>\n          <div>{name}</div>\n        </Text>\n          )\n        }\n      </ButtonInnerContent>\n    </StyledButton>\n  )\n}\n\nexport default HeaderButton\n",["248","249"],"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/Toolbar/index.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/LeftSidebar/styles.js",["250","251","252","253"],"import { grey, blue, orange, purple } from \"@material-ui/core/colors\"\n\nexport default {\n  container: {\n    fontSize: 11,\n    fontWeight: \"bold\",\n    color: grey[700],\n    \"& .icon\": {\n      marginTop: 4,\n      width: 10,\n      height: 10,\n      color:'green',\n\n    },\n    \"& .icon2\": {\n      opacity: 0.5,\n      width: 10,\n      color:'green',\n      height: 10,\n      transition: \"200ms opacity\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n        opacity: 1,\n      },\n    },\n  },\n  row: {\n    padding: 4,\n    cursor: \"pointer\",\n    \"&.header:hover\": {\n      // backgroundColor: blue[50],\n    },\n    \"&.highlighted\": {\n      backgroundColor: \"#5999c9\",\n    },\n    \"&:hover\": {\n      // backgroundColor: blue[50],\n      color: grey[800],\n    },\n  },\n  chip: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    padding: 2,\n    borderRadius: 2,\n    paddingLeft: 4,\n    paddingRight: 4,\n    alignItems: \"center\",\n    \"& .color\": {\n      borderRadius: 5,\n      width: 10,\n      height: 10,\n      marginRight: 4,\n    },\n    \"& .text\": {},\n  },\n}\n",["254","255"],"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/LeftSidebar/ObjectSelector.js",["256","257","258","259","260","261","262","263","264","265","266","267","268","269","270"],"import React, { useReducer, useEffect,useState, useMemo,memo } from \"react\"\nimport ButtonBase from \"@material-ui/core/ButtonBase\"\nimport ExpandIcon from \"@material-ui/icons/KeyboardArrowLeft\"\nimport ContractIcon from \"@material-ui/icons/KeyboardArrowRight\"\nimport { grey } from \"@material-ui/core/colors\"\nimport { makeStyles, styled } from \"@material-ui/core/styles\"\nimport RegionIcon from \"@material-ui/icons/PictureInPicture\"\nimport Grid from \"@material-ui/core/Grid\"\nimport ReorderIcon from \"@material-ui/icons/SwapVert\"\nimport PieChartIcon from \"@material-ui/icons/PieChart\"\nimport TrashIcon from \"@material-ui/icons/Delete\"\nimport LockIcon from \"@material-ui/icons/Lock\"\nimport UnlockIcon from \"@material-ui/icons/LockOpen\"\nimport VisibleIcon from \"@material-ui/icons/Visibility\"\nimport VisibleOffIcon from \"@material-ui/icons/VisibilityOff\"\nimport styles from \"./styles\"\nimport classnames from \"classnames\"\nconst useStyles = makeStyles(styles)\n\nconst colors = ['red','green','blue','pink','violet','indigo','black']\n\nconst Chip = ({ color, text }) => {\n  const classes = useStyles()\n  return (\n    <span className={classes.chip}>\n      <div className=\"color\" style={{ backgroundColor: color }} />\n      <div className=\"text\">{text}</div>\n    </span>\n  )\n}\n\n\n\nconst RowLayout = ({\n  header,\n  highlighted,\n  order,\n  classification,\n  area,\n  tags,\n  trash,\n  lock,\n  visible,\n  onClick,\n}) => {\n  const classes = useStyles()\n\n  const [mouseOver, changeMouseOver] = useState(false)\n  return (\n    <div\n      onClick={onClick}\n      onMouseEnter={() => changeMouseOver(true)}\n      onMouseLeave={() => changeMouseOver(false)}\n      className={classnames(classes.row, { header, highlighted })}\n    >\n      <Grid container alignItems=\"center\">\n        <Grid item xs={5}>\n          {classification}\n        </Grid>\n        <Grid item xs={4}>\n          <div style={{ textAlign: \"right\", paddingRight: 6 }}>{area}</div>\n        </Grid>\n        <Grid item xs={1}>\n          {trash}\n        </Grid>\n        <Grid item sm={1}>\n          {visible}\n        </Grid>\n        \n        <Grid item xs={1}>\n          {lock}\n        </Grid>\n       \n      </Grid>\n    </div>\n  )\n}\n\nconst RowHeader = () => {\n  return (\n    <RowLayout\n      header\n      highlighted={false}\n      order={<ReorderIcon className=\"icon\" />}\n      classification={<div style={{ paddingLeft: 10 }}>Label</div>}\n      lock={<LockIcon className=\"icon\" />}\n      visible={<VisibleIcon className=\"icon\" />}\n    />\n  )\n}\n\nconst MemoRowHeader = memo(RowHeader)\n\n\n\nconst Row = ({\n  region: r,\n  highlighted,\n  onSelectObject,\n  onDeleteObject,\n  onChangeObject,\n  visible,\n  selected,\n  locked,\n  color,\n  cls,\n  index,\n}) => {\n  // console.log(\"Region \", r);\n  return (\n    <RowLayout\n      header={true}\n      key={Math.random()}\n      highlighted={highlighted}\n      onClick={() => {\n        onSelectObject(r)\n      }}\n\n      classification={<Chip text={r.cls || \"\"} color={r.color || \"#ddd\"} />}\n      area=\"\"\n      trash={\n        (\n          <TrashIcon onClick={() => onDeleteObject(r)} className=\"icon2\" />\n        )\n      }\n      \n      lock={\n        r.locked ? (\n          <LockIcon\n            onClick={() => {\n              // console.log(\"current Reggionnnn\",r)\n              onChangeObject({\n                ...r,\n                edit:true,\n                locked: false\n              })\n            }\n  \n            }\n            className=\"icon2\"\n          />\n        ) : (\n          <UnlockIcon\n              onClick={() => {\n              // console.log(\"current Reggionnnn 136 \",r)\n\n                onChangeObject({ ...r, locked: true })\n              }}\n            className=\"icon2\"\n          />\n        )\n      }\n      visible={\n        r.visible || r.visible === undefined ? (\n          <VisibleIcon\n            onClick={() =>\n              onChangeObject({\n                ...r,\n                visible: false,\n              })\n            }\n            className=\"icon2\"\n          />\n        ) : (\n          <VisibleOffIcon\n            onClick={() => onChangeObject({ ...r, visible: true })}\n            className=\"icon2\"\n          />\n        )\n      }\n    />\n  )\n}\n\n\n\n\n\n\nconst Container = styled(\"div\")({\n  width: 300,\n  display: \"flex\",\n  flexDirection: \"column\",\n  height: '80%',\n  padding:'0 20px',\n  marginRight:'20px',\n  boxShadow: '0 2px 2px 0 rgba(0,0,0,0.2)',\n  transition: '0.3s',\n  marginTop:'30px',\n  \"&.expanded\": {\n    width: 300,\n  },\n})\n\n\nconst InnerSliderContent = styled(\"div\")({\n  width: 300,\n})\n\nconst getInitialExpandedState = () => {\n  return Boolean(window.__REACT_WORKSPACE_LAYOUT_EXPANDED_STATE)\n}\n\n\nconst MemoRow = memo(\n  Row,\n  (prevProps, nextProps) =>\n    prevProps.highlighted === nextProps.highlighted &&\n    prevProps.visible === nextProps.visible &&\n    prevProps.locked === nextProps.locked &&\n    prevProps.id === nextProps.id &&\n    prevProps.points.length === nextProps.points.length &&\n    prevProps.index === nextProps.index &&\n    prevProps.cls === nextProps.cls &&\n    prevProps.color === nextProps.color &&\n    prevProps.isNew === nextProps.isNew &&\n    prevProps.selected === nextProps.selected\n\n)\n\n\nexport const RightSidebar = ({ state,\n  onSelectObject,\n  onDeleteObject,\n  onChangeObject,\n  expandedByDefault,\n   initialExpandedState, height }) => {\n  const [expanded, toggleExpanded] = useReducer(\n    (state) => !state,\n    initialExpandedState === undefined\n      ? getInitialExpandedState()\n      : initialExpandedState\n  )\n\n  useEffect(() => {\n    if (initialExpandedState !== undefined) {\n      window.__REACT_WORKSPACE_LAYOUT_EXPANDED_STATE = expanded\n    }\n  }, [initialExpandedState, expanded])\n\n  const containerStyle = useMemo(() => ({ height: height || \"100%\" }), [height])\n\n  return (\n\n            <div style={{height:'48%',borderTop:'1px solid gray',overflowY:'scroll'}}>\n          <h4 style={{ color: 'red', margin: '10px' }}>Objects</h4>\n          {state.images[state.selectedImage].regions.map((r, i) => {\n            {/* console.log(\"Region:\", r); */ }\n            \n            return(\n              <Row\n                key={r.id}\n                {...r}\n                region={r}\n                index={i}\n                onDeleteObject={onDeleteObject}\n                onChangeObject={onChangeObject}\n                onSelectObject={onSelectObject}\n              />\n            )\n          })}\n              </div>\n  )\n}\n\nexport default RightSidebar\n\n\n\n",["271","272"],"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/WorkContainer/index.js",["273"],"import React from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { grey } from \"@material-ui/core/colors\"\n\nconst Container = styled(\"div\")({\n  position: \"relative\",\n  height: \"60%\",\n  width:'100%',\n  // backgroundColor: grey[50],\n  overflowY: \"auto\",\n})\nconst ShadowOverlay = styled(\"div\")({\n  content: \"' '\",\n  position: \"absolute\",\n  left: 0,\n  right: 0,\n  top: 0,\n  bottom: 0,\n  pointerEvents: \"none\",\n  \n})\n\nexport const WorkContainer = React.forwardRef(({ children }, ref) => {\n  return (\n    <Container ref={ref}>\n      {children}\n      <ShadowOverlay />\n    </Container>\n  )\n})\n\nexport default WorkContainer\n",["274","275"],"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/LeftSidebar/LabelSelector.js",["276","277","278","279","280","281","282","283","284","285","286","287","288","289"],"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/LeftSidebar/index.js",["290","291","292","293","294","295","296","297","298","299","300","301","302"],"import React, { useReducer, useEffect,useState, useMemo,memo } from \"react\"\nimport ButtonBase from \"@material-ui/core/ButtonBase\"\nimport ExpandIcon from \"@material-ui/icons/KeyboardArrowLeft\"\nimport ContractIcon from \"@material-ui/icons/KeyboardArrowRight\"\nimport { grey } from \"@material-ui/core/colors\"\nimport { makeStyles, styled } from \"@material-ui/core/styles\"\nimport RegionIcon from \"@material-ui/icons/PictureInPicture\"\nimport Grid from \"@material-ui/core/Grid\"\nimport ReorderIcon from \"@material-ui/icons/SwapVert\"\nimport PieChartIcon from \"@material-ui/icons/PieChart\"\nimport TrashIcon from \"@material-ui/icons/Delete\"\nimport LockIcon from \"@material-ui/icons/Lock\"\nimport UnlockIcon from \"@material-ui/icons/LockOpen\"\nimport VisibleIcon from \"@material-ui/icons/Visibility\"\nimport VisibleOffIcon from \"@material-ui/icons/VisibilityOff\"\nimport styles from \"./styles\"\nimport LabelSelector from './LabelSelector';\nimport ObjectSelector from './ObjectSelector';\n\nimport classnames from \"classnames\"\nconst useStyles = makeStyles(styles)\nconst colors = ['red','green','blue','pink','violet','indigo','black']\n\nconst Chip = ({ color, text }) => {\n  const classes = useStyles()\n  return (\n    <span className={classes.chip}>\n      <div className=\"color\" style={{ backgroundColor: color }} />\n      <div className=\"text\">{text}</div>\n    </span>\n  )\n}\n\n\n\nconst RowLayout = ({\n  header,\n  highlighted,\n  order,\n  classification,\n  area,\n  tags,\n  lock,\n  visible,\n  onClick,\n}) => {\n  const classes = useStyles()\n\n  const [mouseOver, changeMouseOver] = useState(false)\n  return (\n    <div\n      onClick={onClick}\n      onMouseEnter={() => changeMouseOver(true)}\n      onMouseLeave={() => changeMouseOver(false)}\n      className={classnames(classes.row, { header, highlighted })}\n    >\n      <Grid container alignItems=\"center\">\n        <Grid item xs={5}>\n          {classification}\n        </Grid>\n        <Grid item xs={5}>\n          <div style={{ textAlign: \"right\", paddingRight: 6 }}>{area}</div>\n        </Grid>\n        <Grid item sm={1}>\n          {visible}\n        </Grid>\n        <Grid item xs={1}>\n          {lock}\n        </Grid>\n       \n      </Grid>\n    </div>\n  )\n}\n\nconst RowHeader = () => {\n  return (\n    <RowLayout\n      header\n      highlighted={false}\n      order={<ReorderIcon className=\"icon\" />}\n      classification={<div style={{ paddingLeft: 10 }}>Label</div>}\n      lock={<LockIcon className=\"icon\" />}\n      visible={<VisibleIcon className=\"icon\" />}\n    />\n  )\n}\n\nconst MemoRowHeader = memo(RowHeader)\n\n\n\nconst Row = ({\n  region: r,\n  highlighted,\n  onSelectRegion,\n  onDeleteRegion,\n  onChangeRegion,\n  visible,\n  selected,\n  locked,\n  color,\n  cls,\n  index,\n}) => {\n\n  return (\n    <RowLayout\n      header={true}\n      key={Math.random()}\n      highlighted={selected}\n      onClick={() => {\n        onSelectRegion(r)\n      }}\n\n      classification={<Chip text={r.cls || \"\"} color={r.color || \"#ddd\"} />}\n      area=\"\"\n      \n      lock={\n        r.locked ? (\n          <LockIcon\n            onClick={() =>\n              onChangeRegion({\n                ...r,\n                edit:true,\n                locked: r.shouldHideDeleteIcon\n                  ? r.createdByUser\n                    ? false\n                    : true\n                  : false,\n              })\n            }\n            className=\"icon2\"\n          />\n        ) : (\n          <UnlockIcon\n            onClick={() => onChangeRegion({ ...r, locked: true })}\n            className=\"icon2\"\n          />\n        )\n      }\n      visible={\n        r.visible || r.visible === undefined ? (\n          <VisibleIcon\n            // onClick={() =>\n            //   onChangeRegion({\n            //     ...r,\n            //     visible: false,\n            //   })\n            // }\n            className=\"icon2\"\n          />\n        ) : (\n          <VisibleOffIcon\n            // onClick={() => onChangeRegion({ ...r, visible: true })}\n            className=\"icon2\"\n          />\n        )\n      }\n    />\n  )\n}\n\n\n\n\n\n\nconst Container = styled(\"div\")({\n  width: 300,\n  display: \"flex\",\n  flexDirection: \"column\",\n  height: '95%',\n  padding:'0 20px',\n  marginRight:'20px',\n  boxShadow: '0 2px 2px 0 rgba(0,0,0,0.2)',\n  transition: '0.3s',\n  marginTop:'30px',\n  \"&.expanded\": {\n    width: 300,\n  },\n})\n\n\nconst InnerSliderContent = styled(\"div\")({\n  width: 300,\n  height:'100%',\n})\n\nconst getInitialExpandedState = () => {\n  return Boolean(window.__REACT_WORKSPACE_LAYOUT_EXPANDED_STATE)\n}\n\n\nconst MemoRow = memo(\n  Row,\n  (prevProps, nextProps) =>\n    prevProps.highlighted === nextProps.highlighted &&\n    prevProps.visible === nextProps.visible &&\n    prevProps.locked === nextProps.locked &&\n    prevProps.id === nextProps.id &&\n    prevProps.index === nextProps.index &&\n    prevProps.cls === nextProps.cls &&\n    prevProps.color === nextProps.color &&\n    prevProps.isNew === nextProps.isNew &&\n    prevProps.selected === nextProps.selected\n\n)\n\n\nexport const LeftSidebar = ({ state,children, onDeleteObject,\n  onChangeLabel,\n  onSelectLabel,\n  onChangeObject,\n  onSelectObject,\n  expandedByDefault,\n   initialExpandedState, height }) => {\n  const [expanded, toggleExpanded] = useReducer(\n    (state) => !state,\n    initialExpandedState === undefined\n      ? getInitialExpandedState()\n      : initialExpandedState\n  )\n\n  useEffect(() => {\n    if (initialExpandedState !== undefined) {\n      window.__REACT_WORKSPACE_LAYOUT_EXPANDED_STATE = expanded\n    }\n  }, [initialExpandedState, expanded])\n\n  const containerStyle = useMemo(() => ({ height: height || \"100%\" }), [height])\n\n  return (\n    <Container>\n      <InnerSliderContent>\n        {/* Lables */}\n         <LabelSelector state={state} onChangeLabel={onChangeLabel}\n          onSelectLabel={onSelectLabel} />\n        <ObjectSelector state={state}  onSelectObject={onSelectObject}\n                onDeleteObject={onDeleteObject}\n                onChangeObject={onChangeObject}/>\n      \n        </InnerSliderContent>      \n    </Container>\n  )\n}\n\nexport default LeftSidebar\n","/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/ImageSwitcher/index.js",[],["303","304"],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/MainLayout/index.js",["305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323"],"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/Toolbar/Slider.js",["324","325","326","327","328","329","330","331"],"import React from 'react'\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport Slider from '@material-ui/core/Slider';\n\nconst useStyles = makeStyles((theme) => ({\n    \n  }));\n\nconst FilterSlider = (props) => {\n    const filter = props.activeImage.filter;\n\n    const classes = useStyles();\n\n    const getDefaultValue = (label) => {\n        if (label == 'brightness') {\n            return 100;\n        }\n        if (label == 'contrast') {\n            return 1;\n        }\n    }\n    const getMaxValue = (label) => {\n        if (label == 'brightness') {\n            return 200;\n        }\n        if (label == 'contrast') {\n            return 10;\n        }\n    }\n    const getMinValue = (label) => {\n        if (label == 'brightness') {\n            return 10;\n        }\n        if (label == 'contrast') {\n            return 1;\n        }\n    }\n\n    return (\n        <div className={classes.root}>\n            \n            <input type=\"range\" step={0} min={getMinValue(props.id)} max={getMaxValue(props.id)}\n                value={filter ? filter[props.id] : getDefaultValue(props.id)} aria-label={props.id} id={props.id} onChange={props.onChange} defaultValue={getDefaultValue(props.id)} />\n            {/* <span>{filter ? filter[props.id] : getDefaultValue(props.id) }</span>            */}\n        </div>\n    )\n}\n\nexport default FilterSlider\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/index.js",["332","333","334"],"/Users/shahn/dev/annotator/custom_annotator/src/components/Annotator.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/video-reducer.js",["335","336","337","338"],"// @flow\n\nimport type {\n  MainLayoutVideoAnnotationState,\n  Action,\n} from \"../../MainLayout/types\"\nimport { setIn, without } from \"seamless-immutable\"\nimport getImpliedVideoRegions from \"./get-implied-video-regions\"\nimport { saveToHistory } from \"./history-handler.js\"\n\nexport default (state: MainLayoutVideoAnnotationState, action: Action) => {\n  const copyImpliedRegions = () => {\n    return setIn(\n      saveToHistory(state, \"Add Keyframe\"),\n      [\"keyframes\", state.currentVideoTime || 0],\n      {\n        regions: getImpliedVideoRegions(\n          state.keyframes,\n          state.currentVideoTime\n        ),\n      }\n    )\n  }\n\n  switch (action.type) {\n    case \"IMAGE_OR_VIDEO_LOADED\": {\n      const { duration } = action.metadata\n      if (typeof duration === \"number\") {\n        return setIn(state, [\"videoDuration\"], duration * 1000)\n      }\n    }\n    case \"FOOTER_BUTTON_CLICKED\": {\n      switch (action.buttonName.toLowerCase()) {\n        case \"play\":\n          return setIn(state, [\"videoPlaying\"], true)\n        case \"pause\":\n          return setIn(state, [\"videoPlaying\"], false)\n      }\n    }\n    case \"CHANGE_VIDEO_TIME\": {\n      return setIn(state, [\"currentVideoTime\"], action.newTime)\n    }\n    case \"CHANGE_VIDEO_PLAYING\": {\n      return setIn(state, [\"videoPlaying\"], action.isPlaying)\n    }\n    case \"DELETE_KEYFRAME\": {\n      return setIn(state, [\"keyframes\"], without(state.keyframes, action.time))\n    }\n    default:\n      break\n  }\n\n  // Before the user modifies regions, copy the interpolated regions over to a\n  // new keyframe\n  if (!state.keyframes[state.currentVideoTime]) {\n    switch (action.type) {\n      case \"BEGIN_BOX_TRANSFORM\":\n      case \"BEGIN_MOVE_POINT\":\n      case \"BEGIN_MOVE_POLYGON_POINT\":\n      case \"ADD_POLYGON_POINT\":\n      case \"SELECT_REGION\":\n      case \"CHANGE_REGION\":\n      case \"DELETE_REGION\":\n      case \"OPEN_REGION_EDITOR\":\n        return copyImpliedRegions()\n      case \"MOUSE_DOWN\": {\n        switch (state.selectedTool) {\n          case \"create-point\":\n          case \"create-polygon\":\n          case \"create-box\":\n            return copyImpliedRegions()\n          default:\n            break\n        }\n        break\n      }\n      default:\n        break\n    }\n  }\n\n  return state\n}\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/get-active-image.js",["339"],"import { getIn } from \"seamless-immutable\"\n\nexport default (state) => {\n  let currentImageIndex = null,\n    pathToActiveImage,\n    activeImage\n  if (state.annotationType === \"image\") {\n    currentImageIndex = state.selectedImage\n    if (currentImageIndex === -1) {\n      currentImageIndex = null\n      activeImage = null\n    } else {\n      pathToActiveImage = [\"images\", currentImageIndex]\n      activeImage = getIn(state, pathToActiveImage)\n    }\n  } else if (state.annotationType === \"video\") {\n    pathToActiveImage = [\"keyframes\", state.currentVideoTime || 0]\n    activeImage = getIn(state, pathToActiveImage) || null\n  }\n  return { currentImageIndex, pathToActiveImage, activeImage }\n}\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/MainLayout/styles.js",["340"],"import { grey } from \"@material-ui/core/colors\"\n\nexport default {\n  container: {\n    display: \"flex\",\n    flexGrow: 1,\n    flexDirection: \"column\",\n    height: \"100%\",\n    maxHeight: \"100vh\",\n    backgroundColor: \"#fff\",\n    overflow: \"hidden\",\n    \"&.fullscreen\": {\n      position: \"absolute\",\n      zIndex: 99999,\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n    },\n  },\n  headerTitle: {\n    fontWeight: \"bold\",\n    color: grey[700],\n    paddingLeft: 16,\n  },\n}\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/SettingsDialog/index.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/TaskDescriptionSidebarBox/index.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/KeyframesSelectorSidebarBox/index.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/HistorySidebarBox/index.js",["341","342"],"// @flow\n\nimport React, { setState, memo } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport HistoryIcon from \"@material-ui/icons/History\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\"\nimport UndoIcon from \"@material-ui/icons/Undo\"\nimport moment from \"moment\"\nimport { grey } from \"@material-ui/core/colors\"\nimport isEqual from \"lodash/isEqual\"\nimport Box from \"@material-ui/core/Box\"\n\nconst useStyles = makeStyles({\n  emptyText: {\n    fontSize: 14,\n    fontWeight: \"bold\",\n    color: grey[500],\n    textAlign: \"center\",\n    padding: 20,\n  },\n})\n\nconst listItemTextStyle = { paddingLeft: 16 }\n\nexport const HistorySidebarBox = ({\n  history,\n  onRestoreHistory,\n}: {\n  history: Array<{ name: string, time: Date }>,\n}) => {\n  const classes = useStyles()\n\n  return (\n    <SidebarBoxContainer\n      title=\"History\"\n      icon={<HistoryIcon style={{ color: grey[700] }} />}\n      expandedByDefault\n    >\n      <List>\n        {history.length === 0 && (\n          <div className={classes.emptyText}>No History Yet</div>\n        )}\n        {history.map(({ name, time }, i) => (\n          <ListItem button dense key={i}>\n            <ListItemText\n              style={listItemTextStyle}\n              primary={name}\n              secondary={moment(time).format(\"LT\")}\n            />\n            {i === 0 && (\n              <ListItemSecondaryAction onClick={() => onRestoreHistory()}>\n                <IconButton>\n                  <UndoIcon />\n                </IconButton>\n              </ListItemSecondaryAction>\n            )}\n          </ListItem>\n        ))}\n      </List>\n    </SidebarBoxContainer>\n  )\n}\n\nexport default memo(HistorySidebarBox, (prevProps, nextProps) =>\n  isEqual(\n    prevProps.history.map((a) => [a.name, a.time]),\n    nextProps.history.map((a) => [a.name, a.time])\n  )\n)\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/general-reducer.js",["343","344","345","346","347","348","349","350","351","352","353","354","355","356","357"],"// @flow\nimport type { MainLayoutState, Action } from \"../../MainLayout/types\"\nimport { moveRegion } from \"../../ImageCanvas/region-tools.js\"\nimport Immutable,{ getIn, setIn, updateIn } from \"seamless-immutable\"\nimport moment from \"moment\"\nimport isEqual from \"lodash/isEqual\"\nimport getActiveImage from \"./get-active-image\"\nimport { saveToHistory } from \"./history-handler.js\"\nimport colors from \"../../colors\"\nimport fixTwisted from \"./fix-twisted\"\nimport convertExpandingLineToPolygon from \"./convert-expanding-line-to-polygon\"\nimport clamp from \"clamp\"\n\nimport getLandmarksWithTransform from \"../../utils/get-landmarks-with-transform\"\n\nconst getRandomId = () => Math.random().toString().split(\".\")[1]\n\nconst generalReducer = (state, action) => {\n  if (\n    state.allowedArea &&\n    state.selectedTool !== \"modify-allowed-area\" &&\n    [\"MOUSE_DOWN\", \"MOUSE_UP\", \"MOUSE_MOVE\"].includes(action.type)\n  ) {\n    const aa = state.allowedArea\n    action.x = clamp(action.x, aa.x, aa.x + aa.w)\n    action.y = clamp(action.y, aa.y, aa.y + aa.h)\n  }\n\n  if (action.type === \"ON_CLS_ADDED\" && action.cls && action.cls !== \"\") {\n    const oldRegionClsList = state.regionClsList\n    const newState = {\n      ...state,\n      regionClsList: oldRegionClsList.concat(action.cls),\n    }\n    return newState\n  }\n\n  // Throttle certain actions\n  if (action.type === \"MOUSE_MOVE\") {\n    if (Date.now() - ((state: any).lastMouseMoveCall || 0) < 16) return state\n    state = setIn(state, [\"lastMouseMoveCall\"], Date.now())\n  }\n  if (!action.type.includes(\"MOUSE\")) {\n    state = setIn(state, [\"lastAction\"], action)\n  }\n\n  const { currentImageIndex, pathToActiveImage, activeImage } = getActiveImage(\n    state\n  )\n\n  const getRegionIndex = (region) => {\n    const regionId =\n      typeof region === \"string\" || typeof region === \"number\"\n        ? region\n        : region.id\n    if (!activeImage) return null\n    const regionIndex = (activeImage.regions || []).findIndex(\n      (r) => r.id === regionId\n    )\n    return regionIndex === -1 ? null : regionIndex\n  }\n  const getRegion = (regionId) => {\n    if (!activeImage) return null\n    const regionIndex = getRegionIndex(regionId)\n    if (regionIndex === null) return [null, null]\n    const region = activeImage.regions[regionIndex]\n    return [region, regionIndex]\n  }\n  const modifyRegion = (regionId, obj) => {\n    const [region, regionIndex] = getRegion(regionId)\n    if (!region) return state\n    if (obj !== null) {\n      return setIn(state, [...pathToActiveImage, \"regions\", regionIndex], {\n        ...region,\n        ...obj,\n      })\n    } else {\n      // delete region\n      const regions = activeImage.regions\n      return setIn(\n        state,\n        [...pathToActiveImage, \"regions\"],\n        (regions || []).filter((r) => r.id !== region.id)\n      )\n    }\n  }\n  const unselectRegions = (state: MainLayoutState) => {\n    if (!activeImage) return state\n    return setIn(\n      state,\n      [...pathToActiveImage, \"regions\"],\n      (activeImage.regions || []).map((r) => ({\n        ...r,\n        highlighted: false,\n      }))\n    )\n  }\n\n  const closeEditors = (state: MainLayoutState) => {\n    if (currentImageIndex === null) return state\n    return setIn(\n      state,\n      [...pathToActiveImage, \"regions\"],\n      (activeImage.regions || []).map((r) => ({\n        ...r,\n        editingLabels: false,\n      }))\n    )\n  }\n\n  const setNewImage = (img: string | Object, index: number) => {\n    let { src, frameTime } = typeof img === \"object\" ? img : { src: img }\n    return setIn(\n      setIn(state, [\"selectedImage\"], index),\n      [\"selectedImageFrameTime\"],\n      frameTime\n    )\n  }\n\n  switch (action.type) {\n    case \"@@INIT\": {\n      return setIn(state, ['initState'], state);\n    }\n    case \"SELECT_IMAGE\": {\n      return setNewImage(action.image, action.imageIndex)\n    }\n    \n    case 'SELECT_LABEL': {\n      // console.log(\"State: \", state);\n      const selectedLabel = action.selectedLabel;\n      // console.log(selectedLabel);\n      return setIn(\n        state,\n        ['images', state.selectedImage, 'label'],selectedLabel\n      )\n    }\n\n    case \"CHANGE_REGION\": {\n      // console.log(\"ActionRegion:\", action.region);\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const oldRegion = activeImage.regions[regionIndex]\n      // console.log('OldRegion,', oldRegion);\n      // console.log('NewRegion,', action.region);\n      if (oldRegion.cls !== action.region.cls) {\n        state = saveToHistory(state, \"Change Region Classification\")\n        const clsIndex = state.regionClsList.indexOf(action.region.cls)\n        if (clsIndex !== -1) {\n          action.region.color = colors[clsIndex % colors.length]\n        }\n      }\n      if (!isEqual(oldRegion.tags, action.region.tags)) {\n        state = saveToHistory(state, \"Change Region Tags\")\n      }\n      return setIn(\n        state,\n        [...pathToActiveImage, \"regions\", regionIndex],\n        action.region\n      )\n    }\n\n    case 'SUBMIT': {\n\n      const regionData = getIn(state, [...pathToActiveImage, \"region_data\"])\n      console.log(\"Data: \", regionData);\n\n      return state;\n    }\n    \n\n    case 'CHANGE_REGION_DATA': {\n      const { regionData } = action;\n       return setIn(state, [...pathToActiveImage, \"region_data\"], regionData)\n      }\n    case \"CHANGE_LABEL\": {\n      const label = action.label;\n      if (!label || activeImage.regions.length === 0) {\n        return state;\n      }\n      \n\n      // Check if image has regions associated to this label\n      const hasRegions = [...(activeImage.regions || [])].find((r) => r.cls === label.cls);\n      if (!hasRegions) {\n        return state;\n      }\n      \n\n      const regions = [...(activeImage.regions || [])].map((r) => {\n        if (r.cls === label.cls) {\n          return ({\n            ...r,\n            visible: label.visible,\n            locked: label.locked\n          })\n        }\n        return r;\n      })\n\n     state = setIn(state, ['regionClsList'], state.regionClsList.map(regionLabel => {\n        if (regionLabel.cls === label.cls) {\n          return ({\n            ...regionLabel,\n            visible: label.visible,\n            locked: label.locked\n\n          })\n        }\n       return regionLabel;\n      }));\n\n\n      return setIn(state, [...pathToActiveImage, \"regions\"], regions)\n\n    }\n    case \"CHANGE_IMAGE\": {\n      if (!activeImage) return state\n      const { delta } = action\n      for (const key of Object.keys(delta)) {\n        if (key === \"cls\") saveToHistory(state, \"Change Image Class\")\n        if (key === \"tags\") saveToHistory(state, \"Change Image Tags\")\n        state = setIn(state, [...pathToActiveImage, key], delta[key])\n      }\n      return state\n    }\n    case \"SELECT_REGION\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const regions = [...(activeImage.regions || [])].map((r) => ({\n        ...r,\n        highlighted: r.id === region.id,\n        editingLabels: r.id === region.id,\n      }))\n      return setIn(state, [...pathToActiveImage, \"regions\"], regions)\n    }\n    case \"BEGIN_MOVE_POINT\": {\n      state = closeEditors(state)\n      return setIn(state, [\"mode\"], {\n        mode: \"MOVE_REGION\",\n        regionId: action.point.id,\n      })\n    }\n    case \"BEGIN_BOX_TRANSFORM\": {\n      const { box, directions } = action\n      state = closeEditors(state)\n      if (directions[0] === 0 && directions[1] === 0) {\n        return setIn(state, [\"mode\"], { mode: \"MOVE_REGION\", regionId: box.id })\n      } else {\n        return setIn(state, [\"mode\"], {\n          mode: \"RESIZE_BOX\",\n          regionId: box.id,\n          freedom: directions,\n          original: { x: box.x, y: box.y, w: box.w, h: box.h },\n        })\n      }\n    }\n    case \"BEGIN_MOVE_POLYGON_POINT\": {\n\n      const { polygon, pointIndex } = action\n      // console.log('Pindex: ', polygon);\n\n      state = closeEditors(state)\n      if (\n        state.mode &&\n        state.mode.mode === \"DRAW_POLYGON\" &&\n        pointIndex === 0\n      ) {\n        return setIn(\n          modifyRegion(polygon, {\n            points: polygon.points.slice(0, -1),\n            open: false,\n          }),\n          [\"mode\"],\n          null\n        )\n      }\n      // else {\n      //   state = saveToHistory(state, \"Move Polygon Point\")\n      // }\n      return setIn(state, [\"mode\"], {\n        mode: \"MOVE_POLYGON_POINT\",\n        regionId: polygon.id,\n        pointIndex,\n      })\n    }\n    case \"BEGIN_MOVE_KEYPOINT\": {\n      const { region, keypointId } = action\n      state = closeEditors(state)\n      state = saveToHistory(state, \"Move Keypoint\")\n      return setIn(state, [\"mode\"], {\n        mode: \"MOVE_KEYPOINT\",\n        regionId: region.id,\n        keypointId,\n      })\n    }\n    case \"ADD_POLYGON_POINT\": {\n      const { polygon, point, pointIndex } = action\n      const regionIndex = getRegionIndex(polygon)\n      // console.log(\"regionIndex\", regionIndex);\n      if (regionIndex === null) return state\n      const points = [...polygon.points]\n      points.splice(pointIndex, 0, point)\n      return setIn(state, [...pathToActiveImage, \"regions\", regionIndex], {\n        ...polygon,\n        points,\n      })\n    }\n    case \"MOUSE_MOVE\": {\n      const { x, y } = action\n\n      if (!state.mode) return state\n      if (!activeImage) return state\n      const { mouseDownAt } = state\n      switch (state.mode.mode) {\n        case \"MOVE_POLYGON_POINT\": {\n          const { pointIndex, regionId } = state.mode\n          const regionIndex = getRegionIndex(regionId)\n          if (regionIndex === null) return state\n          return setIn(\n            state,\n            [\n              ...pathToActiveImage,\n              \"regions\",\n              regionIndex,\n              \"points\",\n              pointIndex,\n            ],\n            [x, y]\n          )\n        }\n        case \"MOVE_KEYPOINT\": {\n          const { keypointId, regionId } = state.mode\n          const [region, regionIndex] = getRegion(regionId)\n          if (regionIndex === null) return state\n          return setIn(\n            state,\n            [\n              ...pathToActiveImage,\n              \"regions\",\n              regionIndex,\n              \"points\",\n              keypointId,\n            ],\n            { ...(region: any).points[keypointId], x, y }\n          )\n        }\n        case \"MOVE_REGION\": {\n          const { regionId } = state.mode\n          if (regionId === \"$$allowed_area\") {\n            const {\n              allowedArea: { w, h },\n            } = state\n            return setIn(state, [\"allowedArea\"], {\n              x: x - w / 2,\n              y: y - h / 2,\n              w,\n              h,\n            })\n          }\n          const regionIndex = getRegionIndex(regionId)\n          if (regionIndex === null) return state\n          return setIn(\n            state,\n            [...pathToActiveImage, \"regions\", regionIndex],\n            moveRegion(activeImage.regions[regionIndex], x, y)\n          )\n        }\n        case \"RESIZE_BOX\": {\n          const {\n            regionId,\n            freedom: [xFree, yFree],\n            original: { x: ox, y: oy, w: ow, h: oh },\n          } = state.mode\n\n          const dx = xFree === 0 ? ox : xFree === -1 ? Math.min(ox + ow, x) : ox\n          const dw =\n            xFree === 0\n              ? ow\n              : xFree === -1\n              ? ow + (ox - dx)\n              : Math.max(0, ow + (x - ox - ow))\n          const dy = yFree === 0 ? oy : yFree === -1 ? Math.min(oy + oh, y) : oy\n          const dh =\n            yFree === 0\n              ? oh\n              : yFree === -1\n              ? oh + (oy - dy)\n              : Math.max(0, oh + (y - oy - oh))\n\n          // determine if we should switch the freedom\n          if (dw <= 0.001) {\n            state = setIn(state, [\"mode\", \"freedom\"], [xFree * -1, yFree])\n          }\n          if (dh <= 0.001) {\n            state = setIn(state, [\"mode\", \"freedom\"], [xFree, yFree * -1])\n          }\n\n          if (regionId === \"$$allowed_area\") {\n            return setIn(state, [\"allowedArea\"], {\n              x: dx,\n              w: dw,\n              y: dy,\n              h: dh,\n            })\n          }\n\n          const regionIndex = getRegionIndex(regionId)\n          if (regionIndex === null) return state\n          const box = activeImage.regions[regionIndex]\n\n          return setIn(state, [...pathToActiveImage, \"regions\", regionIndex], {\n            ...box,\n            x: dx,\n            w: dw,\n            y: dy,\n            h: dh,\n          })\n        }\n        case \"RESIZE_KEYPOINTS\": {\n          const { regionId, landmarks, centerX, centerY } = state.mode\n          const distFromCenter = Math.sqrt(\n            (centerX - x) ** 2 + (centerY - y) ** 2\n          )\n          const scale = distFromCenter / 0.15\n          return modifyRegion(regionId, {\n            points: getLandmarksWithTransform({\n              landmarks,\n              center: { x: centerX, y: centerY },\n              scale,\n            }),\n          })\n        }\n        case \"DRAW_POLYGON\": {\n          // console.log('Draw pol')\n          const { regionId } = state.mode\n          const [region, regionIndex] = getRegion(regionId)\n          if (!region) return setIn(state, [\"mode\"], null)\n          return setIn(\n            state,\n            [\n              ...pathToActiveImage,\n              \"regions\",\n              regionIndex,\n              \"points\",\n              (region: any).points.length - 1,\n            ],\n            [x, y]\n          )\n        }\n        case \"DRAW_EXPANDING_LINE\": {\n          const { regionId } = state.mode\n          const [expandingLine, regionIndex] = getRegion(regionId)\n          if (!expandingLine) return state\n          const isMouseDown = Boolean(state.mouseDownAt)\n          if (isMouseDown) {\n            // If the mouse is down, set width/angle\n            const lastPoint = expandingLine.points.slice(-1)[0]\n            const mouseDistFromLastPoint = Math.sqrt(\n              (lastPoint.x - x) ** 2 + (lastPoint.y - y) ** 2\n            )\n            if (mouseDistFromLastPoint < 0.002 && !lastPoint.width) return state\n\n            const newState = setIn(\n              state,\n              [...pathToActiveImage, \"regions\", regionIndex, \"points\"],\n              expandingLine.points.slice(0, -1).concat([\n                {\n                  ...lastPoint,\n                  width: mouseDistFromLastPoint * 2,\n                  angle: Math.atan2(lastPoint.x - x, lastPoint.y - y),\n                },\n              ])\n            )\n            return newState\n          } else {\n            // If mouse is up, move the next candidate point\n            return setIn(\n              state,\n              [...pathToActiveImage, \"regions\", regionIndex],\n              {\n                ...expandingLine,\n                candidatePoint: { x, y },\n              }\n            )\n          }\n\n          return state\n        }\n        case \"SET_EXPANDING_LINE_WIDTH\": {\n          const { regionId } = state.mode\n          const [expandingLine, regionIndex] = getRegion(regionId)\n          if (!expandingLine) return state\n          const lastPoint = expandingLine.points.slice(-1)[0]\n          const { mouseDownAt } = state\n          return setIn(\n            state,\n            [...pathToActiveImage, \"regions\", regionIndex, \"expandingWidth\"],\n            Math.sqrt((lastPoint.x - x) ** 2 + (lastPoint.y - y) ** 2)\n          )\n        }\n        default:\n          return state\n      }\n    }\n    case \"MOUSE_DOWN\": {\n      if (!activeImage) return state\n      const { x, y } = action\n\n\n      state = setIn(state, [\"mouseDownAt\"], { x, y })\n      \n      if (state.mode) {\n        switch (state.mode.mode) {\n          case \"DRAW_POLYGON\": {\n            const [polygon, regionIndex] = getRegion(state.mode.regionId)\n            if (!polygon) break\n            return setIn(\n              state,\n              [...pathToActiveImage, \"regions\", regionIndex],\n              { ...polygon, points: polygon.points.concat([[x, y]]) }\n            )\n          }\n          case \"DRAW_EXPANDING_LINE\": {\n            const [expandingLine, regionIndex] = getRegion(state.mode.regionId)\n            if (!expandingLine) break\n            const lastPoint = expandingLine.points.slice(-1)[0]\n            if (\n              expandingLine.points.length > 1 &&\n              Math.sqrt((lastPoint.x - x) ** 2 + (lastPoint.y - y) ** 2) < 0.002\n            ) {\n              if (!lastPoint.width) {\n                return setIn(state, [\"mode\"], {\n                  mode: \"SET_EXPANDING_LINE_WIDTH\",\n                  regionId: state.mode.regionId,\n                })\n              } else {\n                return state\n                  .setIn(\n                    [...pathToActiveImage, \"regions\", regionIndex],\n                    convertExpandingLineToPolygon(expandingLine)\n                  )\n                  .setIn([\"mode\"], null)\n              }\n            }\n\n            // Create new point\n            return setIn(\n              state,\n              [...pathToActiveImage, \"regions\", regionIndex, \"points\"],\n              expandingLine.points.concat([{ x, y, angle: null, width: null }])\n            )\n          }\n          case \"SET_EXPANDING_LINE_WIDTH\": {\n            const [expandingLine, regionIndex] = getRegion(state.mode.regionId)\n            if (!expandingLine) break\n            const { expandingWidth } = expandingLine\n            return state\n              .setIn(\n                [...pathToActiveImage, \"regions\", regionIndex],\n                convertExpandingLineToPolygon({\n                  ...expandingLine,\n                  points: expandingLine.points.map((p) =>\n                    p.width ? p : { ...p, width: expandingWidth }\n                  ),\n                  expandingWidth: undefined,\n                })\n              )\n              .setIn([\"mode\"], null)\n          }\n          default:\n            break\n        }\n      }\n\n      let newRegion\n      if (!activeImage.label) {\n        return state;\n      }\n      let defaultRegionCls = activeImage.label.cls,\n        defaultRegionColor = activeImage.label.color\n      // if (activeImage && (activeImage.regions || []).length > 0) {\n      //   defaultRegionCls = activeImage.regions.slice(-1)[0].cls\n      //   const clsIndex = (state.regionClsList || []).indexOf(defaultRegionCls)\n      //   if (clsIndex !== -1) {\n      //     defaultRegionColor = colors[clsIndex % colors.length]\n      //   }\n      // }\n\n      switch (state.selectedTool) {\n        case \"create-point\": {\n          state = saveToHistory(state, \"Create Point\")\n          newRegion = {\n            type: \"point\",\n            x,\n            y,\n            highlighted: true,\n            editingLabels: true,\n            color: defaultRegionColor,\n            id: getRandomId(),\n            cls: defaultRegionCls,\n          }\n          break\n        }\n        case \"create-box\": {\n          state = saveToHistory(state, \"Create Box\")\n          newRegion = {\n            type: \"box\",\n            x: x,\n            y: y,\n            w: 0,\n            h: 0,\n            highlighted: true,\n            editingLabels: false,\n            color: defaultRegionColor,\n            cls: defaultRegionCls,\n            id: getRandomId(),\n          }\n          state = setIn(state, [\"mode\"], {\n            mode: \"RESIZE_BOX\",\n            editLabelEditorAfter: true,\n            regionId: newRegion.id,\n            freedom: [1, 1],\n            original: { x, y, w: newRegion.w, h: newRegion.h },\n            isNew: true,\n          })\n          break\n        }\n        case \"polygon\": {\n\n          if (state.mode && state.mode.mode === \"DRAW_POLYGON\") break\n          state = saveToHistory(state, \"Create Polygon\")\n          newRegion = {\n            type: \"polygon\",\n            points: [\n              [x, y],\n              [x, y],\n            ],\n            open: true,\n            highlighted: true,\n            color: defaultRegionColor,\n            cls: defaultRegionCls,\n            id: getRandomId(),\n          }\n          state = setIn(state, [\"mode\"], {\n            mode: \"DRAW_POLYGON\",\n            regionId: newRegion.id,\n          })\n          break\n        }\n        case \"create-expanding-line\": {\n          state = saveToHistory(state, \"Create Expanding Line\")\n          newRegion = {\n            type: \"expanding-line\",\n            unfinished: true,\n            points: [{ x, y, angle: null, width: null }],\n            open: true,\n            highlighted: true,\n            color: defaultRegionColor,\n            cls: defaultRegionCls,\n            id: getRandomId(),\n          }\n          state = setIn(state, [\"mode\"], {\n            mode: \"DRAW_EXPANDING_LINE\",\n            regionId: newRegion.id,\n          })\n          break\n        }\n        case \"create-keypoints\": {\n          state = saveToHistory(state, \"Create Keypoints\")\n          const [\n            [keypointsDefinitionId, { landmarks, connections }],\n          ] = (Object.entries(state.keypointDefinitions): any)\n\n          newRegion = {\n            type: \"keypoints\",\n            keypointsDefinitionId,\n            points: getLandmarksWithTransform({\n              landmarks,\n              center: { x, y },\n              scale: 1,\n            }),\n            highlighted: true,\n            editingLabels: false,\n            id: getRandomId(),\n          }\n          state = setIn(state, [\"mode\"], {\n            mode: \"RESIZE_KEYPOINTS\",\n            landmarks,\n            centerX: x,\n            centerY: y,\n            regionId: newRegion.id,\n            isNew: true,\n          })\n          break\n        }\n        default:\n          break\n      }\n\n      const regions = [...(getIn(state, pathToActiveImage).regions || [])]\n        .map((r) =>\n          setIn(r, [\"editingLabels\"], false).setIn([\"highlighted\"], false)\n        )\n        .concat(newRegion ? [newRegion] : [])\n\n      return setIn(state, [...pathToActiveImage, \"regions\"], regions)\n    }\n    case \"MOUSE_UP\": {\n      const { x, y } = action\n\n      const { mouseDownAt = { x, y } } = state\n      if (!state.mode) return state\n      state = setIn(state, [\"mouseDownAt\"], null)\n      switch (state.mode.mode) {\n        case \"RESIZE_BOX\": {\n          if (state.mode.isNew) {\n            if (\n              Math.abs(state.mode.original.x - x) < 0.002 ||\n              Math.abs(state.mode.original.y - y) < 0.002\n            ) {\n              return setIn(\n                modifyRegion(state.mode.regionId, null),\n                [\"mode\"],\n                null\n              )\n            }\n          }\n          if (state.mode.editLabelEditorAfter) {\n            return {\n              ...modifyRegion(state.mode.regionId, { editingLabels: true }),\n              mode: null,\n            }\n          }\n        }\n        case \"MOVE_REGION\":\n        case \"RESIZE_KEYPOINTS\":\n        case \"MOVE_POLYGON_POINT\": {\n          // console.log(\"Moveee\")\n          return { ...state, mode: null }\n        }\n        case \"MOVE_KEYPOINT\": {\n          return { ...state, mode: null }\n        }\n        case \"CREATE_POINT_LINE\": {\n          return state\n        }\n        case \"DRAW_EXPANDING_LINE\": {\n          // console.log(\"Drawinggg\");\n          const [expandingLine, regionIndex] = getRegion(state.mode.regionId)\n          if (!expandingLine) return state\n          let newExpandingLine = expandingLine\n          const lastPoint =\n            expandingLine.points.length !== 0\n              ? expandingLine.points.slice(-1)[0]\n              : mouseDownAt\n          let jointStart\n          if (expandingLine.points.length > 1) {\n            jointStart = expandingLine.points.slice(-2)[0]\n          } else {\n            jointStart = lastPoint\n          }\n          const mouseDistFromLastPoint = Math.sqrt(\n            (lastPoint.x - x) ** 2 + (lastPoint.y - y) ** 2\n          )\n          if (mouseDistFromLastPoint > 0.002) {\n            // The user is drawing has drawn the width for the last point\n            const newPoints = [...expandingLine.points]\n            for (let i = 0; i < newPoints.length - 1; i++) {\n              if (newPoints[i].width) continue\n              newPoints[i] = {\n                ...newPoints[i],\n                width: lastPoint.width,\n              }\n            }\n            newExpandingLine = setIn(\n              expandingLine,\n              [\"points\"],\n              fixTwisted(newPoints)\n            )\n          } else {\n            return state\n          }\n          return setIn(\n            state,\n            [...pathToActiveImage, \"regions\", regionIndex],\n            newExpandingLine\n          )\n        }\n        default:\n          return state\n      }\n    }\n\n    case \"UPDATE_IMAGE_CANVAS\": {\n      return setNewImage(\n        state.images[action.payload.position],\n        action.payload.position\n      )\n    }\n\n    case \"OPEN_REGION_EDITOR\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const newRegions = setIn(\n        activeImage.regions.map((r) => ({\n          ...r,\n          highlighted: false,\n          editingLabels: false,\n        })),\n        [regionIndex],\n        {\n          ...(activeImage.regions || [])[regionIndex],\n          highlighted: true,\n          editingLabels: true,\n        }\n      )\n      return setIn(state, [...pathToActiveImage, \"regions\"], newRegions)\n    }\n    case \"CLOSE_REGION_EDITOR\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      return setIn(state, [...pathToActiveImage, \"regions\", regionIndex], {\n        ...(activeImage.regions || [])[regionIndex],\n        editingLabels: false,\n      })\n    }\n      \n    case 'CLICK_LABEL': {\n      const label = state.images[currentImageIndex].label;\n      console.log(\"Label\", label);\n      return setIn(\n        state,\n        [\"images\", currentImageIndex, \"label\"],\n        !label\n      )\n    }\n    case \"DELETE_REGION\": {\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const region = action.region;\n\n\n      state =  setIn(\n        state,\n        [...pathToActiveImage, \"regions\"],\n        (activeImage.regions || []).filter((r) => r.id !== action.region.id)\n      )\n\n      let historyCacheForActiveImage = getIn(state, ['historyCache', activeImage.name]);\n      if (historyCacheForActiveImage) {\n        historyCacheForActiveImage = Immutable.asMutable(historyCacheForActiveImage);\n        historyCacheForActiveImage.push(region)\n      } else {\n        historyCacheForActiveImage = [];\n        historyCacheForActiveImage.push(region)\n      }\n      return setIn(state, ['historyCache', activeImage.name], historyCacheForActiveImage);\n\n    }\n    case \"DELETE_SELECTED_REGION\": {\n      return setIn(\n        state,\n        [...pathToActiveImage, \"regions\"],\n        (activeImage.regions || []).filter((r) => !r.highlighted)\n      )\n    }\n    case \"FOOTER_BUTTON_CLICKED\": {\n      const buttonName = action.buttonName.toLowerCase()\n      switch (buttonName) {\n        case \"undo\": {\n          \n          // console.log(\"Original State: \", state);\n          // Check if current image has active regions to undo\n          if (activeImage.regions && activeImage.regions.length > 0) {\n\n            // get last region inserted to active image\n           let lastRegionAddedToActiveImage = getIn(state,\n            [...pathToActiveImage, \"regions\",activeImage.regions.length - 1])\n         \n\n            //Remove last region inserted to active image\n            state = \n            setIn(state,[...pathToActiveImage, \"regions\"], activeImage.regions.filter((element, index) => index < activeImage.regions.length - 1)) \n            \n             // Cache last active image region to historyCache\n            let historyCacheForActiveImage = getIn(state, ['historyCache', activeImage.name]);\n            if (historyCacheForActiveImage) {\n              historyCacheForActiveImage = Immutable.asMutable(historyCacheForActiveImage);\n              historyCacheForActiveImage.push(lastRegionAddedToActiveImage)\n            } else {\n              historyCacheForActiveImage = [];\n              historyCacheForActiveImage.push(lastRegionAddedToActiveImage)\n            }\n            state =  setIn(state, ['historyCache', activeImage.name], historyCacheForActiveImage);\n        \n          }\n          return state;\n        }\n        case \"redo\": {\n\n          // Check if we have regions in cache  to redo\n          if (state.historyCache && state.historyCache[activeImage.name] && state.historyCache[activeImage.name].length > 0) {\n            \n            // get last item inserted to history cache\n            // let lastRegionAddedToCache = getIn(state,\n            //   [\"historyCache\", state.historyCache.length - 1]);\n            let lastRegionAddedToCache = state.historyCache[activeImage.name][state.historyCache[activeImage.name].length - 1];\n\n            // remove last item from history cache.\n            state = \n              setIn(state, ['historyCache', activeImage.name], state.historyCache[activeImage.name].filter((element, index) => index < state.historyCache[activeImage.name].length - 1))\n\n\n            // console.log(\"lastRegionAddedToCache\", lastRegionAddedToCache)\n            // redo active image regions with last item popped from history cache\n            state = \n            setIn(state,[...pathToActiveImage, \"regions\",activeImage.regions.length],  lastRegionAddedToCache)\n            // return state.historyCache[0];\n            // console.log(\"After redoing regions \", state);\n           \n          }\n          return state;\n          \n        }\n        case 'reset': {\n          // console.log('Before reset: ', state);\n          if (activeImage.regions && activeImage.regions.length > 0) {\n            let historyCacheForActiveImage = getIn(state, ['historyCache', activeImage.name]);\n            if (historyCacheForActiveImage && historyCacheForActiveImage.length > 0) {\n             // clear history cache for current image.\n            state = \n              setIn(state,['historyCache',activeImage.name], [])\n            }\n            state = \n              setIn(state,['historyCache',activeImage.name], activeImage.regions)\n\n            state = \n              setIn(state,\n                [...pathToActiveImage, \"regions\"],\n                [])\n          }\n          \n            // state = setIn(state.history[state.history.length - 1].state, ['history'], []);\n            // console.log(\"After reset\", state);\n          \n      \n          return state;\n        }\n        case \"prev\": {\n          if (currentImageIndex === null) return state\n          if (currentImageIndex === 0) return state\n          return setNewImage(\n            state.images[currentImageIndex - 1],\n            currentImageIndex - 1\n          )\n        }\n        case \"next\": {\n          if (currentImageIndex === null) return state\n          if (currentImageIndex === state.images.length - 1) return state\n          return setNewImage(\n            state.images[currentImageIndex + 1],\n            currentImageIndex + 1\n          )\n        }\n\n        case \"save\": {\n          return state\n        }\n\n        case 'nolabel': {\n          const label = state.images[currentImageIndex].label;\n      return setIn(\n        state,\n        [\"images\", currentImageIndex, \"label\"],\n        !label\n      )\n        }\n        \n        case \"clone\": {\n          if (currentImageIndex === null) return state\n          if (currentImageIndex === state.images.length - 1) return state\n          return setIn(\n            setNewImage(\n              state.images[currentImageIndex + 1],\n              currentImageIndex + 1\n            ),\n            [\"images\", currentImageIndex + 1, \"regions\"],\n            activeImage.regions\n          )\n        }\n        case \"settings\": {\n          return setIn(state, [\"settingsOpen\"], !state.settingsOpen)\n        }\n        case \"help\": {\n          return state\n        }\n        case \"fullscreen\": {\n          return setIn(state, [\"fullScreen\"], true)\n        }\n        case \"exit fullscreen\":\n        case \"window\": {\n          return setIn(state, [\"fullScreen\"], false)\n        }\n        case \"hotkeys\": {\n          return state\n        }\n        case \"exit\":\n        case \"done\": {\n          return state\n        }\n        default:\n          return state\n      }\n      break;\n    }\n   \n    case \"UPDATE_FILTER\": {\n        \n      // return setIn(state, [\"zoomOut\"], !state.zoomOut)\n      // console.log('Action:',action.payload.value);\n      let filter = getIn( state,\n        [...pathToActiveImage, \"filter\"])\n        if(!filter){\n          filter = {};\n          // filter['brightness'] = action.payload.value;\n       }\n      //  console.log('Payliad: ',filter);\n\n      const newState =  setIn(\n        state,\n        [...pathToActiveImage, \"filter\"],\n        {...filter,[action.payload.name]: action.payload.value}\n      )\n\n      return newState;\n        \n    }\n    case \"SELECT_TOOL\": {\n      // console.log(\"Action,\", action);\n      if(action.selectedTool === 'inverse') {\n       let filter = getIn( state,\n        [...pathToActiveImage, \"filter\"])\n       if(!filter){\n         filter = {};\n         filter.inverse = 0;\n       }\n      return  setIn(\n        state,\n        [...pathToActiveImage, \"filter\"],\n        {...filter,inverse: filter.inverse == 0 ? 100:0}\n      )      \n      }\n    \n       if (action.selectedTool === \"zoom-in\") {\n        return setIn(state, [\"zoomOut\"], !state.zoomOut)\n      }\n      if (action.selectedTool === \"modify-allowed-area\" && !state.allowedArea) {\n        state = setIn(state, [\"allowedArea\"], { x: 0, y: 0, w: 1, h: 1 })\n      }\n      state = setIn(state, [\"mode\"], null)\n      return setIn(state, [\"selectedTool\"], action.selectedTool)\n    }\n    case \"CANCEL\": {\n      const { mode } = state\n      if (mode) {\n        switch (mode.mode) {\n          case \"DRAW_EXPANDING_LINE\":\n          case \"SET_EXPANDING_LINE_WIDTH\":\n          case \"DRAW_POLYGON\": {\n            const { regionId } = mode\n            return modifyRegion(regionId, null)\n          }\n          case \"MOVE_POLYGON_POINT\":\n          case \"RESIZE_BOX\":\n          case \"MOVE_REGION\": {\n            return setIn(state, [\"mode\"], null)\n          }\n          default:\n            return state\n        }\n      }\n      // Close any open boxes\n      const regions: any = activeImage.regions\n      if (regions && regions.some((r) => r.editingLabels)) {\n        return setIn(\n          state,\n          [...pathToActiveImage, \"regions\"],\n          regions.map((r) => ({\n            ...r,\n            editingLabels: false,\n          }))\n        )\n      } else if (regions) {\n        return setIn(\n          state,\n          [...pathToActiveImage, \"regions\"],\n          regions.map((r) => ({\n            ...r,\n            highlighted: false,\n          }))\n        )\n      }\n      break\n    }\n    default:\n      break\n  }\n  return state\n}\n\n\nexport default generalReducer;","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/ImageCanvas/use-project-box.js",["358"],"// @flow weak\nimport useEventCallback from \"use-event-callback\"\nimport { getEnclosingBox } from \"./region-tools.js\"\n\nexport default ({ layoutParams, mat }) => {\n  return useEventCallback((r) => {\n    const { iw, ih } = layoutParams.current\n    const bbox = getEnclosingBox(r)\n    const margin = r.type === \"point\" ? 15 : 2\n    const cbox = {\n      x: bbox.x * iw - margin,\n      y: bbox.y * ih - margin,\n      w: bbox.w * iw + margin * 2,\n      h: bbox.h * ih + margin * 2,\n    }\n    const pbox = {\n      ...mat.clone().inverse().applyToPoint(cbox.x, cbox.y),\n      w: cbox.w / mat.a,\n      h: cbox.h / mat.d,\n    }\n    return pbox\n  })\n}\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/PreventScrollToParents/index.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionTags/index.js",["359","360"],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/VideoOrImageCanvasBackground/index.js",["361","362","363","364"],"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/SidebarBox/index.js",["365","366","367","368"],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionLabel/styles.js",["369"],"// @flow\n\nimport { grey } from \"@material-ui/core/colors\"\n\nexport default {\n  regionInfo: {\n    fontSize: 12,\n    cursor: \"default\",\n    transition: \"opacity 200ms\",\n    opacity: 0.5,\n    \"&:hover\": {\n      opacity: 0.9,\n      cursor: \"pointer\",\n    },\n    \"&.highlighted\": {\n      opacity: 0.9,\n      \"&:hover\": {\n        opacity: 1,\n      },\n    },\n    // pointerEvents: \"none\",\n    fontWeight: 600,\n    color: grey[900],\n    padding: 8,\n    \"& .name\": {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      \"& .circle\": {\n        marginRight: 4,\n        boxShadow: \"0px 0px 2px rgba(0,0,0,0.4)\",\n        width: 10,\n        height: 10,\n        borderRadius: 5,\n      },\n    },\n    \"& .tags\": {\n      \"& .tag\": {\n        color: grey[700],\n        display: \"inline-block\",\n        margin: 1,\n        fontSize: 10,\n        textDecoration: \"underline\",\n      },\n    },\n  },\n}\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/HighlightBox/index.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/combine-reducers.js",["370"],"export default (...reducers) => (state, action) => {\n  for (const reducer of reducers) {\n    state = reducer(state, action)\n  }\n  return state\n}\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/TagsSidebarBox/index.js",["371"],"// @flow\n\nimport React, { useMemo, memo } from \"react\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport StyleIcon from \"@material-ui/icons/Style\"\nimport { grey } from \"@material-ui/core/colors\"\nimport Select from \"react-select\"\nimport useEventCallback from \"use-event-callback\"\nimport { asMutable } from \"seamless-immutable\"\n\nconst useStyles = makeStyles({})\n\ntype Props = {\n  tags: Array<string>,\n  currentImage: { cls?: string, tags?: Array<string> },\n  imageClsList?: Array<string>,\n  imageTagList?: Array<string>,\n  onChangeImage: (Array<string>) => any,\n}\n\nconst emptyArr = []\nconst noop = () => null\n\nexport const TagsSidebarBox = ({\n  currentImage,\n  imageClsList = emptyArr,\n  imageTagList = emptyArr,\n  onChangeImage = noop,\n}: Props) => {\n  const { tags = [], cls = null } = currentImage || {}\n  const onChangeClassification = useEventCallback((o) =>\n    onChangeImage({ cls: o.value })\n  )\n  const onChangeTags = useEventCallback((o) =>\n    onChangeImage({ tags: o.map((a) => a.value) })\n  )\n  const selectValue = useMemo(() => (cls ? { value: cls, label: cls } : null), [\n    cls,\n  ])\n  const memoImgClsList = useMemo(\n    () => asMutable(imageClsList.map((c) => ({ value: c, label: c }))),\n    [imageClsList]\n  )\n  const memoImgTagList = useMemo(\n    () => asMutable(imageTagList.map((c) => ({ value: c, label: c }))),\n    [imageTagList]\n  )\n  const memoCurrentTags = useMemo(\n    () => tags.map((r) => ({ value: r, label: r })),\n    [tags]\n  )\n\n  if (!currentImage) return null\n\n  return (\n    <SidebarBoxContainer\n      title=\"Image Tags\"\n      expandedByDefault\n      noScroll\n      icon={<StyleIcon style={{ color: grey[700] }} />}\n    >\n      {imageClsList.length > 0 && (\n        <div style={{ padding: 8 }}>\n          <Select\n            placeholder=\"Image Classification\"\n            onChange={onChangeClassification}\n            value={selectValue}\n            options={memoImgClsList}\n          />\n        </div>\n      )}\n      {imageTagList.length > 0 && (\n        <div style={{ padding: 8, paddingTop: 0 }}>\n          <Select\n            isMulti\n            placeholder=\"Image Tags\"\n            onChange={onChangeTags}\n            value={memoCurrentTags}\n            options={memoImgTagList}\n          />\n        </div>\n      )}\n    </SidebarBoxContainer>\n  )\n}\n\nexport default memo(\n  TagsSidebarBox,\n  (prevProps, nextProps) =>\n    prevProps.currentImage.cls === nextProps.currentImage.cls &&\n    prevProps.currentImage.tags === nextProps.currentImage.tags &&\n    prevProps.imageClsList === nextProps.imageClsList &&\n    prevProps.imageTagList === nextProps.imageTagList\n)\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionSelectorSidebarBox/styles.js",["372","373","374"],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/fix-twisted.js",["375"],"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/icon-dictionary.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/hooks/use-exclude-pattern.js",["376"],"// @flow weak\n\nimport { useRef } from \"react\"\nimport excludePatternSrc from \"./xpattern.js\"\n\nexport default () => {\n  const excludePattern = useRef(null)\n  if (excludePattern.current === null) {\n    excludePattern.current = {\n      image: new Image(),\n      pattern: null,\n    }\n    const canvas = document.createElement(\"canvas\")\n    canvas.width = 100\n    canvas.height = 100\n    const context = canvas.getContext(\"2d\")\n\n    excludePattern.current.image.onload = () => {\n      excludePattern.current.pattern = context.createPattern(\n        excludePattern.current.image,\n        \"repeat\"\n      )\n    }\n    excludePattern.current.image.src = excludePatternSrc\n  }\n  return excludePattern.current.pattern\n}\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/PointDistances/index.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionSelectAndTransformBoxes/index.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/hooks/xpattern.js",["377"],"export default `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4wMSAxY5oG+lzgAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAcSURBVAjXY/jPwPCfAQnA+TAGugLcAhhakRUAAK3lEe8m9qZhAAAAAElFTkSuQmCC`\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/utils/get-landmarks-with-transform.js",["378"],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/image-reducer.js",["379","380","381","382"],"// @flow\n\nimport type {\n  MainLayoutImageAnnotationState,\n  Action,\n} from \"../../MainLayout/types\"\nimport { setIn } from \"seamless-immutable\"\nimport getActiveImage from \"./get-active-image\"\n\nexport default (state: MainLayoutImageAnnotationState, action: Action) => {\n  const { currentImageIndex, pathToActiveImage, activeImage } = getActiveImage(\n    state\n  )\n\n  switch (action.type) {\n    case \"IMAGE_OR_VIDEO_LOADED\": {\n      return setIn(state, [\"images\", currentImageIndex, \"pixelSize\"], {\n        w: action.metadata.naturalWidth,\n        h: action.metadata.naturalHeight,\n      })\n    }\n  }\n  return state\n}\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/DebugSidebarBox/index.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionSelectorSidebarBox/index.js",["383","384"],"// @flow\n\nimport React, { Fragment, useState, memo } from \"react\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport { makeStyles, styled } from \"@material-ui/core/styles\"\nimport { grey } from \"@material-ui/core/colors\"\nimport RegionIcon from \"@material-ui/icons/PictureInPicture\"\nimport Grid from \"@material-ui/core/Grid\"\nimport ReorderIcon from \"@material-ui/icons/SwapVert\"\nimport PieChartIcon from \"@material-ui/icons/PieChart\"\nimport TrashIcon from \"@material-ui/icons/Delete\"\nimport LockIcon from \"@material-ui/icons/Lock\"\nimport UnlockIcon from \"@material-ui/icons/LockOpen\"\nimport VisibleIcon from \"@material-ui/icons/Visibility\"\nimport VisibleOffIcon from \"@material-ui/icons/VisibilityOff\"\nimport styles from \"./styles\"\nimport classnames from \"classnames\"\nimport isEqual from \"lodash/isEqual\"\n\nconst useStyles = makeStyles(styles)\n\nconst HeaderSep = styled(\"div\")({\n  borderTop: `1px solid ${grey[200]}`,\n  marginTop: 2,\n  marginBottom: 2,\n})\n\nconst Chip = ({ color, text }) => {\n  const classes = useStyles()\n  return (\n    <span className={classes.chip}>\n      <div className=\"color\" style={{ backgroundColor: color }} />\n      <div className=\"text\">{text}</div>\n    </span>\n  )\n}\n\nconst RowLayout = ({\n  header,\n  highlighted,\n  order,\n  classification,\n  area,\n  tags,\n  trash,\n  lock,\n  visible,\n  onClick,\n}) => {\n  const classes = useStyles()\n  const [mouseOver, changeMouseOver] = useState(false)\n  return (\n    <div\n      onClick={onClick}\n      onMouseEnter={() => changeMouseOver(true)}\n      onMouseLeave={() => changeMouseOver(false)}\n      className={classnames(classes.row, { header, highlighted })}\n    >\n      <Grid container alignItems=\"center\">\n        <Grid item xs={2}>\n          <div style={{ textAlign: \"right\", paddingRight: 10 }}>{order}</div>\n        </Grid>\n        <Grid item xs={5}>\n          {classification}\n        </Grid>\n        <Grid item xs={2}>\n          <div style={{ textAlign: \"right\", paddingRight: 6 }}>{area}</div>\n        </Grid>\n        <Grid item xs={1}>\n          {trash}\n        </Grid>\n        <Grid item xs={1}>\n          {lock}\n        </Grid>\n        <Grid item xs={1}>\n          {visible}\n        </Grid>\n      </Grid>\n    </div>\n  )\n}\n\nconst RowHeader = () => {\n  return (\n    <RowLayout\n      header\n      highlighted={false}\n      order={<ReorderIcon className=\"icon\" />}\n      classification={<div style={{ paddingLeft: 10 }}>Class</div>}\n      area={<PieChartIcon className=\"icon\" />}\n      trash={<TrashIcon className=\"icon\" />}\n      lock={<LockIcon className=\"icon\" />}\n      visible={<VisibleIcon className=\"icon\" />}\n    />\n  )\n}\n\nconst MemoRowHeader = memo(RowHeader)\n\nconst Row = ({\n  region: r,\n  highlighted,\n  onSelectRegion,\n  onDeleteRegion,\n  onChangeRegion,\n  visible,\n  locked,\n  color,\n  cls,\n  index,\n}) => {\n  return (\n    <RowLayout\n      header={false}\n      highlighted={highlighted}\n      onClick={() => onSelectRegion(r)}\n      order={`#${index + 1}`}\n      classification={<Chip text={cls || \"\"} color={color || \"#ddd\"} />}\n      area=\"\"\n      trash={<TrashIcon onClick={() => onDeleteRegion(r)} className=\"icon2\" />}\n      lock={\n        r.locked ? (\n          <LockIcon\n            onClick={() => onChangeRegion({ ...r, locked: false })}\n            className=\"icon2\"\n          />\n        ) : (\n          <UnlockIcon\n            onClick={() => onChangeRegion({ ...r, locked: true })}\n            className=\"icon2\"\n          />\n        )\n      }\n      visible={\n        r.visible || r.visible === undefined ? (\n          <VisibleIcon\n            onClick={() => onChangeRegion({ ...r, visible: false })}\n            className=\"icon2\"\n          />\n        ) : (\n          <VisibleOffIcon\n            onClick={() => onChangeRegion({ ...r, visible: true })}\n            className=\"icon2\"\n          />\n        )\n      }\n    />\n  )\n}\n\nconst MemoRow = memo(\n  Row,\n  (prevProps, nextProps) =>\n    prevProps.highlighted === nextProps.highlighted &&\n    prevProps.visible === nextProps.visible &&\n    prevProps.locked === nextProps.locked &&\n    prevProps.id === nextProps.id &&\n    prevProps.index === nextProps.index &&\n    prevProps.cls === nextProps.cls &&\n    prevProps.color === nextProps.color\n)\n\nconst emptyArr = []\n\nexport const RegionSelectorSidebarBox = ({\n  regions = emptyArr,\n  onDeleteRegion,\n  onChangeRegion,\n  onSelectRegion,\n}) => {\n  const classes = useStyles()\n  return (\n    <SidebarBoxContainer\n      title=\"Regions\"\n      subTitle=\"\"\n      icon={<RegionIcon style={{ color: grey[700] }} />}\n      expandedByDefault\n    >\n      <div className={classes.container}>\n        <MemoRowHeader />\n        <HeaderSep />\n        {regions.map((r, i) => (\n          <MemoRow\n            key={r.id}\n            {...r}\n            region={r}\n            index={i}\n            onSelectRegion={onSelectRegion}\n            onDeleteRegion={onDeleteRegion}\n            onChangeRegion={onChangeRegion}\n          />\n        ))}\n      </div>\n    </SidebarBoxContainer>\n  )\n}\n\nconst mapUsedRegionProperties = (r) => [\n  r.id,\n  r.color,\n  r.locked,\n  r.visible,\n  r.highlighted,\n]\n\nexport default memo(RegionSelectorSidebarBox, (prevProps, nextProps) =>\n  isEqual(\n    (prevProps.regions || emptyArr).map(mapUsedRegionProperties),\n    (nextProps.regions || emptyArr).map(mapUsedRegionProperties)\n  )\n)\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/KeyframeTimeline/get-time-string.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/colors.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/SidebarBoxContainer/index.js",["385","386","387","388","389","390"],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/ImageCanvas/region-tools.js",["391","392"],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/ImageCanvas/use-mouse.js",["393"],"// @flow weak\n\nimport { useRef } from \"react\"\nimport { Matrix } from \"transformation-matrix-js\"\n\nconst getDefaultMat = () => Matrix.from(1, 0, 0, 1, -10, -10)\n\nexport default ({\n  canvasEl,\n  changeMat,\n  changeDragging,\n  zoomStart,\n  zoomEnd,\n  changeZoomStart,\n  changeZoomEnd,\n  layoutParams,\n  zoomWithPrimary,\n  dragWithPrimary,\n  mat,\n  onMouseMove,\n  onMouseUp,\n  onMouseDown,\n  dragging,\n}) => {\n  const mousePosition = useRef({ x: 0, y: 0 })\n  const prevMousePosition = useRef({ x: 0, y: 0 })\n\n  const zoomIn = (direction, point) => {\n    const [mx, my] = [point.x, point.y]\n    let scale =\n      typeof direction === \"object\" ? direction.to / mat.a : 1 + 0.2 * direction\n\n    // NOTE: We're mutating mat here\n    mat.translate(mx, my).scaleU(scale)\n    if (mat.a > 2) mat.scaleU(2 / mat.a)\n    if (mat.a < 0.05) mat.scaleU(0.05 / mat.a)\n    mat.translate(-mx, -my)\n\n    changeMat(mat.clone())\n  }\n\n  const mouseEvents = {\n    onMouseMove: (e) => {\n      const { left, top } = canvasEl.current.getBoundingClientRect()\n      prevMousePosition.current.x = mousePosition.current.x\n      prevMousePosition.current.y = mousePosition.current.y\n      mousePosition.current.x = e.clientX - left\n      mousePosition.current.y = e.clientY - top\n\n      const projMouse = mat.applyToPoint(\n        mousePosition.current.x,\n        mousePosition.current.y\n      )\n\n      if (zoomWithPrimary && zoomStart) {\n        changeZoomEnd(projMouse)\n      }\n\n      const { iw, ih } = layoutParams.current\n      onMouseMove({ x: projMouse.x / iw, y: projMouse.y / ih })\n\n      if (dragging) {\n        mat.translate(\n          prevMousePosition.current.x - mousePosition.current.x,\n          prevMousePosition.current.y - mousePosition.current.y\n        )\n\n        changeMat(mat.clone())\n      }\n      e.preventDefault()\n    },\n    onMouseDown: (e, specialEvent = {}) => {\n      e.preventDefault()\n\n      if (\n        e.button === 1 ||\n        e.button === 2 ||\n        (e.button === 0 && dragWithPrimary)\n      )\n        return changeDragging(true)\n\n      const projMouse = mat.applyToPoint(\n        mousePosition.current.x,\n        mousePosition.current.y\n      )\n      if (zoomWithPrimary && e.button === 0) {\n        changeZoomStart(projMouse)\n        changeZoomEnd(projMouse)\n        return\n      }\n      if (e.button === 0) {\n        if (specialEvent.type === \"resize-box\") {\n          // onResizeBox()\n        }\n        if (specialEvent.type === \"move-region\") {\n          // onResizeBox()\n        }\n        const { iw, ih } = layoutParams.current\n        onMouseDown({ x: projMouse.x / iw, y: projMouse.y / ih })\n      }\n    },\n    onMouseUp: (e) => {\n      e.preventDefault()\n      const projMouse = mat.applyToPoint(\n        mousePosition.current.x,\n        mousePosition.current.y\n      )\n      if (zoomStart) {\n        const zoomEnd = projMouse\n        if (\n          Math.abs(zoomStart.x - zoomEnd.x) < 10 &&\n          Math.abs(zoomStart.y - zoomEnd.y) < 10\n        ) {\n          if (mat.a < 1) {\n            zoomIn({ to: 1 }, mousePosition.current)\n          } else {\n            zoomIn({ to: 0.25 }, mousePosition.current)\n          }\n        } else {\n          const { iw, ih } = layoutParams.current\n\n          if (zoomStart.x > zoomEnd.x) {\n            ;[zoomStart.x, zoomEnd.x] = [zoomEnd.x, zoomStart.x]\n          }\n          if (zoomStart.y > zoomEnd.y) {\n            ;[zoomStart.y, zoomEnd.y] = [zoomEnd.y, zoomStart.y]\n          }\n\n          // The region defined by zoomStart and zoomEnd should be the new transform\n          let scale = Math.min(\n            (zoomEnd.x - zoomStart.x) / iw,\n            (zoomEnd.y - zoomStart.y) / ih\n          )\n          if (scale < 0.05) scale = 0.05\n          if (scale > 10) scale = 10\n\n          const newMat = getDefaultMat()\n            .translate(zoomStart.x, zoomStart.y)\n            .scaleU(scale)\n\n          changeMat(newMat.clone())\n        }\n\n        changeZoomStart(null)\n        changeZoomEnd(null)\n      }\n      if (\n        e.button === 1 ||\n        e.button === 2 ||\n        (e.button === 0 && dragWithPrimary)\n      )\n        return changeDragging(false)\n      if (e.button === 0) {\n        const { iw, ih } = layoutParams.current\n        onMouseUp({ x: projMouse.x / iw, y: projMouse.y / ih })\n      }\n    },\n    onWheel: (e, position) => {\n\n      const direction = e.deltaY > 0 ? 1 : e.deltaY < 0 ? -1 : 0\n      zoomIn(direction, position || prevMousePosition.current)\n      // e.preventDefault()\n\n    },\n    onContextMenu: (e) => {\n      e.preventDefault()\n    },\n  }\n  return { mouseEvents, mousePosition,zoomIn }\n}\n","/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionLabel/index.js",["394","395","396"],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/Annotator/reducers/history-handler.js",["397","398"],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/MainLayout/icon-dictionary.js",[],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/ImageCanvas/index.js",["399","400","401","402","403","404","405","406"],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/ImageCanvas/use-wasd-mode.js",["407","408"],"/Users/shahn/dev/annotator/custom_annotator/src/Annotator/src/RegionShapes/index.js",["409","410"],"/Users/shahn/dev/annotator/custom_annotator/src/Workspace/src/icon-mapping.js",[],{"ruleId":"411","severity":1,"message":"412","line":16,"column":7,"nodeType":"413","messageId":"414","endLine":16,"endColumn":15},{"ruleId":"411","severity":1,"message":"415","line":21,"column":7,"nodeType":"413","messageId":"414","endLine":21,"endColumn":14},{"ruleId":"411","severity":1,"message":"416","line":38,"column":7,"nodeType":"413","messageId":"414","endLine":38,"endColumn":20},{"ruleId":"417","severity":1,"message":"418","line":48,"column":3,"nodeType":"419","messageId":"420","endLine":58,"endColumn":4},{"ruleId":"411","severity":1,"message":"421","line":63,"column":9,"nodeType":"413","messageId":"414","endLine":63,"endColumn":26},{"ruleId":"422","replacedBy":"423"},{"ruleId":"424","replacedBy":"425"},{"ruleId":"411","severity":1,"message":"426","line":1,"column":16,"nodeType":"413","messageId":"414","endLine":1,"endColumn":20},{"ruleId":"411","severity":1,"message":"427","line":1,"column":22,"nodeType":"413","messageId":"414","endLine":1,"endColumn":28},{"ruleId":"411","severity":1,"message":"428","line":1,"column":30,"nodeType":"413","messageId":"414","endLine":1,"endColumn":36},{"ruleId":"429","severity":1,"message":"430","line":3,"column":1,"nodeType":"431","endLine":57,"endColumn":2},{"ruleId":"422","replacedBy":"432"},{"ruleId":"424","replacedBy":"433"},{"ruleId":"411","severity":1,"message":"434","line":2,"column":8,"nodeType":"413","messageId":"414","endLine":2,"endColumn":18},{"ruleId":"411","severity":1,"message":"435","line":3,"column":8,"nodeType":"413","messageId":"414","endLine":3,"endColumn":18},{"ruleId":"411","severity":1,"message":"436","line":4,"column":8,"nodeType":"413","messageId":"414","endLine":4,"endColumn":20},{"ruleId":"411","severity":1,"message":"437","line":5,"column":10,"nodeType":"413","messageId":"414","endLine":5,"endColumn":14},{"ruleId":"411","severity":1,"message":"438","line":7,"column":8,"nodeType":"413","messageId":"414","endLine":7,"endColumn":18},{"ruleId":"411","severity":1,"message":"439","line":10,"column":8,"nodeType":"413","messageId":"414","endLine":10,"endColumn":20},{"ruleId":"411","severity":1,"message":"440","line":20,"column":7,"nodeType":"413","messageId":"414","endLine":20,"endColumn":13},{"ruleId":"411","severity":1,"message":"441","line":48,"column":10,"nodeType":"413","messageId":"414","endLine":48,"endColumn":19},{"ruleId":"411","severity":1,"message":"442","line":92,"column":7,"nodeType":"413","messageId":"414","endLine":92,"endColumn":20},{"ruleId":"411","severity":1,"message":"443","line":180,"column":7,"nodeType":"413","messageId":"414","endLine":180,"endColumn":16},{"ruleId":"411","severity":1,"message":"444","line":196,"column":7,"nodeType":"413","messageId":"414","endLine":196,"endColumn":25},{"ruleId":"411","severity":1,"message":"445","line":205,"column":7,"nodeType":"413","messageId":"414","endLine":205,"endColumn":14},{"ruleId":"411","severity":1,"message":"446","line":228,"column":20,"nodeType":"413","messageId":"414","endLine":228,"endColumn":34},{"ruleId":"411","severity":1,"message":"447","line":241,"column":9,"nodeType":"413","messageId":"414","endLine":241,"endColumn":23},{"ruleId":"448","severity":1,"message":"449","line":248,"column":13,"nodeType":"450","messageId":"451","endLine":248,"endColumn":48},{"ruleId":"422","replacedBy":"452"},{"ruleId":"424","replacedBy":"453"},{"ruleId":"411","severity":1,"message":"437","line":3,"column":10,"nodeType":"413","messageId":"414","endLine":3,"endColumn":14},{"ruleId":"422","replacedBy":"454"},{"ruleId":"424","replacedBy":"455"},{"ruleId":"411","severity":1,"message":"434","line":2,"column":8,"nodeType":"413","messageId":"414","endLine":2,"endColumn":18},{"ruleId":"411","severity":1,"message":"435","line":3,"column":8,"nodeType":"413","messageId":"414","endLine":3,"endColumn":18},{"ruleId":"411","severity":1,"message":"436","line":4,"column":8,"nodeType":"413","messageId":"414","endLine":4,"endColumn":20},{"ruleId":"411","severity":1,"message":"437","line":5,"column":10,"nodeType":"413","messageId":"414","endLine":5,"endColumn":14},{"ruleId":"411","severity":1,"message":"438","line":7,"column":8,"nodeType":"413","messageId":"414","endLine":7,"endColumn":18},{"ruleId":"411","severity":1,"message":"439","line":10,"column":8,"nodeType":"413","messageId":"414","endLine":10,"endColumn":20},{"ruleId":"411","severity":1,"message":"456","line":11,"column":8,"nodeType":"413","messageId":"414","endLine":11,"endColumn":17},{"ruleId":"411","severity":1,"message":"440","line":20,"column":7,"nodeType":"413","messageId":"414","endLine":20,"endColumn":13},{"ruleId":"411","severity":1,"message":"441","line":47,"column":10,"nodeType":"413","messageId":"414","endLine":47,"endColumn":19},{"ruleId":"411","severity":1,"message":"442","line":87,"column":7,"nodeType":"413","messageId":"414","endLine":87,"endColumn":20},{"ruleId":"411","severity":1,"message":"443","line":163,"column":7,"nodeType":"413","messageId":"414","endLine":163,"endColumn":16},{"ruleId":"411","severity":1,"message":"444","line":179,"column":7,"nodeType":"413","messageId":"414","endLine":179,"endColumn":25},{"ruleId":"411","severity":1,"message":"446","line":209,"column":20,"nodeType":"413","messageId":"414","endLine":209,"endColumn":34},{"ruleId":"411","severity":1,"message":"447","line":222,"column":9,"nodeType":"413","messageId":"414","endLine":222,"endColumn":23},{"ruleId":"411","severity":1,"message":"434","line":2,"column":8,"nodeType":"413","messageId":"414","endLine":2,"endColumn":18},{"ruleId":"411","severity":1,"message":"435","line":3,"column":8,"nodeType":"413","messageId":"414","endLine":3,"endColumn":18},{"ruleId":"411","severity":1,"message":"436","line":4,"column":8,"nodeType":"413","messageId":"414","endLine":4,"endColumn":20},{"ruleId":"411","severity":1,"message":"437","line":5,"column":10,"nodeType":"413","messageId":"414","endLine":5,"endColumn":14},{"ruleId":"411","severity":1,"message":"438","line":7,"column":8,"nodeType":"413","messageId":"414","endLine":7,"endColumn":18},{"ruleId":"411","severity":1,"message":"439","line":10,"column":8,"nodeType":"413","messageId":"414","endLine":10,"endColumn":20},{"ruleId":"411","severity":1,"message":"456","line":11,"column":8,"nodeType":"413","messageId":"414","endLine":11,"endColumn":17},{"ruleId":"411","severity":1,"message":"440","line":22,"column":7,"nodeType":"413","messageId":"414","endLine":22,"endColumn":13},{"ruleId":"411","severity":1,"message":"441","line":49,"column":10,"nodeType":"413","messageId":"414","endLine":49,"endColumn":19},{"ruleId":"411","severity":1,"message":"442","line":89,"column":7,"nodeType":"413","messageId":"414","endLine":89,"endColumn":20},{"ruleId":"411","severity":1,"message":"445","line":195,"column":7,"nodeType":"413","messageId":"414","endLine":195,"endColumn":14},{"ruleId":"411","severity":1,"message":"446","line":218,"column":20,"nodeType":"413","messageId":"414","endLine":218,"endColumn":34},{"ruleId":"411","severity":1,"message":"447","line":231,"column":9,"nodeType":"413","messageId":"414","endLine":231,"endColumn":23},{"ruleId":"422","replacedBy":"457"},{"ruleId":"424","replacedBy":"458"},{"ruleId":"411","severity":1,"message":"459","line":10,"column":8,"nodeType":"413","messageId":"414","endLine":10,"endColumn":18},{"ruleId":"411","severity":1,"message":"460","line":14,"column":10,"nodeType":"413","messageId":"414","endLine":14,"endColumn":20},{"ruleId":"411","severity":1,"message":"461","line":20,"column":8,"nodeType":"413","messageId":"414","endLine":20,"endColumn":24},{"ruleId":"411","severity":1,"message":"462","line":22,"column":8,"nodeType":"413","messageId":"414","endLine":22,"endColumn":16},{"ruleId":"411","severity":1,"message":"463","line":23,"column":8,"nodeType":"413","messageId":"414","endLine":23,"endColumn":22},{"ruleId":"411","severity":1,"message":"464","line":24,"column":8,"nodeType":"413","messageId":"414","endLine":24,"endColumn":25},{"ruleId":"411","severity":1,"message":"465","line":25,"column":8,"nodeType":"413","messageId":"414","endLine":25,"endColumn":23},{"ruleId":"411","severity":1,"message":"466","line":26,"column":8,"nodeType":"413","messageId":"414","endLine":26,"endColumn":22},{"ruleId":"411","severity":1,"message":"467","line":28,"column":8,"nodeType":"413","messageId":"414","endLine":28,"endColumn":25},{"ruleId":"411","severity":1,"message":"468","line":31,"column":7,"nodeType":"413","messageId":"414","endLine":31,"endColumn":15},{"ruleId":"411","severity":1,"message":"469","line":34,"column":7,"nodeType":"413","messageId":"414","endLine":34,"endColumn":16},{"ruleId":"411","severity":1,"message":"470","line":66,"column":9,"nodeType":"413","messageId":"414","endLine":66,"endColumn":16},{"ruleId":"411","severity":1,"message":"471","line":68,"column":9,"nodeType":"413","messageId":"414","endLine":68,"endColumn":25},{"ruleId":"472","severity":1,"message":"473","line":82,"column":66,"nodeType":"474","messageId":"475","endLine":82,"endColumn":67},{"ruleId":"411","severity":1,"message":"476","line":106,"column":9,"nodeType":"413","messageId":"414","endLine":106,"endColumn":22},{"ruleId":"411","severity":1,"message":"477","line":108,"column":9,"nodeType":"413","messageId":"414","endLine":108,"endColumn":23},{"ruleId":"411","severity":1,"message":"478","line":112,"column":9,"nodeType":"413","messageId":"414","endLine":112,"endColumn":28},{"ruleId":"411","severity":1,"message":"479","line":250,"column":9,"nodeType":"413","messageId":"414","endLine":250,"endColumn":20},{"ruleId":"411","severity":1,"message":"480","line":251,"column":9,"nodeType":"413","messageId":"414","endLine":251,"endColumn":28},{"ruleId":"411","severity":1,"message":"481","line":2,"column":10,"nodeType":"413","messageId":"414","endLine":2,"endColumn":20},{"ruleId":"411","severity":1,"message":"482","line":3,"column":8,"nodeType":"413","messageId":"414","endLine":3,"endColumn":14},{"ruleId":"483","severity":1,"message":"484","line":15,"column":19,"nodeType":"485","messageId":"486","endLine":15,"endColumn":21},{"ruleId":"483","severity":1,"message":"484","line":18,"column":19,"nodeType":"485","messageId":"486","endLine":18,"endColumn":21},{"ruleId":"483","severity":1,"message":"484","line":23,"column":19,"nodeType":"485","messageId":"486","endLine":23,"endColumn":21},{"ruleId":"483","severity":1,"message":"484","line":26,"column":19,"nodeType":"485","messageId":"486","endLine":26,"endColumn":21},{"ruleId":"483","severity":1,"message":"484","line":31,"column":19,"nodeType":"485","messageId":"486","endLine":31,"endColumn":21},{"ruleId":"483","severity":1,"message":"484","line":34,"column":19,"nodeType":"485","messageId":"486","endLine":34,"endColumn":21},{"ruleId":"411","severity":1,"message":"487","line":7,"column":3,"nodeType":"413","messageId":"414","endLine":7,"endColumn":11},{"ruleId":"411","severity":1,"message":"488","line":9,"column":3,"nodeType":"413","messageId":"414","endLine":9,"endColumn":7},{"ruleId":"489","severity":1,"message":"490","line":169,"column":6,"nodeType":"491","endLine":169,"endColumn":21,"suggestions":"492"},{"ruleId":"429","severity":1,"message":"493","line":11,"column":1,"nodeType":"431","endLine":83,"endColumn":2},{"ruleId":"494","severity":1,"message":"495","line":32,"column":5,"nodeType":"496","messageId":"497","endLine":39,"endColumn":6},{"ruleId":"417","severity":1,"message":"418","line":33,"column":7,"nodeType":"419","messageId":"420","endLine":38,"endColumn":8},{"ruleId":"494","severity":1,"message":"495","line":40,"column":5,"nodeType":"496","messageId":"497","endLine":42,"endColumn":6},{"ruleId":"429","severity":1,"message":"493","line":3,"column":1,"nodeType":"431","endLine":21,"endColumn":2},{"ruleId":"429","severity":1,"message":"430","line":3,"column":1,"nodeType":"431","endLine":26,"endColumn":2},{"ruleId":"411","severity":1,"message":"498","line":3,"column":17,"nodeType":"413","messageId":"414","endLine":3,"endColumn":25},{"ruleId":"411","severity":1,"message":"499","line":16,"column":8,"nodeType":"413","messageId":"414","endLine":16,"endColumn":11},{"ruleId":"411","severity":1,"message":"500","line":2,"column":32,"nodeType":"413","messageId":"414","endLine":2,"endColumn":38},{"ruleId":"411","severity":1,"message":"501","line":4,"column":34,"nodeType":"413","messageId":"414","endLine":4,"endColumn":42},{"ruleId":"411","severity":1,"message":"502","line":5,"column":8,"nodeType":"413","messageId":"414","endLine":5,"endColumn":14},{"ruleId":"411","severity":1,"message":"503","line":87,"column":9,"nodeType":"413","messageId":"414","endLine":87,"endColumn":24},{"ruleId":"411","severity":1,"message":"504","line":112,"column":11,"nodeType":"413","messageId":"414","endLine":112,"endColumn":14},{"ruleId":"411","severity":1,"message":"505","line":314,"column":15,"nodeType":"413","messageId":"414","endLine":314,"endColumn":26},{"ruleId":"506","severity":1,"message":"507","line":488,"column":11,"nodeType":"508","messageId":"509","endLine":488,"endColumn":23},{"ruleId":"411","severity":1,"message":"505","line":495,"column":19,"nodeType":"413","messageId":"414","endLine":495,"endColumn":30},{"ruleId":"411","severity":1,"message":"510","line":672,"column":50,"nodeType":"413","messageId":"414","endLine":672,"endColumn":61},{"ruleId":"494","severity":1,"message":"495","line":736,"column":9,"nodeType":"496","messageId":"497","endLine":736,"endColumn":28},{"ruleId":"411","severity":1,"message":"511","line":761,"column":13,"nodeType":"413","messageId":"414","endLine":761,"endColumn":23},{"ruleId":"411","severity":1,"message":"512","line":803,"column":15,"nodeType":"413","messageId":"414","endLine":803,"endColumn":21},{"ruleId":"411","severity":1,"message":"512","line":822,"column":15,"nodeType":"413","messageId":"414","endLine":822,"endColumn":21},{"ruleId":"506","severity":1,"message":"507","line":1017,"column":7,"nodeType":"513","messageId":"509","endLine":1017,"endColumn":13},{"ruleId":"483","severity":1,"message":"484","line":1053,"column":44,"nodeType":"485","messageId":"486","endLine":1053,"endColumn":46},{"ruleId":"429","severity":1,"message":"493","line":5,"column":1,"nodeType":"431","endLine":23,"endColumn":2},{"ruleId":"411","severity":1,"message":"514","line":37,"column":15,"nodeType":"413","messageId":"414","endLine":37,"endColumn":17},{"ruleId":"411","severity":1,"message":"515","line":37,"column":19,"nodeType":"413","messageId":"414","endLine":37,"endColumn":21},{"ruleId":"429","severity":1,"message":"493","line":32,"column":1,"nodeType":"431","endLine":171,"endColumn":2},{"ruleId":"489","severity":1,"message":"516","line":54,"column":6,"nodeType":"491","endLine":54,"endColumn":17,"suggestions":"517"},{"ruleId":"489","severity":1,"message":"518","line":90,"column":6,"nodeType":"491","endLine":90,"endColumn":20,"suggestions":"519"},{"ruleId":"489","severity":1,"message":"520","line":135,"column":6,"nodeType":"491","endLine":141,"endColumn":4,"suggestions":"521"},{"ruleId":"411","severity":1,"message":"435","line":6,"column":8,"nodeType":"413","messageId":"414","endLine":6,"endColumn":18},{"ruleId":"411","severity":1,"message":"522","line":7,"column":8,"nodeType":"413","messageId":"414","endLine":7,"endColumn":18},{"ruleId":"411","severity":1,"message":"523","line":8,"column":8,"nodeType":"413","messageId":"414","endLine":8,"endColumn":16},{"ruleId":"411","severity":1,"message":"446","line":78,"column":9,"nodeType":"413","messageId":"414","endLine":78,"endColumn":23},{"ruleId":"429","severity":1,"message":"430","line":5,"column":1,"nodeType":"431","endLine":47,"endColumn":2},{"ruleId":"429","severity":1,"message":"493","line":1,"column":1,"nodeType":"431","endLine":6,"endColumn":2},{"ruleId":"411","severity":1,"message":"524","line":12,"column":7,"nodeType":"413","messageId":"414","endLine":12,"endColumn":16},{"ruleId":"411","severity":1,"message":"427","line":1,"column":22,"nodeType":"413","messageId":"414","endLine":1,"endColumn":28},{"ruleId":"411","severity":1,"message":"428","line":1,"column":30,"nodeType":"413","messageId":"414","endLine":1,"endColumn":36},{"ruleId":"429","severity":1,"message":"430","line":3,"column":1,"nodeType":"431","endLine":54,"endColumn":2},{"ruleId":"429","severity":1,"message":"493","line":3,"column":1,"nodeType":"431","endLine":6,"endColumn":2},{"ruleId":"429","severity":1,"message":"493","line":6,"column":1,"nodeType":"431","endLine":27,"endColumn":2},{"ruleId":"429","severity":1,"message":"525","line":1,"column":1,"nodeType":"431","endLine":1,"endColumn":280},{"ruleId":"429","severity":1,"message":"493","line":12,"column":1,"nodeType":"431","endLine":23,"endColumn":2},{"ruleId":"429","severity":1,"message":"493","line":10,"column":1,"nodeType":"431","endLine":24,"endColumn":2},{"ruleId":"411","severity":1,"message":"526","line":11,"column":30,"nodeType":"413","messageId":"414","endLine":11,"endColumn":47},{"ruleId":"411","severity":1,"message":"527","line":11,"column":49,"nodeType":"413","messageId":"414","endLine":11,"endColumn":60},{"ruleId":"417","severity":1,"message":"418","line":15,"column":3,"nodeType":"419","messageId":"420","endLine":22,"endColumn":4},{"ruleId":"411","severity":1,"message":"528","line":3,"column":17,"nodeType":"413","messageId":"414","endLine":3,"endColumn":25},{"ruleId":"411","severity":1,"message":"441","line":51,"column":10,"nodeType":"413","messageId":"414","endLine":51,"endColumn":19},{"ruleId":"411","severity":1,"message":"435","line":6,"column":8,"nodeType":"413","messageId":"414","endLine":6,"endColumn":18},{"ruleId":"411","severity":1,"message":"522","line":7,"column":8,"nodeType":"413","messageId":"414","endLine":7,"endColumn":18},{"ruleId":"411","severity":1,"message":"523","line":8,"column":8,"nodeType":"413","messageId":"414","endLine":8,"endColumn":16},{"ruleId":"411","severity":1,"message":"529","line":70,"column":9,"nodeType":"413","messageId":"414","endLine":70,"endColumn":16},{"ruleId":"411","severity":1,"message":"446","line":79,"column":9,"nodeType":"413","messageId":"414","endLine":79,"endColumn":23},{"ruleId":"506","severity":1,"message":"507","line":87,"column":3,"nodeType":"508","messageId":"509","endLine":106,"endColumn":4},{"ruleId":"506","severity":1,"message":"507","line":145,"column":3,"nodeType":"530","messageId":"509","endLine":145,"endColumn":36},{"ruleId":"417","severity":1,"message":"418","line":149,"column":3,"nodeType":"419","messageId":"420","endLine":156,"endColumn":4},{"ruleId":"429","severity":1,"message":"493","line":8,"column":1,"nodeType":"431","endLine":170,"endColumn":2},{"ruleId":"411","severity":1,"message":"531","line":3,"column":17,"nodeType":"413","messageId":"414","endLine":3,"endColumn":25},{"ruleId":"411","severity":1,"message":"532","line":13,"column":8,"nodeType":"413","messageId":"414","endLine":13,"endColumn":16},{"ruleId":"483","severity":1,"message":"484","line":110,"column":41,"nodeType":"485","messageId":"486","endLine":110,"endColumn":43},{"ruleId":"411","severity":1,"message":"533","line":4,"column":27,"nodeType":"413","messageId":"414","endLine":4,"endColumn":36},{"ruleId":"429","severity":1,"message":"493","line":24,"column":1,"nodeType":"431","endLine":60,"endColumn":2},{"ruleId":"411","severity":1,"message":"534","line":19,"column":3,"nodeType":"413","messageId":"414","endLine":19,"endColumn":22},{"ruleId":"411","severity":1,"message":"535","line":30,"column":8,"nodeType":"413","messageId":"414","endLine":30,"endColumn":18},{"ruleId":"411","severity":1,"message":"536","line":152,"column":10,"nodeType":"413","messageId":"414","endLine":152,"endColumn":26},{"ruleId":"411","severity":1,"message":"537","line":152,"column":28,"nodeType":"413","messageId":"414","endLine":152,"endColumn":50},{"ruleId":"411","severity":1,"message":"538","line":156,"column":9,"nodeType":"413","messageId":"414","endLine":156,"endColumn":19},{"ruleId":"411","severity":1,"message":"539","line":162,"column":38,"nodeType":"413","messageId":"414","endLine":162,"endColumn":44},{"ruleId":"489","severity":1,"message":"540","line":181,"column":49,"nodeType":"491","endLine":181,"endColumn":61,"suggestions":"541"},{"ruleId":"411","severity":1,"message":"542","line":183,"column":9,"nodeType":"413","messageId":"414","endLine":183,"endColumn":22},{"ruleId":"429","severity":1,"message":"493","line":4,"column":1,"nodeType":"431","endLine":50,"endColumn":2},{"ruleId":"489","severity":1,"message":"543","line":49,"column":6,"nodeType":"491","endLine":49,"endColumn":16,"suggestions":"544"},{"ruleId":"411","severity":1,"message":"545","line":36,"column":11,"nodeType":"413","messageId":"414","endLine":36,"endColumn":20},{"ruleId":"489","severity":1,"message":"546","line":207,"column":5,"nodeType":"491","endLine":207,"endColumn":14,"suggestions":"547"},"no-unused-vars","'emptyObj' is assigned a value but never used.","Identifier","unusedVar","'getIcon' is assigned a value but never used.","'IconContainer' is assigned a value but never used.","default-case","Expected a default case.","SwitchStatement","missingDefaultCase","'customIconMapping' is assigned a value but never used.","no-native-reassign",["548"],"no-negated-in-lhs",["549"],"'blue' is defined but never used.","'orange' is defined but never used.","'purple' is defined but never used.","import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration",["548"],["549"],"'ButtonBase' is defined but never used.","'ExpandIcon' is defined but never used.","'ContractIcon' is defined but never used.","'grey' is defined but never used.","'RegionIcon' is defined but never used.","'PieChartIcon' is defined but never used.","'colors' is assigned a value but never used.","'mouseOver' is assigned a value but never used.","'MemoRowHeader' is assigned a value but never used.","'Container' is assigned a value but never used.","'InnerSliderContent' is assigned a value but never used.","'MemoRow' is assigned a value but never used.","'toggleExpanded' is assigned a value but never used.","'containerStyle' is assigned a value but never used.","no-lone-blocks","Nested block is redundant.","BlockStatement","redundantNestedBlock",["548"],["549"],["548"],["549"],"'TrashIcon' is defined but never used.",["548"],["549"],"'classnames' is defined but never used.","'FullScreen' is defined but never used.","'KeyframeTimeline' is defined but never used.","'DebugBox' is defined but never used.","'TagsSidebarBox' is defined but never used.","'KeyframesSelector' is defined but never used.","'TaskDescription' is defined but never used.","'RegionSelector' is defined but never used.","'HistorySidebarBox' is defined but never used.","'emptyArr' is assigned a value but never used.","'HotkeyDiv' is assigned a value but never used.","'classes' is assigned a value but never used.","'fullScreenHandle' is assigned a value but never used.","no-sequences","Unexpected use of comma operator.","SequenceExpression","unexpectedCommaExpression","'isAVideoFrame' is assigned a value but never used.","'hotkeyHandlers' is assigned a value but never used.","'refocusOnMouseEvent' is assigned a value but never used.","'debugModeOn' is assigned a value but never used.","'nextImageHasRegions' is assigned a value but never used.","'withStyles' is defined but never used.","'Slider' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'ToolEnum' is defined but never used.","'Mode' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'state.images'. Either include it or remove the dependency array.","ArrayExpression",["550"],"Assign arrow function to a variable before exporting as module default","no-fallthrough","Expected a 'break' statement before 'case'.","SwitchCase","case","'setState' is defined but never used.","'Box' is defined but never used.","'Action' is defined but never used.","'updateIn' is defined but never used.","'moment' is defined but never used.","'unselectRegions' is assigned a value but never used.","'src' is assigned a value but never used.","'mouseDownAt' is assigned a value but never used.","no-unreachable","Unreachable code.","ReturnStatement","unreachableCode","'connections' is assigned a value but never used.","'jointStart' is assigned a value but never used.","'region' is assigned a value but never used.","BreakStatement","'iw' is assigned a value but never used.","'ih' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'videoPlaying'. Either include it or remove the dependency array.",["551"],"React Hook useEffect has missing dependencies: 'onChangeVideoPlaying', 'onChangeVideoTime', 'settings.videoPlaybackSpeed', and 'videoTime'. Either include them or remove the dependency array. If 'onChangeVideoTime' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["552"],"React Hook useMemo has an unnecessary dependency: 'activeImage.filter'. Either exclude it or remove the dependency array.",["553"],"'IconButton' is defined but never used.","'Collapse' is defined but never used.","'useStyles' is assigned a value but never used.","Assign literal to a variable before exporting as module default","'pathToActiveImage' is assigned a value but never used.","'activeImage' is assigned a value but never used.","'Fragment' is defined but never used.","'content' is assigned a value but never used.","ThrowStatement","'useState' is defined but never used.","'UndoIcon' is defined but never used.","'asMutable' is defined but never used.","'KeypointsDefinition' is defined but never used.","'RegionTags' is defined but never used.","'maskImagesLoaded' is assigned a value but never used.","'changeMaskImagesLoaded' is assigned a value but never used.","'maskImages' is assigned a value but never used.","'zoomIn' is assigned a value but never used.","React Hook useLayoutEffect has missing dependencies: 'changeMat' and 'mat'. Either include them or remove the dependency array.",["554"],"'innerMousePos' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'changeMat' and 'getLatestMat'. Either include them or remove the dependency array. If 'getLatestMat' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["555"],"'alphaBase' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'onRegionChange' and 'svg'. Either include them or remove the dependency array. If 'onRegionChange' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["556"],"no-global-assign","no-unsafe-negation",{"desc":"557","fix":"558"},{"desc":"559","fix":"560"},{"desc":"561","fix":"562"},{"desc":"563","fix":"564"},{"desc":"565","fix":"566"},{"desc":"567","fix":"568"},{"desc":"569","fix":"570"},"Update the dependencies array to be: [selectedImage, state.images]",{"range":"571","text":"572"},"Update the dependencies array to be: [videoPlaying, videoTime]",{"range":"573","text":"574"},"Update the dependencies array to be: [onChangeVideoPlaying, onChangeVideoTime, settings.videoPlaybackSpeed, videoPlaying, videoTime]",{"range":"575","text":"576"},"Update the dependencies array to be: [imagePosition.topLeft.x, imagePosition.topLeft.y, imagePosition.bottomRight.x, imagePosition.bottomRight.y]",{"range":"577","text":"578"},"Update the dependencies array to be: [changeMat, mat, windowSize]",{"range":"579","text":"580"},"Update the dependencies array to be: [changeMat, getLatestMat, wasdMode]",{"range":"581","text":"582"},"Update the dependencies array to be: [onRegionChange, regions, svg]",{"range":"583","text":"584"},[4671,4686],"[selectedImage, state.images]",[1097,1108],"[videoPlaying, videoTime]",[2029,2043],"[onChangeVideoPlaying, onChangeVideoTime, settings.videoPlaybackSpeed, videoPlaying, videoTime]",[3878,4034],"[imagePosition.topLeft.x, imagePosition.topLeft.y, imagePosition.bottomRight.x, imagePosition.bottomRight.y]",[5085,5097],"[changeMat, mat, windowSize]",[1368,1378],"[changeMat, getLatestMat, wasdMode]",[6131,6140],"[onRegionChange, regions, svg]"]