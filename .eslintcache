[{"/home/compaq/Projects/Danny/react-annotator/src/index.js":"1","/home/compaq/Projects/Danny/react-annotator/src/App.js":"2","/home/compaq/Projects/Danny/react-annotator/src/reportWebVitals.js":"3","/home/compaq/Projects/Danny/react-annotator/src/components/Annotator.js":"4","/home/compaq/Projects/Danny/react-annotator/src/components/ImageLoader.js":"5","/home/compaq/Projects/Danny/react-annotator/src/components/images.js":"6","/home/compaq/Projects/Danny/react-annotator/src/annotator/index.js":"7","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/combine-reducers.js":"8","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/video-reducer.js":"9","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/image-reducer.js":"10","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/history-handler.js":"11","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/general-reducer.js":"12","/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageCanvas/region-tools.js":"13","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/get-implied-video-regions.js":"14","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/get-active-image.js":"15","/home/compaq/Projects/Danny/react-annotator/src/annotator/colors.js":"16","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/convert-expanding-line-to-polygon.js":"17","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/fix-twisted.js":"18","/home/compaq/Projects/Danny/react-annotator/src/annotator/MainLayout/index.js":"19","/home/compaq/Projects/Danny/react-annotator/src/annotator/utils/get-landmarks-with-transform.js":"20","/home/compaq/Projects/Danny/react-annotator/src/annotator/MainLayout/use-implied-video-regions.js":"21","/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageCanvas/index.js":"22","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/index.js":"23","/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageSelector/index.js":"24","/home/compaq/Projects/Danny/react-annotator/src/annotator/hooks/use-window-size.js":"25","/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageCanvas/styles.js":"26","/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageCanvas/use-mouse.js":"27","/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageCanvas/use-project-box.js":"28","/home/compaq/Projects/Danny/react-annotator/src/annotator/hooks/use-exclude-pattern.js":"29","/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageSelector/Container.js":"30","/home/compaq/Projects/Danny/react-annotator/src/annotator/hooks/xpattern.js":"31","/home/compaq/Projects/Danny/react-annotator/src/annotator/PreventScrollToParents/index.js":"32","/home/compaq/Projects/Danny/react-annotator/src/annotator/VideoOrImageCanvasBackground/index.js":"33","/home/compaq/Projects/Danny/react-annotator/src/annotator/RegionSelectAndTransformBoxes/index.js":"34","/home/compaq/Projects/Danny/react-annotator/src/annotator/RegionShapes/index.js":"35","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/LeftSidebar/index.js":"36","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/WorkContainer/index.js":"37","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/components/Footer/index.js":"38","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/components/Toolbar/index.js":"39","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/components/ImageSwitcher/index.js":"40","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/icon-mapping.js":"41","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/LeftSidebar/ObjectSelector.js":"42","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/LeftSidebar/LabelSelector.js":"43","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/LeftSidebar/styles.js":"44","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/components/Toolbar/Slider.js":"45"},{"size":457,"mtime":1624270507362,"results":"46","hashOfConfig":"47"},{"size":316,"mtime":1624270507354,"results":"48","hashOfConfig":"47"},{"size":362,"mtime":1624270507362,"results":"49","hashOfConfig":"47"},{"size":903,"mtime":1624271044835,"results":"50","hashOfConfig":"47"},{"size":486,"mtime":1624276445525,"results":"51","hashOfConfig":"47"},{"size":2342,"mtime":1624270507362,"results":"52","hashOfConfig":"47"},{"size":6396,"mtime":1624270507358,"results":"53","hashOfConfig":"47"},{"size":151,"mtime":1624270507358,"results":"54","hashOfConfig":"47"},{"size":2331,"mtime":1624270507362,"results":"55","hashOfConfig":"47"},{"size":639,"mtime":1624270507358,"results":"56","hashOfConfig":"47"},{"size":1572,"mtime":1624270507358,"results":"57","hashOfConfig":"47"},{"size":22521,"mtime":1624270507358,"results":"58","hashOfConfig":"47"},{"size":3609,"mtime":1624270507354,"results":"59","hashOfConfig":"47"},{"size":2803,"mtime":1624270507358,"results":"60","hashOfConfig":"47"},{"size":712,"mtime":1624270507358,"results":"61","hashOfConfig":"47"},{"size":766,"mtime":1624270507358,"results":"62","hashOfConfig":"47"},{"size":1624,"mtime":1624270507358,"results":"63","hashOfConfig":"47"},{"size":161,"mtime":1624270507358,"results":"64","hashOfConfig":"47"},{"size":9788,"mtime":1624270507354,"results":"65","hashOfConfig":"47"},{"size":561,"mtime":1624270507362,"results":"66","hashOfConfig":"47"},{"size":526,"mtime":1624270507354,"results":"67","hashOfConfig":"47"},{"size":12417,"mtime":1624270507354,"results":"68","hashOfConfig":"47"},{"size":2988,"mtime":1624270507358,"results":"69","hashOfConfig":"47"},{"size":3071,"mtime":1624270507354,"results":"70","hashOfConfig":"47"},{"size":1058,"mtime":1624270507358,"results":"71","hashOfConfig":"47"},{"size":634,"mtime":1624270507354,"results":"72","hashOfConfig":"47"},{"size":4753,"mtime":1624270507354,"results":"73","hashOfConfig":"47"},{"size":662,"mtime":1624270507354,"results":"74","hashOfConfig":"47"},{"size":734,"mtime":1624270507358,"results":"75","hashOfConfig":"47"},{"size":1909,"mtime":1624270507354,"results":"76","hashOfConfig":"47"},{"size":281,"mtime":1624270507358,"results":"77","hashOfConfig":"47"},{"size":1078,"mtime":1624270507354,"results":"78","hashOfConfig":"47"},{"size":4783,"mtime":1624270507354,"results":"79","hashOfConfig":"47"},{"size":4113,"mtime":1624270507354,"results":"80","hashOfConfig":"47"},{"size":2822,"mtime":1624270507354,"results":"81","hashOfConfig":"47"},{"size":6240,"mtime":1624270507358,"results":"82","hashOfConfig":"47"},{"size":687,"mtime":1624270507358,"results":"83","hashOfConfig":"47"},{"size":3978,"mtime":1624270507358,"results":"84","hashOfConfig":"47"},{"size":2270,"mtime":1624270507358,"results":"85","hashOfConfig":"47"},{"size":1490,"mtime":1624270507358,"results":"86","hashOfConfig":"47"},{"size":3662,"mtime":1624277221683,"results":"87","hashOfConfig":"47"},{"size":6678,"mtime":1624270507358,"results":"88","hashOfConfig":"47"},{"size":6338,"mtime":1624270507358,"results":"89","hashOfConfig":"47"},{"size":1010,"mtime":1624270507358,"results":"90","hashOfConfig":"47"},{"size":1407,"mtime":1624270507358,"results":"91","hashOfConfig":"47"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"3qfoy3",{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"98","messages":"99","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"100"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"105","messages":"106","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"107"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"110"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"113"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"119"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"122"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"125"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"128"},{"filePath":"129","messages":"130","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"131"},{"filePath":"132","messages":"133","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"134","messages":"135","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"136"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"139"},{"filePath":"140","messages":"141","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"142"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"145"},{"filePath":"146","messages":"147","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"148"},{"filePath":"149","messages":"150","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"151"},{"filePath":"152","messages":"153","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"154","messages":"155","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"156"},{"filePath":"157","messages":"158","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"159"},{"filePath":"160","messages":"161","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"162"},{"filePath":"163","messages":"164","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"165"},{"filePath":"166","messages":"167","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"168"},{"filePath":"169","messages":"170","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"171"},{"filePath":"172","messages":"173","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"174"},{"filePath":"175","messages":"176","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"177"},{"filePath":"178","messages":"179","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"180","messages":"181","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"182"},{"filePath":"183","messages":"184","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"185"},{"filePath":"186","messages":"187","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"188"},{"filePath":"189","messages":"190","errorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"191"},{"filePath":"192","messages":"193","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"194"},{"filePath":"195","messages":"196","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"197","messages":"198","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"199","messages":"200","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"201","messages":"202","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"203"},{"filePath":"204","messages":"205","errorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"206"},{"filePath":"207","messages":"208","errorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"209"},{"filePath":"210","messages":"211","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"212"},{"filePath":"213","messages":"214","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"215"},"/home/compaq/Projects/Danny/react-annotator/src/index.js",[],"/home/compaq/Projects/Danny/react-annotator/src/App.js",[],"/home/compaq/Projects/Danny/react-annotator/src/reportWebVitals.js",[],"/home/compaq/Projects/Danny/react-annotator/src/components/Annotator.js",["216"],"import React from 'react'\nimport Annotator from '../annotator';\nimport { images, labels } from './images'\nimport { Route, useHistory, useParams } from 'react-router-dom';\nimport ImageLoader from './ImageLoader';\nconst AppAnnotator = (props) => {\n    const history = useHistory();\n    const params = useParams();\n\n   let imageIndex = images.findIndex(image => image.name === params.asset);\n\n    return (\n        <div>\n            <Annotator\n                images={images}\n                loader={ImageLoader}\n                regionClsList={labels}\n                jobName=\"Dr-John-De\"\n                renderError={(error) => {}}\n                selectedImage={imageIndex >=0 ? imageIndex : 0}\n                useHistory={()=> history}\n                onSave={(selectedImage, encodedData) => {}}\n                onSubmit={(state) => {}}\n            />\n        </div>\n    )\n}\n\nexport default AppAnnotator\n","/home/compaq/Projects/Danny/react-annotator/src/components/ImageLoader.js",[],"/home/compaq/Projects/Danny/react-annotator/src/components/images.js",[],"/home/compaq/Projects/Danny/react-annotator/src/annotator/index.js",["217","218","219","220"],"// @flow\n\nimport  React,{ useReducer, useEffect } from \"react\"\nimport type { Node } from \"react\"\nimport MainLayout from \"./MainLayout\"\nimport type {\n  ToolEnum,\n  Image,\n  Mode,\n  MainLayoutState,\n  Action,\n} from \"./MainLayout/types\"\nimport type { KeypointsDefinition } from \"./ImageCanvas/region-tools\"\n\nimport combineReducers from \"./reducers/combine-reducers.js\"\nimport generalReducer from \"./reducers/general-reducer.js\"\nimport imageReducer from \"./reducers/image-reducer.js\"\nimport videoReducer from \"./reducers/video-reducer.js\"\nimport historyHandler from \"./reducers/history-handler.js\"\n\nimport useEventCallback from \"use-event-callback\"\nimport makeImmutable, { without } from \"seamless-immutable\"\n\ntype Props = {\n  taskDescription?: string,\n  allowedArea?: { x: number, y: number, w: number, h: number },\n  regionTagList?: Array<string>,\n  regionClsList?: Array<string>,\n  imageTagList?: Array<string>,\n  imageClsList?: Array<string>,\n  enabledTools?: Array<string>,\n  selectedTool?: String,\n  showTags?: boolean,\n  selectedImage?: string | number,\n  images?: Array<Image>,\n  showPointDistances?: boolean,\n  pointDistancePrecision?: number,\n  RegionEditLabel?: Node,\n  onSubmit: (MainLayoutState) => any,\n  onSave: (Image,string) => any,\n  useHistory: () => Object,\n  renderError: () => any,\n  jobName?:string,\n  videoTime?: number,\n  videoSrc?: string,\n  keyframes?: Object,\n  videoName?: string,\n  keypointDefinitions: KeypointsDefinition,\n  fullImageSegmentationMode?: boolean,\n  autoSegmentationOptions?:\n    | {| type: \"simple\" |}\n    | {| type: \"autoseg\", maxClusters?: number, slicWeightFactor?: number |},\n}\n\nexport const Annotator = ({\n  images,\n  loader,\n  allowedArea,\n  selectedImage = images && images.length > 0 ? 0 : undefined,\n  showPointDistances,\n  pointDistancePrecision,\n  selectedImageRegion=[],\n  showTags = true,\n  history,\n  enabledTools = [\n    \"pan\",\n    \"zoom-in\",\n    \"zoom-out\",\n    \"brightness\",\n    \"contrast\",\n    \"inverse\",\n    \"polygon\",\n    \"draw\"\n  ],\n  selectedTool = \"pan\",\n  jobName=\"\",\n  regionTagList = [],\n  regionClsList = [],\n  imageTagList = [],\n  imageClsList = [],\n  keyframes = {},\n  taskDescription = \"\",\n  fullImageSegmentationMode = false,\n  RegionEditLabel,\n  videoSrc,\n  videoTime = 0,\n  videoName,\n  onSubmit,\n  onSave,\n  renderError,\n  useHistory,\n  onNextImage,\n  onPrevImage,\n  keypointDefinitions,\n  autoSegmentationOptions = { type: \"autoseg\" },\n}: Props) => {\n  if (typeof selectedImage === \"string\") {\n    selectedImage = (images || []).findIndex((img) => img.src === selectedImage)\n    if (selectedImage === -1) selectedImage = undefined\n  }\n  const annotationType = images ? \"image\" : \"video\"\n  const [state, dispatchToReducer] = useReducer(\n    historyHandler(\n      combineReducers(\n        annotationType === \"image\" ? imageReducer : videoReducer,\n        generalReducer\n      )\n    ),\n    makeImmutable({\n      annotationType,\n      showTags,\n      jobName,\n      allowedArea,\n      showPointDistances,\n      pointDistancePrecision,\n      selectedTool,\n      fullImageSegmentationMode: fullImageSegmentationMode,\n      autoSegmentationOptions,\n      mode: null,\n      taskDescription,\n      showMask: true,\n      labelImages: imageClsList.length > 0 || imageTagList.length > 0,\n      regionClsList,\n      regionTagList,\n      imageClsList,\n      imageTagList,\n      currentVideoTime: videoTime,\n      enabledTools,\n      history,\n      historyCache:{},\n      videoName,\n      keypointDefinitions,\n      ...(annotationType === \"image\"\n        ? {\n            selectedImage,\n            images,\n            selectedImageFrameTime:\n              images && images.length > 0 ? images[0].frameTime : undefined,\n          }\n        : {\n            videoSrc,\n            keyframes,\n          }),\n    })\n  )\n\n  const dispatch = useEventCallback((action: Action) => {\n    if (action.type === \"FOOTER_BUTTON_CLICKED\") {\n      // Handle Footer button events\n\n      if (action.buttonName === \"submit\") {\n        //Handle event when submit is clicked\n        return onSubmit(without(state, \"history\"))\n      }\n\n      else if (action.buttonName === \"save\") {\n        // Handle event when save is clicked\n        const image = state.images[state.selectedImage];\n\n        //Create white canvas with original image dimen\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = image.pixelSize.w\n        canvas.height = image.pixelSize.h\n        var ctx = canvas.getContext(\"2d\");\n        ctx.fillStyle = \"white\";\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n        if (!image.region_data || image.nothingToLabel) {\n\n          /**\n           * Return blank canvas data if.\n           * 1. if image has no regions\n           * 2. if image has nothing to label\n           */\n          return onSave(image,canvas.toDataURL(\"image/png\"))\n        }\n\n        // Create image with region data.\n        var img = document.createElement(\"img\");\n        img.setAttribute(\"src\", \"data:image/svg+xml;base64,\" + image.region_data);\n\n        img.onload = function () {\n          //  Draw image on white canvas\n          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n          return onSave(image,canvas.toDataURL(\"image/png\"))\n         };\n      }\n\n    }\n    // Dispatch action except handled above to reducer\n    dispatchToReducer(action)\n  })\n\n  const onRegionClassAdded = useEventCallback((cls) => {\n    dispatchToReducer({\n      type: \"ON_CLS_ADDED\",\n      cls: cls,\n    })\n  })\n\n  useEffect(() => {\n    if (selectedImage === undefined) return\n    dispatchToReducer({\n      type: \"SELECT_IMAGE\",\n      imageIndex: selectedImage,\n      image: state.images[selectedImage],\n    })\n  }, [selectedImage])\n\n  useEffect(() => {\n    if (selectedImage === undefined) return\n     dispatchToReducer({\n      type: \"UPDATE_IMAGE_REGIONS\",\n      regions: selectedImageRegion,\n      imageIndex: selectedImage,\n    })\n  },[])\n\n  if (!images && !videoSrc)\n    return 'Missing required prop \"images\" or \"videoSrc\"'\n\n  return (\n\n      <MainLayout\n        RegionEditLabel={RegionEditLabel}\n        alwaysShowNextButton={Boolean(onNextImage)}\n        alwaysShowPrevButton={Boolean(onPrevImage)}\n        state={state}\n        loader={loader}\n        useHistory={useHistory}\n        renderError={renderError}\n        dispatch={dispatch}\n        onRegionClassAdded={onRegionClassAdded}\n      />\n  )\n}\n\nexport default Annotator\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/combine-reducers.js",["221"],"export default (...reducers) => (state, action) => {\r\n  for (const reducer of reducers) {\r\n    state = reducer(state, action)\r\n  }\r\n  return state\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/video-reducer.js",["222","223","224","225"],"// @flow\r\n\r\nimport type {\r\n  MainLayoutVideoAnnotationState,\r\n  Action,\r\n} from \"../../MainLayout/types\"\r\nimport { setIn, without } from \"seamless-immutable\"\r\nimport getImpliedVideoRegions from \"./get-implied-video-regions\"\r\nimport { saveToHistory } from \"./history-handler.js\"\r\n\r\nexport default (state: MainLayoutVideoAnnotationState, action: Action) => {\r\n  const copyImpliedRegions = () => {\r\n    return setIn(\r\n      saveToHistory(state, \"Add Keyframe\"),\r\n      [\"keyframes\", state.currentVideoTime || 0],\r\n      {\r\n        regions: getImpliedVideoRegions(\r\n          state.keyframes,\r\n          state.currentVideoTime\r\n        ),\r\n      }\r\n    )\r\n  }\r\n\r\n  switch (action.type) {\r\n    case \"IMAGE_OR_VIDEO_LOADED\": {\r\n      const { duration } = action.metadata\r\n      if (typeof duration === \"number\") {\r\n        return setIn(state, [\"videoDuration\"], duration * 1000)\r\n      }\r\n    }\r\n    case \"FOOTER_BUTTON_CLICKED\": {\r\n      switch (action.buttonName.toLowerCase()) {\r\n        case \"play\":\r\n          return setIn(state, [\"videoPlaying\"], true)\r\n        case \"pause\":\r\n          return setIn(state, [\"videoPlaying\"], false)\r\n      }\r\n    }\r\n    case \"CHANGE_VIDEO_TIME\": {\r\n      return setIn(state, [\"currentVideoTime\"], action.newTime)\r\n    }\r\n    case \"CHANGE_VIDEO_PLAYING\": {\r\n      return setIn(state, [\"videoPlaying\"], action.isPlaying)\r\n    }\r\n    case \"DELETE_KEYFRAME\": {\r\n      return setIn(state, [\"keyframes\"], without(state.keyframes, action.time))\r\n    }\r\n    default:\r\n      break\r\n  }\r\n\r\n  // Before the user modifies regions, copy the interpolated regions over to a\r\n  // new keyframe\r\n  if (!state.keyframes[state.currentVideoTime]) {\r\n    switch (action.type) {\r\n      case \"BEGIN_BOX_TRANSFORM\":\r\n      case \"BEGIN_MOVE_POINT\":\r\n      case \"BEGIN_MOVE_POLYGON_POINT\":\r\n      case \"ADD_POLYGON_POINT\":\r\n      case \"SELECT_REGION\":\r\n      case \"CHANGE_REGION\":\r\n      case \"DELETE_REGION\":\r\n      case \"OPEN_REGION_EDITOR\":\r\n        return copyImpliedRegions()\r\n      case \"MOUSE_DOWN\": {\r\n        switch (state.selectedTool) {\r\n          case \"create-point\":\r\n          case \"create-polygon\":\r\n          case \"create-box\":\r\n            return copyImpliedRegions()\r\n          default:\r\n            break\r\n        }\r\n        break\r\n      }\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n  return state\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/image-reducer.js",["226","227","228","229"],"// @flow\r\n\r\nimport type {\r\n  MainLayoutImageAnnotationState,\r\n  Action,\r\n} from \"../../MainLayout/types\"\r\nimport { setIn } from \"seamless-immutable\"\r\nimport getActiveImage from \"./get-active-image\"\r\n\r\nexport default (state: MainLayoutImageAnnotationState, action: Action) => {\r\n  const { currentImageIndex, pathToActiveImage, activeImage } = getActiveImage(\r\n    state\r\n  )\r\n\r\n  switch (action.type) {\r\n    case \"IMAGE_OR_VIDEO_LOADED\": {\r\n      return setIn(state, [\"images\", currentImageIndex, \"pixelSize\"], {\r\n        w: action.metadata.naturalWidth,\r\n        h: action.metadata.naturalHeight,\r\n      })\r\n    }\r\n  }\r\n  return state\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/history-handler.js",["230","231"],"// @flow\r\n\r\nimport type { MainLayoutState, Action } from \"../../MainLayout/types\"\r\nimport { setIn, updateIn, asMutable, without } from \"seamless-immutable\"\r\nimport moment from \"moment\"\r\n\r\nconst typesToSaveWithHistory = {\r\n  BEGIN_BOX_TRANSFORM: \"Transform/Move Box\",\r\n  BEGIN_MOVE_POINT: \"Move Point\",\r\n  DELETE_REGION: \"Delete Region\",\r\n}\r\n\r\nexport const saveToHistory = (state: MainLayoutState, name: string) =>\r\n  updateIn(state, [\"history\"], (h) =>\r\n    [\r\n      {\r\n        time: moment().toDate(),\r\n        state: without(state, \"history\"),\r\n        name,\r\n      },\r\n    ].concat((h || []).slice(0, 9))\r\n  )\r\n\r\nexport default (reducer) => {\r\n  return (state: MainLayoutState, action: Action) => {\r\n    const prevState = state\r\n    const nextState = reducer(state, action)\r\n\r\n    if (action.type === \"RESTORE_HISTORY\") {\r\n      if (state.history.length > 0) {\r\n        return setIn(\r\n          nextState.history[0].state,\r\n          [\"history\"],\r\n          nextState.history.slice(1)\r\n        )\r\n      }\r\n    } else {\r\n      if (\r\n        prevState !== nextState &&\r\n        Object.keys(typesToSaveWithHistory).includes(action.type)\r\n      ) {\r\n        return setIn(\r\n          nextState,\r\n          [\"history\"],\r\n          [\r\n            {\r\n              time: moment().toDate(),\r\n              state: without(prevState, \"history\"),\r\n              name: typesToSaveWithHistory[action.type] || action.type,\r\n            },\r\n          ]\r\n            .concat(nextState.history || [])\r\n            .slice(0, 9)\r\n        )\r\n      }\r\n    }\r\n\r\n    return nextState\r\n  }\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/general-reducer.js",["232","233","234","235","236","237","238","239","240","241","242","243","244","245","246"],"// @flow\nimport type { MainLayoutState, Action } from \"../../MainLayout/types\"\nimport { moveRegion } from \"../ImageCanvas/region-tools.js\"\nimport Immutable,{ getIn, setIn, updateIn } from \"seamless-immutable\"\nimport moment from \"moment\"\nimport isEqual from \"lodash/isEqual\"\nimport getActiveImage from \"./get-active-image\"\nimport { saveToHistory } from \"./history-handler.js\"\nimport colors from \"../colors\"\nimport fixTwisted from \"./fix-twisted\"\nimport convertExpandingLineToPolygon from \"./convert-expanding-line-to-polygon\"\nimport clamp from \"clamp\"\n\nimport getLandmarksWithTransform from \"../utils/get-landmarks-with-transform\"\n\nconst getRandomId = () => Math.random().toString().split(\".\")[1]\n\nconst generalReducer = (state, action) => {\n  if (\n    state.allowedArea &&\n    state.selectedTool !== \"modify-allowed-area\" &&\n    [\"MOUSE_DOWN\", \"MOUSE_UP\", \"MOUSE_MOVE\"].includes(action.type)\n  ) {\n    const aa = state.allowedArea\n    action.x = clamp(action.x, aa.x, aa.x + aa.w)\n    action.y = clamp(action.y, aa.y, aa.y + aa.h)\n  }\n\n  if (action.type === \"ON_CLS_ADDED\" && action.cls && action.cls !== \"\") {\n    const oldRegionClsList = state.regionClsList\n    const newState = {\n      ...state,\n      regionClsList: oldRegionClsList.concat(action.cls),\n    }\n    return newState\n  }\n\n  // Throttle certain actions\n  if (action.type === \"MOUSE_MOVE\") {\n    if (Date.now() - ((state: any).lastMouseMoveCall || 0) < 16) return state\n    state = setIn(state, [\"lastMouseMoveCall\"], Date.now())\n  }\n  if (!action.type.includes(\"MOUSE\")) {\n    state = setIn(state, [\"lastAction\"], action)\n  }\n\n  const { currentImageIndex, pathToActiveImage, activeImage } = getActiveImage(\n    state\n  )\n\n  const getRegionIndex = (region) => {\n    const regionId =\n      typeof region === \"string\" || typeof region === \"number\"\n        ? region\n        : region.id\n    if (!activeImage) return null\n    const regionIndex = (activeImage.regions || []).findIndex(\n      (r) => r.id === regionId\n    )\n    return regionIndex === -1 ? null : regionIndex\n  }\n  const getRegion = (regionId) => {\n    if (!activeImage) return null\n    const regionIndex = getRegionIndex(regionId)\n    if (regionIndex === null) return [null, null]\n    const region = activeImage.regions[regionIndex]\n    return [region, regionIndex]\n  }\n  const modifyRegion = (regionId, obj) => {\n    const [region, regionIndex] = getRegion(regionId)\n    if (!region) return state\n    if (obj !== null) {\n      return setIn(state, [...pathToActiveImage, \"regions\", regionIndex], {\n        ...region,\n        ...obj,\n      })\n    } else {\n      // delete region\n      const regions = activeImage.regions\n      return setIn(\n        state,\n        [...pathToActiveImage, \"regions\"],\n        (regions || []).filter((r) => r.id !== region.id)\n      )\n    }\n  }\n  const unselectRegions = (state: MainLayoutState) => {\n    if (!activeImage) return state\n    return setIn(\n      state,\n      [...pathToActiveImage, \"regions\"],\n      (activeImage.regions || []).map((r) => ({\n        ...r,\n        highlighted: false,\n      }))\n    )\n  }\n\n  const closeEditors = (state: MainLayoutState) => {\n    if (currentImageIndex === null) return state\n    return setIn(\n      state,\n      [...pathToActiveImage, \"regions\"],\n      (activeImage.regions || []).map((r) => ({\n        ...r,\n        editingLabels: false,\n      }))\n    )\n  }\n\n  const setNewImage = (img: string | Object, index: number) => {\n    let { src, frameTime } = typeof img === \"object\" ? img : { src: img }\n    state=  setIn(\n      setIn(state, [\"selectedImage\"], index),\n      [\"selectedImageFrameTime\"],\n      frameTime\n    )\n      return state;\n  }\n\n  switch (action.type) {\n    case \"@@INIT\": {\n      return setIn(state, ['initState'], state);\n    }\n    case \"SELECT_IMAGE\": {\n      return setNewImage(action.image, action.imageIndex)\n    }\n\n    case \"UPDATE_IMAGE_REGIONS\": {\n      const {regions} = action;\n      return setIn(\n        state,\n        ['images', currentImageIndex, 'regions'],regions\n      )\n    }\n\n    case 'SELECT_LABEL': {\n\n      const selectedLabel = action.selectedLabel;\n      return setIn(\n        state,\n        ['images', state.selectedImage, 'label'],selectedLabel\n      )\n    }\n\n    case \"CHANGE_REGION\": {\n      // console.log(\"ActionRegion:\", action.region);\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const oldRegion = activeImage.regions[regionIndex]\n      // console.log('OldRegion,', oldRegion);\n      // console.log('NewRegion,', action.region);\n      if (oldRegion.cls !== action.region.cls) {\n        state = saveToHistory(state, \"Change Region Classification\")\n        const clsIndex = state.regionClsList.indexOf(action.region.cls)\n        if (clsIndex !== -1) {\n          action.region.color = colors[clsIndex % colors.length]\n        }\n      }\n      if (!isEqual(oldRegion.tags, action.region.tags)) {\n        state = saveToHistory(state, \"Change Region Tags\")\n      }\n      return setIn(\n        state,\n        [...pathToActiveImage, \"regions\", regionIndex],\n        action.region\n      )\n    }\n\n    case 'SUBMIT': {\n\n      const regionData = getIn(state, [...pathToActiveImage, \"region_data\"])\n\n      return state;\n    }\n\n    case 'IMAGE_LOADED': {\n      const { loading } = action;\n      state = setIn(state, [...pathToActiveImage, \"loading\"], loading)\n      return state;\n    }\n\n\n    case 'CHANGE_REGION_DATA': {\n      // Set svg encoded data of drawn regions as regionData for current image\n      const regionData = action.payload;\n       return setIn(state, [...pathToActiveImage, \"region_data\"], regionData)\n      }\n    case \"CHANGE_LABEL\": {\n      const label = action.label;\n      if (!label || activeImage.regions.length === 0) {\n        return state;\n      }\n\n\n      // Check if image has regions associated to this label\n      const hasRegions = [...(activeImage.regions || [])].find((r) => r.cls === label.cls);\n      if (!hasRegions) {\n        return state;\n      }\n\n\n      const regions = [...(activeImage.regions || [])].map((r) => {\n        if (r.cls === label.cls) {\n          return ({\n            ...r,\n            visible: label.visible,\n            locked: label.locked\n          })\n        }\n        return r;\n      })\n\n     state = setIn(state, ['regionClsList'], state.regionClsList.map(regionLabel => {\n        if (regionLabel.cls === label.cls) {\n          return ({\n            ...regionLabel,\n            visible: label.visible,\n            locked: label.locked\n\n          })\n        }\n       return regionLabel;\n      }));\n\n\n      return setIn(state, [...pathToActiveImage, \"regions\"], regions)\n\n    }\n    case \"CHANGE_IMAGE\": {\n      if (!activeImage) return state\n      const { delta } = action\n      for (const key of Object.keys(delta)) {\n        if (key === \"cls\") saveToHistory(state, \"Change Image Class\")\n        if (key === \"tags\") saveToHistory(state, \"Change Image Tags\")\n        state = setIn(state, [...pathToActiveImage, key], delta[key])\n      }\n      return state\n    }\n    case \"SELECT_REGION\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const regions = [...(activeImage.regions || [])].map((r) => ({\n        ...r,\n        highlighted: r.id === region.id,\n        editingLabels: r.id === region.id,\n      }))\n      return setIn(state, [...pathToActiveImage, \"regions\"], regions)\n    }\n\n\n    case \"BEGIN_MOVE_POLYGON_POINT\": {\n      const { polygon, pointIndex } = action\n      state = closeEditors(state)\n      if (\n        state.mode &&\n        state.mode.mode === \"DRAW_POLYGON\" &&\n        pointIndex === 0\n      ) {\n        return setIn(\n          modifyRegion(polygon, {\n            points: polygon.points.slice(0, -1),\n            open: false,\n          }),\n          [\"mode\"],\n          null\n        )\n      }\n      // else {\n      //   state = saveToHistory(state, \"Move Polygon Point\")\n      // }\n      return setIn(state, [\"mode\"], {\n        mode: \"MOVE_POLYGON_POINT\",\n        regionId: polygon.id,\n        pointIndex,\n      })\n    }\n\n    // Add new polygon point on its edge\n    case \"ADD_POLYGON_POINT\": {\n      const { polygon, point, pointIndex } = action\n      const regionIndex = getRegionIndex(polygon)\n      // console.log(\"regionIndex\", regionIndex);\n      if (regionIndex === null) return state\n      const points = [...polygon.points]\n      points.splice(pointIndex, 0, point)\n      return setIn(state, [...pathToActiveImage, \"regions\", regionIndex], {\n        ...polygon,\n        points,\n      })\n    }\n    case \"MOUSE_MOVE\": {\n      const { x, y } = action\n\n      if (!state.mode) return state\n      if (!activeImage) return state\n      const { mouseDownAt } = state\n      switch (state.mode.mode) {\n        case \"MOVE_POLYGON_POINT\": {\n          const { pointIndex, regionId } = state.mode\n          const regionIndex = getRegionIndex(regionId)\n          if (regionIndex === null) return state\n          return setIn(\n            state,\n            [\n              ...pathToActiveImage,\n              \"regions\",\n              regionIndex,\n              \"points\",\n              pointIndex,\n            ],\n            [x, y]\n          )\n        }\n\n        case \"MOVE_REGION\": {\n          const { regionId } = state.mode\n          if (regionId === \"$$allowed_area\") {\n            const {\n              allowedArea: { w, h },\n            } = state\n            return setIn(state, [\"allowedArea\"], {\n              x: x - w / 2,\n              y: y - h / 2,\n              w,\n              h,\n            })\n          }\n          const regionIndex = getRegionIndex(regionId)\n          if (regionIndex === null) return state\n          return setIn(\n            state,\n            [...pathToActiveImage, \"regions\", regionIndex],\n            moveRegion(activeImage.regions[regionIndex], x, y)\n          )\n        }\n\n\n        case \"DRAW_POLYGON\": {\n          const { regionId } = state.mode\n          const [region, regionIndex] = getRegion(regionId)\n          if (!region) return setIn(state, [\"mode\"], null)\n          return setIn(\n            state,\n            [\n              ...pathToActiveImage,\n              \"regions\",\n              regionIndex,\n              \"points\",\n              (region: any).points.length - 1,\n            ],\n            [x, y]\n          )\n        }\n\n        default:\n          return state\n      }\n    }\n    case \"MOUSE_DOWN\": {\n      if (!activeImage) return state\n      const { x, y } = action\n\n      state = setIn(state, [\"mouseDownAt\"], { x, y })\n      if (state.mode) {\n        switch (state.mode.mode) {\n          case \"DRAW_POLYGON\": {\n            const [polygon, regionIndex] = getRegion(state.mode.regionId)\n            if (!polygon) break\n            return setIn(\n              state,\n              [...pathToActiveImage, \"regions\", regionIndex],\n              { ...polygon, points: polygon.points.concat([[x, y]]) }\n            )\n          }\n\n          default:\n            break\n        }\n      }\n\n      let newRegion\n      if (!activeImage.label) {\n        return state;\n      }\n      let defaultRegionCls = activeImage.label.cls,\n        defaultRegionColor = activeImage.label.color\n      switch (state.selectedTool) {\n\n        case \"polygon\": {\n\n          if (state.mode && state.mode.mode === \"DRAW_POLYGON\") break\n          state = saveToHistory(state, \"Create Polygon\")\n          newRegion = {\n            type: \"polygon\",\n            points: [\n              [x, y],\n              [x, y],\n            ],\n            open: true,\n            highlighted: true,\n            color: defaultRegionColor,\n            cls: defaultRegionCls,\n            id: getRandomId(),\n          }\n          state = setIn(state, [\"mode\"], {\n            mode: \"DRAW_POLYGON\",\n            regionId: newRegion.id,\n          })\n          break\n        }\n\n        default:\n          break\n      }\n\n      const regions = [...(getIn(state, pathToActiveImage).regions || [])]\n        .map((r) =>\n          setIn(r, [\"editingLabels\"], false).setIn([\"highlighted\"], false)\n        )\n        .concat(newRegion ? [newRegion] : [])\n\n      return setIn(state, [...pathToActiveImage, \"regions\"], regions)\n    }\n    case \"MOUSE_UP\": {\n      const { x, y } = action\n\n      const { mouseDownAt = { x, y } } = state\n      if (!state.mode) return state\n      state = setIn(state, [\"mouseDownAt\"], null)\n      switch (state.mode.mode) {\n\n        case \"MOVE_POLYGON_POINT\": {\n          return { ...state, mode: null }\n        }\n\n        default:\n          return state\n      }\n    }\n\n\n    case \"OPEN_REGION_EDITOR\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const newRegions = setIn(\n        activeImage.regions.map((r) => ({\n          ...r,\n          highlighted: false,\n          editingLabels: false,\n        })),\n        [regionIndex],\n        {\n          ...(activeImage.regions || [])[regionIndex],\n          highlighted: true,\n          editingLabels: true,\n        }\n      )\n      return setIn(state, [...pathToActiveImage, \"regions\"], newRegions)\n    }\n    case \"CLOSE_REGION_EDITOR\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      return setIn(state, [...pathToActiveImage, \"regions\", regionIndex], {\n        ...(activeImage.regions || [])[regionIndex],\n        editingLabels: false,\n      })\n    }\n\n    case 'CLICK_LABEL': {\n      const label = state.images[currentImageIndex].label;\n      return setIn(\n        state,\n        [\"images\", currentImageIndex, \"label\"],\n        !label\n      )\n    }\n    case \"DELETE_REGION\": {\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const region = action.region;\n\n\n      state =  setIn(\n        state,\n        [...pathToActiveImage, \"regions\"],\n        (activeImage.regions || []).filter((r) => r.id !== action.region.id)\n      )\n\n      let historyCacheForActiveImage = getIn(state, ['historyCache', activeImage.name]);\n      if (historyCacheForActiveImage) {\n        historyCacheForActiveImage = Immutable.asMutable(historyCacheForActiveImage);\n        historyCacheForActiveImage.push(region)\n      } else {\n        historyCacheForActiveImage = [];\n        historyCacheForActiveImage.push(region)\n      }\n      return setIn(state, ['historyCache', activeImage.name], historyCacheForActiveImage);\n\n    }\n    case \"DELETE_SELECTED_REGION\": {\n      return setIn(\n        state,\n        [...pathToActiveImage, \"regions\"],\n        (activeImage.regions || []).filter((r) => !r.highlighted)\n      )\n    }\n    case \"FOOTER_BUTTON_CLICKED\": {\n      const buttonName = action.buttonName.toLowerCase()\n      switch (buttonName) {\n        case \"undo\": {\n\n\n          // Check if current image has active regions to undo\n          if (activeImage.regions && activeImage.regions.length > 0) {\n\n            // get last region inserted to active image\n           let lastRegionAddedToActiveImage = getIn(state,\n            [...pathToActiveImage, \"regions\",activeImage.regions.length - 1])\n\n\n            //Remove last region inserted to active image\n            state =\n            setIn(state,[...pathToActiveImage, \"regions\"], activeImage.regions.filter((element, index) => index < activeImage.regions.length - 1))\n\n             // Cache last active image region to historyCache\n            let historyCacheForActiveImage = getIn(state, ['historyCache', activeImage.name]);\n            if (historyCacheForActiveImage) {\n              historyCacheForActiveImage = Immutable.asMutable(historyCacheForActiveImage);\n              historyCacheForActiveImage.push(lastRegionAddedToActiveImage)\n            } else {\n              historyCacheForActiveImage = [];\n              historyCacheForActiveImage.push(lastRegionAddedToActiveImage)\n            }\n            state =  setIn(state, ['historyCache', activeImage.name], historyCacheForActiveImage);\n\n          }\n          return state;\n        }\n        case \"redo\": {\n\n          // Check if we have regions in cache  to redo\n          if (state.historyCache && state.historyCache[activeImage.name] && state.historyCache[activeImage.name].length > 0) {\n\n            // get last item inserted to history cache\n            // let lastRegionAddedToCache = getIn(state,\n            //   [\"historyCache\", state.historyCache.length - 1]);\n            let lastRegionAddedToCache = state.historyCache[activeImage.name][state.historyCache[activeImage.name].length - 1];\n\n            // remove last item from history cache.\n            state =\n              setIn(state, ['historyCache', activeImage.name], state.historyCache[activeImage.name].filter((element, index) => index < state.historyCache[activeImage.name].length - 1))\n\n\n            // console.log(\"lastRegionAddedToCache\", lastRegionAddedToCache)\n            // redo active image regions with last item popped from history cache\n            state =\n            setIn(state,[...pathToActiveImage, \"regions\",activeImage.regions.length],  lastRegionAddedToCache)\n            // return state.historyCache[0];\n            // console.log(\"After redoing regions \", state);\n\n          }\n          return state;\n\n        }\n        case 'reset': {\n          // console.log('Before reset: ', state);\n          if (activeImage.regions && activeImage.regions.length > 0) {\n            let historyCacheForActiveImage = getIn(state, ['historyCache', activeImage.name]);\n            if (historyCacheForActiveImage && historyCacheForActiveImage.length > 0) {\n             // clear history cache for current image.\n            state =\n              setIn(state,['historyCache',activeImage.name], [])\n            }\n            state =\n              setIn(state,['historyCache',activeImage.name], activeImage.regions)\n\n            state =\n              setIn(state,\n                [...pathToActiveImage, \"regions\"],\n                [])\n          }\n\n            // state = setIn(state.history[state.history.length - 1].state, ['history'], []);\n            // console.log(\"After reset\", state);\n\n\n          return state;\n        }\n        case \"prev\": {\n          if (currentImageIndex === null) return state\n          if (currentImageIndex === 0) return state\n          return setNewImage(\n            state.images[currentImageIndex - 1],\n            currentImageIndex - 1\n          )\n        }\n        case \"next\": {\n          if (currentImageIndex === null) return state\n          if (currentImageIndex === state.images.length - 1) return state\n          return setNewImage(\n            state.images[currentImageIndex + 1],\n            currentImageIndex + 1\n          )\n        }\n\n        case \"save\": {\n          return state\n        }\n\n        case 'nolabel': {\n          const nothingToLabel = state.images[currentImageIndex].nothingToLabel;\n      return setIn(\n        state,\n        [\"images\", currentImageIndex, \"nothingToLabel\"],\n        !nothingToLabel\n      )\n        }\n\n        case \"clone\": {\n          if (currentImageIndex === null) return state\n          if (currentImageIndex === state.images.length - 1) return state\n          return setIn(\n            setNewImage(\n              state.images[currentImageIndex + 1],\n              currentImageIndex + 1\n            ),\n            [\"images\", currentImageIndex + 1, \"regions\"],\n            activeImage.regions\n          )\n        }\n        case \"settings\": {\n          return setIn(state, [\"settingsOpen\"], !state.settingsOpen)\n        }\n        case \"help\": {\n          return state\n        }\n        case \"fullscreen\": {\n          return setIn(state, [\"fullScreen\"], true)\n        }\n        case \"exit fullscreen\":\n        case \"window\": {\n          return setIn(state, [\"fullScreen\"], false)\n        }\n        case \"hotkeys\": {\n          return state\n        }\n        case \"exit\":\n        case \"done\": {\n          return state\n        }\n        default:\n          return state\n      }\n      break;\n    }\n\n    case \"UPDATE_FILTER\": {\n\n      // return setIn(state, [\"zoomOut\"], !state.zoomOut)\n      // console.log('Action:',action.payload.value);\n      let filter = getIn( state,\n        [...pathToActiveImage, \"filter\"])\n        if(!filter){\n          filter = {};\n          // filter['brightness'] = action.payload.value;\n       }\n      //  console.log('Payliad: ',filter);\n\n      const newState =  setIn(\n        state,\n        [...pathToActiveImage, \"filter\"],\n        {...filter,[action.payload.name]: action.payload.value}\n      )\n\n      return newState;\n\n    }\n    case \"SELECT_TOOL\": {\n      state = setIn(state, [\"selectedTool\"], action.selectedTool)\n      if(action.selectedTool === 'inverse') {\n       let filter = getIn( state,\n        [...pathToActiveImage, \"filter\"])\n       if(!filter){\n         filter = {};\n         filter.inverse = 0;\n       }\n      state =  setIn(\n        state,\n        [...pathToActiveImage, \"filter\"],\n        {...filter,inverse: filter.inverse == 0 ? 100:0}\n      )\n      }\n\n       if (action.selectedTool === \"zoom-in\") {\n        state =  setIn(state, [\"zoomOut\"], !state.zoomOut)\n      }\n      if (action.selectedTool === \"modify-allowed-area\" && !state.allowedArea) {\n        state = setIn(state, [\"allowedArea\"], { x: 0, y: 0, w: 1, h: 1 })\n      }\n      return setIn(state, [\"mode\"], null)\n    }\n    case \"CANCEL\": {\n      const { mode } = state\n      if (mode) {\n        switch (mode.mode) {\n          case \"DRAW_EXPANDING_LINE\":\n          case \"SET_EXPANDING_LINE_WIDTH\":\n          case \"DRAW_POLYGON\": {\n            const { regionId } = mode\n            return modifyRegion(regionId, null)\n          }\n          case \"MOVE_POLYGON_POINT\":\n          case \"RESIZE_BOX\":\n          case \"MOVE_REGION\": {\n            return setIn(state, [\"mode\"], null)\n          }\n          default:\n            return state\n        }\n      }\n      // Close any open boxes\n      const regions: any = activeImage.regions\n      if (regions && regions.some((r) => r.editingLabels)) {\n        return setIn(\n          state,\n          [...pathToActiveImage, \"regions\"],\n          regions.map((r) => ({\n            ...r,\n            editingLabels: false,\n          }))\n        )\n      } else if (regions) {\n        return setIn(\n          state,\n          [...pathToActiveImage, \"regions\"],\n          regions.map((r) => ({\n            ...r,\n            highlighted: false,\n          }))\n        )\n      }\n      break\n    }\n    default:\n      break\n  }\n  return state\n}\n\n\nexport default generalReducer;\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageCanvas/region-tools.js",["247","248"],"// @flow\r\n\r\nexport type BaseRegion = {\r\n  id: string | number,\r\n  cls?: string,\r\n  locked?: boolean,\r\n  visible?: boolean,\r\n  color: string,\r\n  editingLabels?: boolean,\r\n  highlighted?: boolean,\r\n  tags?: Array<string>,\r\n}\r\n\r\nexport type Point = {|\r\n  ...$Exact<BaseRegion>,\r\n  type: \"point\",\r\n  x: number,\r\n  y: number,\r\n|}\r\n\r\nexport type PixelRegion =\r\n  | {|\r\n      ...$Exact<BaseRegion>,\r\n      type: \"pixel\",\r\n      sx: number,\r\n      sy: number,\r\n      w: number,\r\n      h: number,\r\n      src: string,\r\n    |}\r\n  | {|\r\n      ...$Exact<BaseRegion>,\r\n      type: \"pixel\",\r\n      points: Array<[number, number]>,\r\n    |}\r\nexport type Box = {|\r\n  ...$Exact<BaseRegion>,\r\n  type: \"box\",\r\n  x: number,\r\n  y: number,\r\n  w: number,\r\n  h: number,\r\n|}\r\n\r\nexport type Polygon = {|\r\n  ...$Exact<BaseRegion>,\r\n  type: \"polygon\",\r\n  open?: boolean,\r\n  points: Array<[number, number]>,\r\n|}\r\nexport type ExpandingLine = {|\r\n  ...$Exact<BaseRegion>,\r\n  type: \"expanding-line\",\r\n  points: Array<{ x: number, y: number, angle: number, width: number }>,\r\n|}\r\n\r\nexport type KeypointDefinition = {|\r\n  label: string,\r\n  color: string,\r\n  defaultPosition: [number, number],\r\n|}\r\n\r\nexport type KeypointId = string\r\n\r\nexport type KeypointsDefinition = {|\r\n  [id: string]: {\r\n    connections: Array<[KeypointId, KeypointId]>,\r\n    landmarks: {\r\n      [KeypointId]: KeypointDefinition,\r\n    },\r\n  },\r\n|}\r\n\r\nexport type Keypoints = {|\r\n  ...$Exact<BaseRegion>,\r\n  type: \"keypoints\",\r\n  keypointsDefinitionId: string,\r\n  points: {\r\n    [string]: { x: number, y: number },\r\n  },\r\n|}\r\n\r\nexport type Region =\r\n  | Point\r\n  | PixelRegion\r\n  | Box\r\n  | Polygon\r\n  | ExpandingLine\r\n  | Keypoints\r\n\r\nexport const getEnclosingBox = (region: Region) => {\r\n  switch (region.type) {\r\n    case \"polygon\": {\r\n      const box = {\r\n        x: Math.min(...region.points.map(([x, y]) => x)),\r\n        y: Math.min(...region.points.map(([x, y]) => y)),\r\n        w: 0,\r\n        h: 0,\r\n      }\r\n      box.w = Math.max(...region.points.map(([x, y]) => x)) - box.x\r\n      box.h = Math.max(...region.points.map(([x, y]) => y)) - box.y\r\n      return box\r\n    }\r\n    case \"keypoints\": {\r\n      const minX = Math.min(\r\n        ...Object.values(region.points).map(({ x, y }) => x)\r\n      )\r\n      const minY = Math.min(\r\n        ...Object.values(region.points).map(({ x, y }) => y)\r\n      )\r\n      const maxX = Math.max(\r\n        ...Object.values(region.points).map(({ x, y }) => x)\r\n      )\r\n      const maxY = Math.max(\r\n        ...Object.values(region.points).map(({ x, y }) => y)\r\n      )\r\n      return {\r\n        x: minX,\r\n        y: minY,\r\n        w: maxX - minX,\r\n        h: maxY - minY,\r\n      }\r\n    }\r\n    case \"expanding-line\": {\r\n      const box = {\r\n        x: Math.min(...region.points.map(({ x, y }) => x)),\r\n        y: Math.min(...region.points.map(({ x, y }) => y)),\r\n        w: 0,\r\n        h: 0,\r\n      }\r\n      box.w = Math.max(...region.points.map(({ x, y }) => x)) - box.x\r\n      box.h = Math.max(...region.points.map(({ x, y }) => y)) - box.y\r\n      return box\r\n    }\r\n    case \"box\": {\r\n      return { x: region.x, y: region.y, w: region.w, h: region.h }\r\n    }\r\n    case \"point\": {\r\n      return { x: region.x, y: region.y, w: 0, h: 0 }\r\n    }\r\n    default: {\r\n      return { x: 0, y: 0, w: 0, h: 0 }\r\n    }\r\n  }\r\n  throw new Error(\"unknown region\")\r\n}\r\n\r\nexport const moveRegion = (region: Region, x: number, y: number) => {\r\n  switch (region.type) {\r\n    case \"point\": {\r\n      return { ...region, x, y }\r\n    }\r\n    case \"box\": {\r\n      return { ...region, x: x - region.w / 2, y: y - region.h / 2 }\r\n    }\r\n  }\r\n  return region\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/get-implied-video-regions.js",["249"],"// @flow\r\n\r\nimport type { Region } from \"../../ImageCanvas/region-tools.js\"\r\n\r\nconst emptyArr = []\r\n\r\nexport default (\r\n  keyframes: { [string | number]: { regions: Array<Region> } },\r\n  time: number\r\n) => {\r\n  if (keyframes[time || 0]) {\r\n    return keyframes[time || 0].regions\r\n  }\r\n  // Get surrounding video keyframes\r\n  const keyframeTimes = Object.keys(keyframes)\r\n    .map((a) => parseInt(a))\r\n    .filter((a) => !isNaN(a))\r\n  if (keyframeTimes.length === 0) return emptyArr\r\n  keyframeTimes.sort((a, b) => a - b)\r\n  let nextKeyframeTimeIndex = keyframeTimes.findIndex((kt) => kt >= time)\r\n  if (nextKeyframeTimeIndex === -1) {\r\n    return (\r\n      keyframes[keyframeTimes[keyframeTimes.length - 1]].regions || emptyArr\r\n    )\r\n  } else if (nextKeyframeTimeIndex === 0) {\r\n    return emptyArr\r\n  }\r\n\r\n  const t1 = keyframeTimes[nextKeyframeTimeIndex - 1]\r\n  const prevKeyframe = keyframes[t1]\r\n  const t2 = keyframeTimes[nextKeyframeTimeIndex]\r\n  const nextKeyframe = keyframes[t2]\r\n\r\n  const [prevRegionMap, nextRegionMap] = [{}, {}]\r\n  for (const region of prevKeyframe.regions) prevRegionMap[region.id] = region\r\n  for (const region of nextKeyframe.regions) nextRegionMap[region.id] = region\r\n\r\n  const impliedRegions = []\r\n\r\n  // Weighted time coefficients for linear transition\r\n  const w1 = (t2 - time) / (t2 - t1)\r\n  const w2 = 1 - w1\r\n\r\n  for (const regionId in prevRegionMap) {\r\n    const [prev, next] = [prevRegionMap[regionId], nextRegionMap[regionId]]\r\n    if (!next) {\r\n      impliedRegions.push({\r\n        ...prev,\r\n        highlighted: false,\r\n        editingLabels: false,\r\n      })\r\n      continue\r\n    }\r\n    switch (prev.type) {\r\n      case \"point\": {\r\n        impliedRegions.push({\r\n          ...prev,\r\n          highlighted: false,\r\n          editingLabels: false,\r\n          x: prev.x * w1 + next.x * w2,\r\n          y: prev.y * w1 + next.y * w2,\r\n        })\r\n        break\r\n      }\r\n      case \"box\": {\r\n        impliedRegions.push({\r\n          ...prev,\r\n          highlighted: false,\r\n          editingLabels: false,\r\n          x: prev.x * w1 + next.x * w2,\r\n          y: prev.y * w1 + next.y * w2,\r\n          w: prev.w * w1 + next.w * w2,\r\n          h: prev.h * w1 + next.h * w2,\r\n        })\r\n        break\r\n      }\r\n      case \"polygon\": {\r\n        if (next.points.length === prev.points.length) {\r\n          impliedRegions.push({\r\n            ...prev,\r\n            highlighted: false,\r\n            editingLabels: false,\r\n            points: prev.points.map((pp, i) => [\r\n              pp[0] * w1 + next.points[i][0] * w2,\r\n              pp[1] * w1 + next.points[i][1] * w2,\r\n            ]),\r\n          })\r\n        } else {\r\n          impliedRegions.push(prev)\r\n        }\r\n        break\r\n      }\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n  return impliedRegions\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/get-active-image.js",["250"],"import { getIn } from \"seamless-immutable\"\r\n\r\nexport default (state) => {\r\n  let currentImageIndex = null,\r\n    pathToActiveImage,\r\n    activeImage\r\n  if (state.annotationType === \"image\") {\r\n    currentImageIndex = state.selectedImage\r\n    if (currentImageIndex === -1) {\r\n      currentImageIndex = null\r\n      activeImage = null\r\n    } else {\r\n      pathToActiveImage = [\"images\", currentImageIndex]\r\n      activeImage = getIn(state, pathToActiveImage)\r\n    }\r\n  } else if (state.annotationType === \"video\") {\r\n    pathToActiveImage = [\"keyframes\", state.currentVideoTime || 0]\r\n    activeImage = getIn(state, pathToActiveImage) || null\r\n  }\r\n  return { currentImageIndex, pathToActiveImage, activeImage }\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/colors.js",[],"/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/convert-expanding-line-to-polygon.js",["251"],"// @flow\r\n\r\nfunction clamp(num, min, max) {\r\n  return num <= min ? min : num >= max ? max : num\r\n}\r\n\r\nexport default (expandingLine) => {\r\n  const expandingWidth = expandingLine.expandingWidth || 0.005\r\n  const pointPairs = expandingLine.points.map(({ x, y, angle, width }, i) => {\r\n    if (!angle) {\r\n      const n =\r\n        expandingLine.points[clamp(i + 1, 0, expandingLine.points.length - 1)]\r\n      const p =\r\n        expandingLine.points[clamp(i - 1, 0, expandingLine.points.length - 1)]\r\n      angle = Math.atan2(p.x - n.x, p.y - n.y) + Math.PI / 2\r\n    }\r\n    const dx = (Math.sin(angle) * (width || expandingWidth)) / 2\r\n    const dy = (Math.cos(angle) * (width || expandingWidth)) / 2\r\n    return [\r\n      { x: x + dx, y: y + dy },\r\n      { x: x - dx, y: y - dy },\r\n    ]\r\n  })\r\n  const firstSection = pointPairs.map(([p1, p2]) => p1)\r\n  const secondSection = pointPairs.map(([p1, p2]) => p2).asMutable()\r\n  secondSection.reverse()\r\n\r\n  const newPoints = firstSection.concat(secondSection).map(({ x, y }) => [x, y])\r\n\r\n  return {\r\n    ...expandingLine,\r\n    type: \"polygon\",\r\n    open: false,\r\n    points: newPoints,\r\n    unfinished: undefined,\r\n    candidatePoint: undefined,\r\n  }\r\n\r\n  // let { expandingWidth = 0.005, points } = region\r\n  // expandingWidth = points.slice(-1)[0].width || expandingWidth\r\n  // const lastPoint = points.slice(-1)[0]\r\n  // return (\r\n  //   <>\r\n  //     <polygon\r\n  //       points={\r\n  //         .map((p) => `${p.x * iw} ${p.y * ih}`)\r\n  //         .join(\" \")}\r\n  // return {\r\n  //   ...expandingLine,\r\n  //   unfinished: undefined,\r\n  //   candidatePoint: undefined,\r\n  // }\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/reducers/fix-twisted.js",["252"],"// @flow\r\n\r\nexport default (pointsWithAngles) => {\r\n  // Adjacent angles should not have an angular distance of more than Math.PI\r\n  return pointsWithAngles\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/MainLayout/index.js",["253","254","255","256","257","258"],"// @flow\n\nimport React, { useRef, useCallback,useState } from \"react\"\nimport type { Node } from \"react\"\nimport { makeStyles, styled } from \"@material-ui/core/styles\"\nimport ImageCanvas from \"../ImageCanvas\"\nimport type { MainLayoutState } from \"./types\"\nimport useKey from \"use-key-hook\"\nimport getActiveImage from \"../reducers/get-active-image\"\nimport useImpliedVideoRegions from \"./use-implied-video-regions\"\nimport Workspace from \"../Workspace\"\nimport ImageSelector from \"../ImageSelector\"\nimport useEventCallback from \"use-event-callback\"\n\nconst emptyArr = []\n\n\ntype Props = {\n  state: MainLayoutState,\n  RegionEditLabel?: Node,\n  dispatch: (Action) => any,\n  alwaysShowNextButton?: boolean,\n  alwaysShowPrevButton?: boolean,\n  onRegionClassAdded: () => {},\n}\n\nexport const MainLayout = ({\n  state,\n  dispatch,\n  loader,\n  alwaysShowNextButton = false,\n  alwaysShowPrevButton = false,\n  RegionEditLabel,\n  useHistory,\n  renderError,\n  onRegionClassAdded,\n}: Props) => {\n\n  const [mouseEvents, setMouseEvents] = useState();\n\n  const memoizedActionFns = useRef({})\n  const action = (type: string, ...params: Array<string>) => {\n    const fnKey = `${type}(${params.join(\",\")})`\n    if (memoizedActionFns.current[fnKey])\n      return memoizedActionFns.current[fnKey]\n\n    const fn = (...args: any) =>\n      params.length > 0\n        ? dispatch(\n            ({\n              type,\n              ...params.reduce((acc, p, i) => ((acc[p] = args[i]), acc), {}),\n            }: any)\n          )\n        : dispatch({ type, ...args[0] })\n    memoizedActionFns.current[fnKey] = fn\n    return fn\n  }\n\n  const { currentImageIndex, activeImage } = getActiveImage(state)\n  let nextImage\n  if (currentImageIndex !== null) {\n    nextImage = state.images[currentImageIndex + 1]\n  }\n  // console.log('ActiveImage: ',activeImage)\n  useKey(() => dispatch({ type: \"CANCEL\" }), {\n    detectKeys: [27],\n  })\n\n\nconst onRegionChange = useEventCallback((regionData) => {\n    // Persist current polygons as svg encoded data to store.\n    dispatch({ type: \"CHANGE_REGION_DATA\",payload: regionData})\n  })\n\n  const innerContainerRef = useRef()\n\n  let impliedVideoRegions = useImpliedVideoRegions(state)\n\n  const refocusOnMouseEvent = useCallback((e) => {\n    if (!innerContainerRef.current) return\n    if (innerContainerRef.current.contains(document.activeElement)) return\n    if (innerContainerRef.current.contains(e.target)) {\n      innerContainerRef.current.focus()\n      e.target.focus()\n    }\n  }, [])\n\n  const canvas = (\n    <ImageCanvas\n      loader={loader}\n\n      onRegionChange={onRegionChange}\n      key={state.selectedImage}\n      showMask={state.showMask}\n      fullImageSegmentationMode={state.fullImageSegmentationMode}\n      autoSegmentationOptions={state.autoSegmentationOptions}\n      showTags={state.showTags}\n      allowedArea={state.allowedArea}\n      modifyingAllowedArea={state.selectedTool === \"modify-allowed-area\"}\n      regionClsList={state.regionClsList}\n      regionTagList={state.regionTagList}\n      regions={\n        state.annotationType === \"image\"\n          ? activeImage.regions || []\n          : impliedVideoRegions\n      }\n      activeImage={activeImage}\n      realSize={activeImage ? activeImage.realSize : undefined}\n      videoPlaying={state.videoPlaying}\n      onNewImageLoaded={(events) => {\n        dispatch({type:'IMAGE_LOADED',loading:false})\n        setMouseEvents(events)\n      }}\n      imageSrc={state.annotationType === \"image\" ? activeImage.src : null}\n      videoSrc={state.annotationType === \"video\" ? state.videoSrc : null}\n      pointDistancePrecision={state.pointDistancePrecision}\n      createWithPrimary={state.selectedTool.includes(\"create\")}\n      dragWithPrimary={state.selectedTool === \"pan\"}\n      zoomWithPrimary={state.selectedTool === \"zoom\"}\n      videoTime={\n        state.annotationType === \"image\"\n          ? state.selectedImageFrameTime\n          : state.currentVideoTime\n      }\n      selectedTool={state.selectedTool}\n      keypointDefinitions={state.keypointDefinitions}\n      onMouseMove={action(\"MOUSE_MOVE\")}\n      onMouseDown={action(\"MOUSE_DOWN\")}\n      onMouseUp={action(\"MOUSE_UP\")}\n      onChangeRegion={action(\"CHANGE_REGION\", \"region\")}\n      onBeginRegionEdit={action(\"OPEN_REGION_EDITOR\", \"region\")}\n      onCloseRegionEdit={action(\"CLOSE_REGION_EDITOR\", \"region\")}\n      onDeleteRegion={action(\"DELETE_REGION\", \"region\")}\n      onBeginBoxTransform={action(\"BEGIN_BOX_TRANSFORM\", \"box\", \"directions\")}\n      onBeginMovePolygonPoint={action(\n        \"BEGIN_MOVE_POLYGON_POINT\",\n        \"polygon\",\n        \"pointIndex\"\n      )}\n      onBeginMoveKeypoint={action(\n        \"BEGIN_MOVE_KEYPOINT\",\n        \"region\",\n        \"keypointId\"\n      )}\n      onAddPolygonPoint={action(\n        \"ADD_POLYGON_POINT\",\n        \"polygon\",\n        \"point\",\n        \"pointIndex\"\n      )}\n      onSelectRegion={action(\"SELECT_REGION\", \"region\")}\n      onBeginMovePoint={action(\"BEGIN_MOVE_POINT\", \"point\")}\n      onImageLoaded={action(\"IMAGE_LOADED\", \"image\")}\n      RegionEditLabel={RegionEditLabel}\n      onImageOrVideoLoaded={action(\"IMAGE_OR_VIDEO_LOADED\", \"metadata\")}\n      onChangeVideoTime={action(\"CHANGE_VIDEO_TIME\", \"newTime\")}\n      onChangeVideoPlaying={action(\"CHANGE_VIDEO_PLAYING\", \"isPlaying\")}\n      onRegionClassAdded={onRegionClassAdded}\n    />\n  )\n\nconst onClickToolbarItem = useEventCallback((item) => {\n  if (mouseEvents) {\n    if (item.name === 'zoom-in') {\n      mouseEvents.onWheel({deltaY:-0.25},{x:165, y: 237})\n    } else if(item.name === 'zoom-out'){\n      mouseEvents.onWheel({deltaY:0.25},{x:165, y: 237})\n    }\n    else if (item.name === 'polygon') {\n      const image = state.images[currentImageIndex];\n      if (!image.label) {\n        renderError('Please select any label')\n        return;\n      }\n    }\n  }\n\n    dispatch({ type: \"SELECT_TOOL\", selectedTool: item.name })\n  })\n\n\nconst onSelectLabel = useEventCallback((r) => {\n  // console.log('R: ', r);\n  dispatch({ type: \"SELECT_LABEL\", selectedLabel: r })\n})\nconst onChangeObject = useEventCallback((r) => {\n  // console.log('R: ', r);\n  dispatch({ type: \"CHANGE_REGION\", region: r })\n})\n\nconst onSelectObject = useEventCallback((r) => {\n    // console.log('R: ', r);\n    dispatch({ type: \"SELECT_REGION\", region: r })\n    dispatch({type:'SELECT_TOOL',selectedTool: 'polygon'})\n})\nconst onDeleteObject = useEventCallback((r) => {\n  // console.log('R: ', r);\n  dispatch({ type: \"DELETE_REGION\", region: r })\n})\nconst onChangeLabel = useEventCallback((l) => {\n  // console.log('R: ', r);\n  dispatch({ type: \"CHANGE_LABEL\", label: l })\n})\n\nconst onClickLabel = useEventCallback(() => {\n  // console.log('R: ', r);\n  dispatch({ type: \"CLICK_LABEL\"})\n})\n\n\nconst onSubmit = useEventCallback(() => {\n  // console.log('R: ', r);\n  dispatch({ type: \"SUBMIT\"})\n})\n\nconst onClickFooterItem = useEventCallback((item) => {\n\n    dispatch({ type: \"FOOTER_BUTTON_CLICKED\", buttonName: item.name })\n  })\n\n\n  return (\n          <Workspace\n        useHistory={useHistory}\n        activeImage={activeImage}\n        dispatch={dispatch}\n        onSelectLabel={onSelectLabel}\n        onDeleteObject={onDeleteObject}\n                onChangeLabel={onChangeLabel}\n                onChangeObject={onChangeObject}\n        onSelectObject={onSelectObject}\n        onClickLabel={onClickLabel}\n            state={state}\n            footerItems={[\n              { name: \"Prev\" },\n              { name: \"Next\" },\n              { name: \"Undo\" },\n              { name: \"Redo\" },\n\n            ].filter(Boolean)}\n        onClickFooterItem={onClickFooterItem}\n        onSubmit={onSubmit}\n        onClickToolbarItem={onClickToolbarItem}\n        onFilterValueUpdate={(filter)=>dispatch({type:'UPDATE_FILTER',payload:filter})}\n            selectedTools={\n              state.selectedTool\n            }\n        toolbarItems={[\n\n            {\n                name: \"pan\",\n                helperText: \"Drag/Pan\",\n                alwaysShowing: true,\n              },\n              {\n                name: \"zoom-in\",\n                helperText: \"Zoom In\",\n                alwaysShowing: true,\n              },\n\n              {\n                name: \"zoom-out\",\n                helperText: \"Zoom Out\",\n                alwaysShowing: true,\n              },\n              {\n                name: \"brightness\",\n                helperText: \"Brightness\",\n                alwaysShowing: true,\n              },\n              {\n                name: \"contrast\",\n                helperText: \"Contrast\",\n                alwaysShowing: true,\n             },\n             {\n                name: \"inverse\",\n                helperText: \"Inverse\",\n                alwaysShowing: true,\n              },\n              {\n                name: \"polygon\",\n                helperText: \"Polygon\",\n                alwaysShowing: true,\n              },\n              {\n                name: \"draw\",\n                helperText: \"Free Hand\",\n                alwaysShowing: true,\n              },\n\n            ]\n              .filter(Boolean)\n              .filter(\n                (a) => a.alwaysShowing || state.enabledTools.includes(a.name)\n              )}\n              imageSelector={[\n\n          ((state.images && state.images.length) || 0) > 1 && (\n                  <ImageSelector\n                  useHistory={useHistory}\n                key={3}\n                  state={state}\n                  onSelect={(img, position) => {\n                    dispatch({\n                      type: \"SELECT_IMAGE\",\n                      imageIndex:position,\n                      image:  img ,\n                    })\n                  }}\n                  images={state.images}\n                />\n              ),\n\n            ].filter(Boolean)}\n          >\n            {canvas}\n          </Workspace>\n\n  )\n}\n\nexport default MainLayout\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/utils/get-landmarks-with-transform.js",["259"],"// @flow\r\nimport type { KeypointDefinition } from \"../ImageCanvas/region-tools\"\r\n\r\ntype Parameters = {\r\n  center: { x: number, y: number },\r\n  scale: number,\r\n  landmarks: {\r\n    [string]: KeypointDefinition,\r\n  },\r\n}\r\n\r\nexport default ({ center, scale, landmarks }: Parameters) => {\r\n  const points = {}\r\n  for (const [keypointId, { defaultPosition }] of (Object.entries(\r\n    landmarks\r\n  ): any)) {\r\n    points[keypointId] = {\r\n      x: defaultPosition[0] * scale + center.x,\r\n      y: defaultPosition[1] * scale + center.y,\r\n    }\r\n  }\r\n  return points\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/MainLayout/use-implied-video-regions.js",["260"],"// @flow\r\n\r\nimport { useMemo } from \"react\"\r\nimport type { MainLayoutVideoAnnotationState } from \"./types\"\r\nimport getImpliedVideoRegions from \"../reducers/get-implied-video-regions\"\r\n\r\nconst emptyArr = []\r\n\r\nexport default (state: MainLayoutVideoAnnotationState) => {\r\n  if (state.annotationType !== \"video\") return emptyArr\r\n  const { keyframes, currentVideoTime = 0 } = state\r\n  // TODO memoize\r\n  return useMemo(() => getImpliedVideoRegions(keyframes, currentVideoTime), [\r\n    keyframes,\r\n    currentVideoTime,\r\n  ])\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageCanvas/index.js",["261","262","263","264","265","266","267","268","269","270","271"],"// @flow weak\r\n//working without pencil\r\nimport React, {\r\n  useRef,\r\n  useState,\r\n  useLayoutEffect,\r\n  useEffect,\r\n  useMemo,\r\n} from \"react\"\r\nimport type { Node } from \"react\"\r\nimport { Matrix } from \"transformation-matrix-js\"\r\n\r\nimport type {\r\n  Region,\r\n  Point,\r\n  Polygon,\r\n  Box,\r\n  Keypoints,\r\n  KeypointsDefinition,\r\n} from \"./region-tools.js\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport styles from \"./styles\"\r\nimport PreventScrollToParents from \"../PreventScrollToParents\"\r\nimport useWindowSize from \"../hooks/use-window-size.js\"\r\nimport useMouse from \"./use-mouse\"\r\nimport useProjectRegionBox from \"./use-project-box\"\r\nimport useExcludePattern from \"../hooks/use-exclude-pattern\"\r\nimport { useRafState } from \"react-use\"\r\nimport RegionSelectAndTransformBoxes from \"../RegionSelectAndTransformBoxes\"\r\nimport VideoOrImageCanvasBackground from \"../VideoOrImageCanvasBackground\"\r\nimport useEventCallback from \"use-event-callback\"\r\nimport RegionShapes from \"../RegionShapes\"\r\n\r\n\r\nconst useStyles = makeStyles(styles)\r\n\r\ntype Props = {\r\n  regions: Array<Region>,\r\n  imageSrc?: string,\r\n  videoSrc?: string,\r\n  videoTime?: number,\r\n  keypointDefinitions?: KeypointDefinitions,\r\n  onMouseMove?: ({ x: number, y: number }) => any,\r\n  onMouseDown?: ({ x: number, y: number }) => any,\r\n  onMouseUp?: ({ x: number, y: number }) => any,\r\n  dragWithPrimary?: boolean,\r\n  zoomWithPrimary?: boolean,\r\n  createWithPrimary?: boolean,\r\n  showTags?: boolean,\r\n  realSize?: { width: number, height: number, unitName: string },\r\n  showCrosshairs?: boolean,\r\n  showMask?: boolean,\r\n  pointDistancePrecision?: number,\r\n  regionClsList?: Array<string>,\r\n  regionTagList?: Array<string>,\r\n  allowedArea?: { x: number, y: number, w: number, h: number },\r\n  RegionEditLabel?: Node,\r\n  videoPlaying?: boolean,\r\n  zoomOnAllowedArea?: boolean,\r\n  fullImageSegmentationMode?: boolean,\r\n  autoSegmentationOptions?: Object,\r\n  modifyingAllowedArea?: boolean,\r\n\r\n  onChangeRegion: (Region) => any,\r\n  onBeginRegionEdit: (Region) => any,\r\n  onCloseRegionEdit: (Region) => any,\r\n  onDeleteRegion: (Region) => any,\r\n  onBeginBoxTransform: (Box, [number, number]) => any,\r\n  onBeginMovePolygonPoint: (Polygon, index: number) => any,\r\n  onBeginMoveKeypoint: (Keypoints, index: number) => any,\r\n  onAddPolygonPoint: (Polygon, point: [number, number], index: number) => any,\r\n  onSelectRegion: (Region) => any,\r\n  onBeginMovePoint: (Point) => any,\r\n  onImageOrVideoLoaded: ({\r\n    naturalWidth: number,\r\n    naturalHeight: number,\r\n    duration?: number,\r\n  }) => any,\r\n  onChangeVideoTime: (number) => any,\r\n  onRegionClassAdded: () => {},\r\n  onChangeVideoPlaying?: Function,\r\n}\r\n\r\nconst getDefaultMat = (allowedArea = null, { iw, ih } = {}) => {\r\n  let mat = Matrix.from(1, 0, 0, 1, -10, -10)\r\n  if (allowedArea && iw) {\r\n    mat = mat\r\n      .translate(allowedArea.x * iw, allowedArea.y * ih)\r\n      .scaleU(allowedArea.w + 0.05)\r\n  }\r\n  return mat\r\n}\r\n\r\nexport const ImageCanvas = ({\r\n  regions,\r\n  imageSrc,\r\n  activeImage,\r\n  videoSrc,\r\n  videoTime,\r\n  realSize,\r\n  showTags,\r\n  onRegionChange,\r\n  onMouseMove = (p) => null,\r\n  onMouseDown = (p) => null,\r\n  onMouseUp = (p) => null,\r\n  loader,\r\n  dragWithPrimary = false,\r\n  zoomWithPrimary = false,\r\n  createWithPrimary = false,\r\n  pointDistancePrecision = 0,\r\n  onImageLoaded,\r\n  onNewImageLoaded,\r\n  regionClsList,\r\n  regionTagList,\r\n  showCrosshairs,\r\n  allowedArea,\r\n  RegionEditLabel = null,\r\n  videoPlaying = false,\r\n  showMask = true,\r\n  fullImageSegmentationMode,\r\n  autoSegmentationOptions,\r\n  onImageOrVideoLoaded,\r\n  onChangeRegion,\r\n  onBeginRegionEdit,\r\n  onCloseRegionEdit,\r\n  onBeginBoxTransform,\r\n  onBeginMovePolygonPoint,\r\n  onAddPolygonPoint,\r\n  onBeginMoveKeypoint,\r\n  onSelectRegion,\r\n  onBeginMovePoint,\r\n  onDeleteRegion,\r\n  onChangeVideoTime,\r\n  onChangeVideoPlaying,\r\n  onRegionClassAdded,\r\n  zoomOnAllowedArea = true,\r\n  modifyingAllowedArea = false,\r\n  keypointDefinitions,\r\n}: Props) => {\r\n  const classes = useStyles()\r\n\r\n  const canvasEl = useRef(null)\r\n  const layoutParams = useRef({})\r\n  const [dragging, changeDragging] = useRafState(false)\r\n  const [maskImagesLoaded, changeMaskImagesLoaded] = useRafState(0)\r\n  const [zoomStart, changeZoomStart] = useRafState(null)\r\n  const [zoomEnd, changeZoomEnd] = useRafState(null)\r\n  const [mat, changeMat] = useRafState(getDefaultMat())\r\n  const maskImages = useRef({})\r\n  const windowSize = useWindowSize()\r\n\r\n  const getLatestMat = useEventCallback(() => mat)\r\n\r\n\r\n  const { mouseEvents, mousePosition,zoomIn } = useMouse({\r\n    canvasEl,\r\n    dragging,\r\n    mat,\r\n    layoutParams,\r\n    changeMat,\r\n    zoomStart,\r\n    zoomEnd,\r\n    changeZoomStart,\r\n    changeZoomEnd,\r\n    changeDragging,\r\n    zoomWithPrimary,\r\n    dragWithPrimary,\r\n    onMouseMove,\r\n    onMouseDown,\r\n    onMouseUp,\r\n  })\r\n\r\n\r\n  useLayoutEffect(() => changeMat(mat.clone()), [windowSize])\r\n\r\n  const innerMousePos = mat.applyToPoint(\r\n    mousePosition.current.x,\r\n    mousePosition.current.y\r\n  )\r\n\r\n  const projectRegionBox = useProjectRegionBox({ layoutParams, mat })\r\n\r\n  const [imageDimensions, changeImageDimensions] = useState()\r\n  const imageLoaded = Boolean(imageDimensions && imageDimensions.naturalWidth)\r\n\r\n  const onVideoOrImageLoaded = useEventCallback(\r\n    ({ naturalWidth, naturalHeight, duration,width,height }) => {\r\n      const dims = { naturalWidth, naturalHeight, duration,width,height }\r\n      // console.log('DMS', dims);\r\n      if (onImageOrVideoLoaded) onImageOrVideoLoaded(dims)\r\n      changeImageDimensions(dims)\r\n      // Redundant update to fix rerendering issues\r\n      setTimeout(() => changeImageDimensions(dims), 10)\r\n    }\r\n  )\r\n\r\n\r\n\r\n\r\n\r\n  const excludePattern = useExcludePattern()\r\n\r\n  const canvas = canvasEl.current\r\n  if (canvas && imageLoaded) {\r\n    const { clientWidth, clientHeight } = canvas\r\n\r\n    const fitScale = Math.max(\r\n      imageDimensions.naturalWidth / (clientWidth - 20),\r\n      imageDimensions.naturalHeight / (clientHeight - 20)\r\n    )\r\n\r\n    const [iw, ih] = [\r\n      imageDimensions.naturalWidth / fitScale,\r\n      imageDimensions.naturalHeight / fitScale,\r\n    ]\r\n    // console.log('iwih',iw, ih)\r\n    layoutParams.current = {\r\n      iw,\r\n      ih,\r\n      fitScale,\r\n      canvasWidth: clientWidth,\r\n      canvasHeight: clientHeight,\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!imageLoaded) return\r\n    changeMat(\r\n      getDefaultMat(\r\n        zoomOnAllowedArea ? allowedArea : null,\r\n        layoutParams.current\r\n      )\r\n    )\r\n    onNewImageLoaded(mouseEvents)\r\n\r\n    // eslint-disable-next-line\r\n  }, [imageLoaded])\r\n\r\n  useLayoutEffect(() => {\r\n    if (!imageDimensions) return\r\n    const { clientWidth, clientHeight } = canvas\r\n\r\n    const context = canvas.getContext(\"2d\")\r\n\r\n    context.save()\r\n    context.transform(...mat.clone().inverse().toArray())\r\n\r\n    const { iw, ih } = layoutParams.current\r\n\r\n    if (allowedArea) {\r\n      // Pattern to indicate the NOT allowed areas\r\n      const { x, y, w, h } = allowedArea\r\n      context.save()\r\n      context.globalAlpha = 1\r\n      const outer = [\r\n        [0, 0],\r\n        [iw, 0],\r\n        [iw, ih],\r\n        [0, ih],\r\n      ]\r\n      const inner = [\r\n        [x * iw, y * ih],\r\n        [x * iw + w * iw, y * ih],\r\n        [x * iw + w * iw, y * ih + h * ih],\r\n        [x * iw, y * ih + h * ih],\r\n      ]\r\n      context.moveTo(...outer[0])\r\n      outer.forEach((p) => context.lineTo(...p))\r\n      context.lineTo(...outer[0])\r\n      context.closePath()\r\n\r\n      inner.reverse()\r\n      context.moveTo(...inner[0])\r\n      inner.forEach((p) => context.lineTo(...p))\r\n      context.lineTo(...inner[0])\r\n\r\n      context.fillStyle = excludePattern || \"#f00\"\r\n      context.fill()\r\n\r\n      context.restore()\r\n    }\r\n\r\n    context.restore()\r\n  })\r\n\r\n  const { iw, ih } = layoutParams.current\r\n\r\n  let zoomBox =\r\n    !zoomStart || !zoomEnd\r\n      ? null\r\n      : {\r\n          ...mat.clone().inverse().applyToPoint(zoomStart.x, zoomStart.y),\r\n          w: (zoomEnd.x - zoomStart.x) / mat.a,\r\n          h: (zoomEnd.y - zoomStart.y) / mat.d,\r\n        }\r\n  if (zoomBox) {\r\n    if (zoomBox.w < 0) {\r\n      zoomBox.x += zoomBox.w\r\n      zoomBox.w *= -1\r\n    }\r\n    if (zoomBox.h < 0) {\r\n      zoomBox.y += zoomBox.h\r\n      zoomBox.h *= -1\r\n    }\r\n  }\r\n\r\n  const imagePosition = {\r\n    topLeft: mat.clone().inverse().applyToPoint(0, 0),\r\n    bottomRight: mat.clone().inverse().applyToPoint(iw, ih),\r\n  }\r\n\r\n  const highlightedRegion = useMemo(() => {\r\n    const highlightedRegions = regions.filter((r) => r.highlighted)\r\n    if (highlightedRegions.length !== 1) return null\r\n    return highlightedRegions[0]\r\n  }, [regions])\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        cursor: createWithPrimary\r\n          ? \"crosshair\"\r\n          : dragging\r\n          ? \"grabbing\"\r\n          : dragWithPrimary\r\n          ? \"grab\"\r\n          : zoomWithPrimary\r\n          ? mat.a < 1\r\n            ? \"zoom-out\"\r\n            : \"zoom-in\"\r\n          : undefined,\r\n      }}\r\n    >\r\n\r\n      {imageLoaded && !dragging && (\r\n        <RegionSelectAndTransformBoxes\r\n          key=\"regionSelectAndTransformBoxes\"\r\n          regions={\r\n            !modifyingAllowedArea || !allowedArea\r\n              ? regions\r\n              : [\r\n                  {\r\n                    type: \"box\",\r\n                    id: \"$$allowed_area\",\r\n                    cls: \"allowed_area\",\r\n                    highlighted: true,\r\n                    x: allowedArea.x,\r\n                    y: allowedArea.y,\r\n                    w: allowedArea.w,\r\n                    h: allowedArea.h,\r\n                    visible: true,\r\n                    color: \"#ff0\",\r\n                  },\r\n                ]\r\n          }\r\n          mouseEvents={mouseEvents}\r\n          projectRegionBox={projectRegionBox}\r\n          dragWithPrimary={dragWithPrimary}\r\n          createWithPrimary={createWithPrimary}\r\n          zoomWithPrimary={zoomWithPrimary}\r\n          onBeginMovePoint={onBeginMovePoint}\r\n          onSelectRegion={onSelectRegion}\r\n          layoutParams={layoutParams}\r\n          mat={mat}\r\n          onBeginBoxTransform={onBeginBoxTransform}\r\n          onBeginMovePolygonPoint={onBeginMovePolygonPoint}\r\n          onBeginMoveKeypoint={onBeginMoveKeypoint}\r\n          onAddPolygonPoint={onAddPolygonPoint}\r\n        />\r\n      )}\r\n\r\n      {zoomWithPrimary && zoomBox !== null && (\r\n        <div\r\n          key=\"zoomBox\"\r\n          style={{\r\n            position: \"absolute\",\r\n            zIndex: 1,\r\n            border: \"1px solid #fff\",\r\n            pointerEvents: \"none\",\r\n            left: zoomBox.x,\r\n            top: zoomBox.y,\r\n            width: zoomBox.w,\r\n            height: zoomBox.h,\r\n          }}\r\n        />\r\n      )}\r\n\r\n      <PreventScrollToParents\r\n        style={{ width: \"100%\", height: \"100%\" }}\r\n        {...mouseEvents}\r\n      >\r\n        <>\r\n          {/* {fullImageSegmentationMode && (\r\n            <ImageMask\r\n              hide={!showMask}\r\n              autoSegmentationOptions={autoSegmentationOptions}\r\n              imagePosition={imagePosition}\r\n              regionClsList={regionClsList}\r\n              imageSrc={imageSrc}\r\n              regions={regions}\r\n            />\r\n          )} */}\r\n          <canvas\r\n            style={{ opacity: 0.25 }}\r\n            className={classes.canvas}\r\n            ref={canvasEl}\r\n          />\r\n          <RegionShapes\r\n            mat={mat}\r\n            keypointDefinitions={keypointDefinitions}\r\n            imagePosition={imagePosition}\r\n            regions={regions}\r\n            onRegionChange={onRegionChange}\r\n            fullSegmentationMode={fullImageSegmentationMode}\r\n          />\r\n          <VideoOrImageCanvasBackground\r\n            videoPlaying={videoPlaying}\r\n            imagePosition={imagePosition}\r\n            mouseEvents={mouseEvents}\r\n            onLoad={onVideoOrImageLoaded}\r\n            videoTime={videoTime}\r\n            loader={loader}\r\n            videoSrc={videoSrc}\r\n            activeImage={activeImage}\r\n            imageSrc={imageSrc}\r\n            useCrossOrigin={fullImageSegmentationMode}\r\n            onChangeVideoTime={onChangeVideoTime}\r\n            onChangeVideoPlaying={onChangeVideoPlaying}\r\n          />\r\n        </>\r\n      </PreventScrollToParents>\r\n      <div className={classes.zoomIndicator}>\r\n        {((1 / mat.a) * 100).toFixed(0)}%\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ImageCanvas\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/index.js",[],"/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageSelector/index.js",["272","273"],"// @flow\n\nimport React, { memo,useEffect } from \"react\"\nimport Container from \"./Container\"\nimport CollectionsIcon from \"@material-ui/icons/Folder\"\nimport { red } from \"@material-ui/core/colors\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport isEqual from \"lodash/isEqual\"\nimport {Link,useParams } from 'react-router-dom';\n\n\nexport const ImageSelectorSidebarBox = ({ images, onSelect,state,useHistory }) => {\n  const history = useHistory();\n  const jobName = state.jobName;\n  const {job,asset} = useParams();\n\n\n  const handleRouteChange = () => {\n      if (asset) {\n        // Check if we have given asset in images store\n        let imageIndex = images.findIndex(image => image.name === asset);\n\n        if (imageIndex >= 0) {\n          // Update current asset to asset matched\n          setTimeout(() => {\n            onSelect(images[imageIndex], imageIndex)\n          }, 0);\n        } else {\n          // No asset found in images store, fallback to 1st image.\n          history.push(images[0].name)\n        }\n      }\n      else {\n        // No asset is given, fallback to 1st image\n        history.push(images[0].name)\n      }\n  }\n\n  useEffect(() => {\n    /**\n       * Do this once just before component is mounted.\n       * 1. Check if annotator has asset in search params\n       * 2. Set the annotator selected image to matched image.\n       * 3.Otherwise fallback to set first image\n       * 4.Set first image of annotator as selected image if no asset name is given.\n       *  */\n    handleRouteChange();\n\n    // Listen for back button navigation\n    history.listen(() => {\n       const { location: { pathname } } = history;\n      let assetName = pathname.split('/')[3];\n      if(assetName) {\n        let imageIndex = images.findIndex(image => image.name === assetName);\n        if(imageIndex >= 0) {\n          onSelect(images[imageIndex], imageIndex)\n        }else{\n          onSelect(images[0], 0)\n        }\n      }\n    });\n  },[])\n\n\n\n  return (\n    <Container\n      title={jobName || 'Job Name'}\n      subTitle={`(${images.length})`}\n      icon={<CollectionsIcon style={{ color: red[700] }} />}\n    >\n      <div>\n        <ul className=\"dpfSidelist\">\n          {images.map((img, i) => (\n            <Link\n\n              to={`/annotate/${jobName}/${img.name}`}\n              className={\n                `imageListItem ${i === state.selectedImage ? 'imageSelectItem' : ''}`\n              }\n              onClick={() => onSelect(img, i)}\n              key={i}>\n              {/* <img className={classes.img} src={img.src} /> */}\n              <ListItemText\n                primary={img.name}\n              />\n            </Link>\n          ))}\n        </ul>\n      </div>\n    </Container>\n  )\n}\n\nconst mapUsedImageProps = (a) => [a.name, (a.regions || []).length, a.src]\n\nexport default memo(ImageSelectorSidebarBox, (prevProps, nextProps) => {\n\n  return isEqual(\n    prevProps.images.map(mapUsedImageProps),\n    nextProps.images.map(mapUsedImageProps),\n  ) && isEqual(\n    prevProps.state.selectedImage,\n    nextProps.state.selectedImage,\n  )\n }\n\n)\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/hooks/use-window-size.js",["274"],"// @flow\r\n\r\nimport { useEffect } from \"react\"\r\n\r\nimport { useRafState, useInterval } from \"react-use\"\r\n\r\nconst useWindowSize = (initialWidth = Infinity, initialHeight = Infinity) => {\r\n  const isClient = typeof window !== \"undefined\"\r\n  const [state, setState] = useRafState({\r\n    width: isClient ? window.innerWidth : initialWidth,\r\n    height: isClient ? window.innerHeight : initialHeight,\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (!isClient) return\r\n    const handler = () => {\r\n      setState({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      })\r\n    }\r\n\r\n    window.addEventListener(\"resize\", handler)\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handler)\r\n    }\r\n  }, [])\r\n\r\n  useInterval(() => {\r\n    if (!isClient) return\r\n    if (\r\n      window.innerWidth !== state.width ||\r\n      window.innerHeight !== state.height\r\n    ) {\r\n      setState({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      })\r\n    }\r\n  }, 100)\r\n\r\n  return state\r\n}\r\n\r\nexport default useWindowSize\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageCanvas/styles.js",["275","276"],"import { grey } from \"@material-ui/core/colors\"\r\n\r\nexport default {\r\n  canvas: {\r\n    width: \"100%\", height: \"100%\", position: \"relative\",\r\n    zIndex: 1,\r\n    maxHeight: '55vh'   //Canvas height\r\n  },\r\n  zoomIndicator: {\r\n    position: \"absolute\",\r\n    bottom: 16,\r\n    right: 0,\r\n    backgroundColor: \"rgba(0,0,0,0.4)\",\r\n    color: \"#fff\",\r\n    opacity: 0.5,\r\n    fontWeight: \"bolder\",\r\n    fontSize: 14,\r\n    padding: 4,\r\n  },\r\n  fixedRegionLabel: {\r\n    position: \"absolute\",\r\n    zIndex: 10,\r\n    top: 10,\r\n    left: 10,\r\n    opacity: 0.5,\r\n    transition: \"opacity 500ms\",\r\n    \"&:hover\": {\r\n      opacity: 1,\r\n    },\r\n  },\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageCanvas/use-mouse.js",["277"],"// @flow weak\r\n\r\nimport { useRef } from \"react\"\r\nimport { Matrix } from \"transformation-matrix-js\"\r\n\r\nconst getDefaultMat = () => Matrix.from(1, 0, 0, 1, -10, -10)\r\n\r\nexport default ({\r\n  canvasEl,\r\n  changeMat,\r\n  changeDragging,\r\n  zoomStart,\r\n  zoomEnd,\r\n  changeZoomStart,\r\n  changeZoomEnd,\r\n  layoutParams,\r\n  zoomWithPrimary,\r\n  dragWithPrimary,\r\n  mat,\r\n  onMouseMove,\r\n  onMouseUp,\r\n  onMouseDown,\r\n  dragging,\r\n}) => {\r\n  const mousePosition = useRef({ x: 0, y: 0 })\r\n  const prevMousePosition = useRef({ x: 0, y: 0 })\r\n\r\n  const zoomIn = (direction, point) => {\r\n    const [mx, my] = [point.x, point.y]\r\n    let scale =\r\n      typeof direction === \"object\" ? direction.to / mat.a : 1 + 0.2 * direction\r\n\r\n    // NOTE: We're mutating mat here\r\n    mat.translate(mx, my).scaleU(scale)\r\n    if (mat.a > 2) mat.scaleU(2 / mat.a)\r\n    if (mat.a < 0.05) mat.scaleU(0.05 / mat.a)\r\n    mat.translate(-mx, -my)\r\n\r\n    changeMat(mat.clone())\r\n  }\r\n\r\n  const mouseEvents = {\r\n    onMouseMove: (e) => {\r\n      const { left, top } = canvasEl.current.getBoundingClientRect()\r\n      prevMousePosition.current.x = mousePosition.current.x\r\n      prevMousePosition.current.y = mousePosition.current.y\r\n      mousePosition.current.x = e.clientX - left\r\n      mousePosition.current.y = e.clientY - top\r\n\r\n      const projMouse = mat.applyToPoint(\r\n        mousePosition.current.x,\r\n        mousePosition.current.y\r\n      )\r\n\r\n      if (zoomWithPrimary && zoomStart) {\r\n        changeZoomEnd(projMouse)\r\n      }\r\n\r\n      const { iw, ih } = layoutParams.current\r\n      onMouseMove({ x: projMouse.x / iw, y: projMouse.y / ih })\r\n\r\n      if (dragging) {\r\n        mat.translate(\r\n          prevMousePosition.current.x - mousePosition.current.x,\r\n          prevMousePosition.current.y - mousePosition.current.y\r\n        )\r\n\r\n        changeMat(mat.clone())\r\n      }\r\n      e.preventDefault()\r\n    },\r\n    onMouseDown: (e, specialEvent = {}) => {\r\n      e.preventDefault()\r\n\r\n      if (\r\n        e.button === 1 ||\r\n        e.button === 2 ||\r\n        (e.button === 0 && dragWithPrimary)\r\n      )\r\n        return changeDragging(true)\r\n\r\n      const projMouse = mat.applyToPoint(\r\n        mousePosition.current.x,\r\n        mousePosition.current.y\r\n      )\r\n      if (zoomWithPrimary && e.button === 0) {\r\n        changeZoomStart(projMouse)\r\n        changeZoomEnd(projMouse)\r\n        return\r\n      }\r\n      if (e.button === 0) {\r\n        if (specialEvent.type === \"resize-box\") {\r\n          // onResizeBox()\r\n        }\r\n        if (specialEvent.type === \"move-region\") {\r\n          // onResizeBox()\r\n        }\r\n        const { iw, ih } = layoutParams.current\r\n        onMouseDown({ x: projMouse.x / iw, y: projMouse.y / ih })\r\n      }\r\n    },\r\n    onMouseUp: (e) => {\r\n      e.preventDefault()\r\n      const projMouse = mat.applyToPoint(\r\n        mousePosition.current.x,\r\n        mousePosition.current.y\r\n      )\r\n      if (zoomStart) {\r\n        const zoomEnd = projMouse\r\n        if (\r\n          Math.abs(zoomStart.x - zoomEnd.x) < 10 &&\r\n          Math.abs(zoomStart.y - zoomEnd.y) < 10\r\n        ) {\r\n          if (mat.a < 1) {\r\n            zoomIn({ to: 1 }, mousePosition.current)\r\n          } else {\r\n            zoomIn({ to: 0.25 }, mousePosition.current)\r\n          }\r\n        } else {\r\n          const { iw, ih } = layoutParams.current\r\n\r\n          if (zoomStart.x > zoomEnd.x) {\r\n            ;[zoomStart.x, zoomEnd.x] = [zoomEnd.x, zoomStart.x]\r\n          }\r\n          if (zoomStart.y > zoomEnd.y) {\r\n            ;[zoomStart.y, zoomEnd.y] = [zoomEnd.y, zoomStart.y]\r\n          }\r\n\r\n          // The region defined by zoomStart and zoomEnd should be the new transform\r\n          let scale = Math.min(\r\n            (zoomEnd.x - zoomStart.x) / iw,\r\n            (zoomEnd.y - zoomStart.y) / ih\r\n          )\r\n          if (scale < 0.05) scale = 0.05\r\n          if (scale > 10) scale = 10\r\n\r\n          const newMat = getDefaultMat()\r\n            .translate(zoomStart.x, zoomStart.y)\r\n            .scaleU(scale)\r\n\r\n          changeMat(newMat.clone())\r\n        }\r\n\r\n        changeZoomStart(null)\r\n        changeZoomEnd(null)\r\n      }\r\n      if (\r\n        e.button === 1 ||\r\n        e.button === 2 ||\r\n        (e.button === 0 && dragWithPrimary)\r\n      )\r\n        return changeDragging(false)\r\n      if (e.button === 0) {\r\n        const { iw, ih } = layoutParams.current\r\n        onMouseUp({ x: projMouse.x / iw, y: projMouse.y / ih })\r\n      }\r\n    },\r\n    onWheel: (e, position) => {\r\n\r\n      const direction = e.deltaY > 0 ? 1 : e.deltaY < 0 ? -1 : 0\r\n      zoomIn(direction, position || prevMousePosition.current)\r\n      // e.preventDefault()\r\n\r\n    },\r\n    onContextMenu: (e) => {\r\n      e.preventDefault()\r\n    },\r\n  }\r\n  return { mouseEvents, mousePosition,zoomIn }\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageCanvas/use-project-box.js",["278"],"// @flow weak\r\nimport useEventCallback from \"use-event-callback\"\r\nimport { getEnclosingBox } from \"./region-tools.js\"\r\n\r\nexport default ({ layoutParams, mat }) => {\r\n  return useEventCallback((r) => {\r\n    const { iw, ih } = layoutParams.current\r\n    const bbox = getEnclosingBox(r)\r\n    const margin = r.type === \"point\" ? 15 : 2\r\n    const cbox = {\r\n      x: bbox.x * iw - margin,\r\n      y: bbox.y * ih - margin,\r\n      w: bbox.w * iw + margin * 2,\r\n      h: bbox.h * ih + margin * 2,\r\n    }\r\n    const pbox = {\r\n      ...mat.clone().inverse().applyToPoint(cbox.x, cbox.y),\r\n      w: cbox.w / mat.a,\r\n      h: cbox.h / mat.d,\r\n    }\r\n    return pbox\r\n  })\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/hooks/use-exclude-pattern.js",["279"],"// @flow weak\r\n\r\nimport { useRef } from \"react\"\r\nimport excludePatternSrc from \"./xpattern.js\"\r\n\r\nexport default () => {\r\n  const excludePattern = useRef(null)\r\n  if (excludePattern.current === null) {\r\n    excludePattern.current = {\r\n      image: new Image(),\r\n      pattern: null,\r\n    }\r\n    const canvas = document.createElement(\"canvas\")\r\n    canvas.width = 100\r\n    canvas.height = 100\r\n    const context = canvas.getContext(\"2d\")\r\n\r\n    excludePattern.current.image.onload = () => {\r\n      excludePattern.current.pattern = context.createPattern(\r\n        excludePattern.current.image,\r\n        \"repeat\"\r\n      )\r\n    }\r\n    excludePattern.current.image.src = excludePatternSrc\r\n  }\r\n  return excludePattern.current.pattern\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/ImageSelector/Container.js",["280"],"// @flow\r\n\r\nimport React, { useState, memo } from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport { grey } from \"@material-ui/core/colors\"\r\nimport classnames from \"classnames\"\r\nimport useEventCallback from \"use-event-callback\"\r\nimport Typography from \"@material-ui/core/Typography\"\r\n\r\nconst useStyles = makeStyles({\r\n\r\n  header: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n\r\n    paddingRight: 16,\r\n  },\r\n  title: {\r\n    fontSize: 14,\r\n    fontWeight: \"bold\",\r\n    flexGrow: 1,\r\n    paddingLeft: 8,\r\n    color: grey[800],\r\n    \"& span\": {\r\n      color: grey[600],\r\n      fontSize: 12,\r\n    },\r\n  },\r\n  expandButton: {\r\n    padding: 0,\r\n    width: 30,\r\n    height: 30,\r\n    \"& .icon\": {\r\n      marginTop: -6,\r\n      width: 20,\r\n      height: 20,\r\n      transition: \"500ms transform\",\r\n      \"&.expanded\": {\r\n        transform: \"rotate(180deg)\",\r\n      },\r\n    },\r\n  },\r\n  expandedContent: {\r\n\r\n    \"&.noScroll\": {\r\n      overflowY: \"visible\",\r\n      overflow: \"visible\",\r\n    },\r\n  },\r\n})\r\n\r\nexport const SidebarBox = ({\r\n  icon,\r\n  title,\r\n  subTitle,\r\n  children,\r\n  noScroll = false,\r\n  expandedByDefault = false,\r\n}) => {\r\n  const classes = useStyles()\r\n  const content = (\r\n    <div\r\n      className={classnames(classes.expandedContent, noScroll && \"noScroll\")}\r\n    >\r\n      {children}\r\n    </div>\r\n  )\r\n\r\n  const [expanded, changeExpanded] = useState(expandedByDefault)\r\n  const toggleExpanded = useEventCallback(() => changeExpanded(!expanded))\r\n\r\n\r\n  return (\r\n    <div className=\"dpfSidebar\">\r\n      <div className=\"listHeader\">\r\n        {icon }\r\n        <Typography className=\"\">\r\n          {title} <span>{subTitle}</span>\r\n        </Typography>\r\n\r\n      </div>\r\n      {\r\n        content\r\n      }\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(\r\n  SidebarBox,\r\n  (prev, next) => prev.title === next.title && prev.children === next.children\r\n)\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/hooks/xpattern.js",["281"],"export default `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4wMSAxY5oG+lzgAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAcSURBVAjXY/jPwPCfAQnA+TAGugLcAhhakRUAAK3lEe8m9qZhAAAAAElFTkSuQmCC`\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/PreventScrollToParents/index.js",[],"/home/compaq/Projects/Danny/react-annotator/src/annotator/VideoOrImageCanvasBackground/index.js",["282","283","284","285"],"// @flow weak\n\nimport React, { useRef, useEffect, useMemo, useState } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useEventCallback from \"use-event-callback\"\n\n\n\nconst Video = styled(\"video\")({\n  zIndex: 0,\n  position: \"absolute\",\n})\n\nconst StyledImage = styled(\"img\")({\n  zIndex: 0,\n  position: \"absolute\",\n})\n\nconst Error = styled(\"div\")({\n  zIndex: 0,\n  position: \"absolute\",\n  left: 0,\n  right: 0,\n  bottom: 0,\n  top: 0,\n  backgroundColor: \"rgba(255,0,0,0.2)\",\n  color: \"#ff0000\",\n  fontWeight: \"bold\",\n  whiteSpace: \"pre-wrap\",\n  padding: 50,\n})\n\nexport default ({\n  imagePosition,\n  mouseEvents,\n  videoTime,\n  loader:Loader,\n  activeImage,\n  videoSrc,\n  imageSrc,\n  onLoad,\n  useCrossOrigin = false,\n  videoPlaying,\n  onChangeVideoTime,\n  onChangeVideoPlaying,\n}) => {\n\n  const videoRef = useRef()\n  const imageRef = useRef()\n  const [error, setError] = useState()\n\n  useEffect(() => {\n    if (!videoPlaying && videoRef.current) {\n      videoRef.current.currentTime = (videoTime || 0) / 1000\n    }\n  }, [videoTime])\n  useEffect(() => {\n    let renderLoopRunning = false\n    if (videoRef.current) {\n      if (videoPlaying) {\n        videoRef.current.play()\n        renderLoopRunning = true\n\n      } else {\n        videoRef.current.pause()\n      }\n    }\n\n    function checkForNewFrame() {\n      if (!renderLoopRunning) return\n      if (!videoRef.current) return\n      const newVideoTime = Math.floor(videoRef.current.currentTime * 1000)\n      if (videoTime !== newVideoTime) {\n        onChangeVideoTime(newVideoTime)\n      }\n      if (videoRef.current.paused) {\n        renderLoopRunning = false\n        onChangeVideoPlaying(false)\n      }\n      requestAnimationFrame(checkForNewFrame)\n    }\n    checkForNewFrame()\n\n    return () => {\n      renderLoopRunning = false\n    }\n  }, [videoPlaying])\n\n  const onLoadedVideoMetadata = useEventCallback((event) => {\n    const videoElm = event.currentTarget\n    videoElm.currentTime = (videoTime || 0) / 1000\n    if (onLoad)\n      onLoad({\n        naturalWidth: videoElm.videoWidth,\n        naturalHeight: videoElm.videoHeight,\n        videoElm: videoElm,\n        duration: videoElm.duration,\n      })\n  })\n  const onImageLoaded = useEventCallback((event) => {\n    const imageElm = event.currentTarget\n    // debugger;\n    if (onLoad)\n      onLoad({\n        naturalWidth: imageElm.naturalWidth,\n        naturalHeight: imageElm.naturalHeight,\n        imageElm,\n      })\n  })\n  const onImageError = useEventCallback((event) => {\n    setError(\n      `Could not load image\\n\\nMake sure your image works by visiting ${\n        imageSrc || videoSrc\n      } in a web browser. If that URL works, the server hosting the URL may be not allowing you to access the image from your current domain. Adjust server settings to enable the image to be viewed.${\n        !useCrossOrigin\n          ? \"\"\n          : `\\n\\nYour image may be blocked because it's not being sent with CORs headers. To do pixel segmentation, browser web security requires CORs headers in order for the algorithm to read the pixel data from the image. CORs headers are easy to add if you're using an S3 bucket or own the server hosting your images.`\n      }\\n\\n If you need a hand, reach out to the community at universaldatatool.slack.com`\n    )\n  })\n\n  const stylePosition = useMemo(() => {\n\n    let width = imagePosition.bottomRight.x - imagePosition.topLeft.x\n    let height = imagePosition.bottomRight.y - imagePosition.topLeft.y\n    return {\n      imageRendering: \"pixelated\",\n      left: imagePosition.topLeft.x,\n      top: imagePosition.topLeft.y,\n      width: isNaN(width) ? 0 : width,\n      height: isNaN(height) ? 0 : height,\n    }\n  }, [\n    imagePosition.topLeft.x,\n    imagePosition.topLeft.y,\n    imagePosition.bottomRight.x,\n      imagePosition.bottomRight.y,\n      activeImage.filter\n  ])\n  const filter = activeImage.filter;\n\n\n\n  if (!videoSrc && !imageSrc)\n    return <Error>No imageSrc or videoSrc provided</Error>\n\n  if (error) return <Error>{error}</Error>\n\n  return imageSrc && videoTime === undefined ? (\n    <div>\n\n     {\n       Loader && (\n    <Loader\n       loading={activeImage.loading === false ? false:true}\n     />\n       )\n     }\n\n\n    <StyledImage\n      {...mouseEvents}\n      src={imageSrc}\n      ref={imageRef}\n      style={{\n        ...stylePosition, filter: filter ? `contrast(${filter['contrast'] || 1}) brightness(${filter[\"brightness\"] || 100}%) invert(${filter['inverse'] || 0})` :''\n      }}\n      onLoad={onImageLoaded}\n      onError={onImageError}\n      crossOrigin={useCrossOrigin ? \"anonymous\" : undefined}\n      />\n    </div>\n\n  ) : (\n    <Video\n      {...mouseEvents}\n      ref={videoRef}\n      style={stylePosition}\n      onLoadedMetadata={onLoadedVideoMetadata}\n      src={videoSrc || imageSrc}\n    />\n  )\n}\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/RegionSelectAndTransformBoxes/index.js",["286","287","288"],"import React, { Fragment, memo } from \"react\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport PreventScrollToParents from \"../PreventScrollToParents\"\r\n\r\nconst TransformGrabber = styled(\"div\")({\r\n  width: 8,\r\n  height: 8,\r\n  zIndex: 2,\r\n  border: \"2px solid #FFF\",\r\n  position: \"absolute\",\r\n})\r\n\r\nconst boxCursorMap = [\r\n  [\"nw-resize\", \"n-resize\", \"ne-resize\"],\r\n  [\"w-resize\", \"grab\", \"e-resize\"],\r\n  [\"sw-resize\", \"s-resize\", \"se-resize\"],\r\n]\r\n\r\nconst arePropsEqual = (prev, next) => {\r\n  return (\r\n    prev.region === next.region &&\r\n    prev.dragWithPrimary === next.dragWithPrimary &&\r\n    prev.createWithPrimary === next.createWithPrimary &&\r\n    prev.zoomWithPrimary === next.zoomWithPrimary &&\r\n    prev.mat === next.mat\r\n  )\r\n}\r\n\r\nexport const RegionSelectAndTransformBox = memo(\r\n  ({\r\n    region: r,\r\n    mouseEvents,\r\n    projectRegionBox,\r\n    dragWithPrimary,\r\n    createWithPrimary,\r\n    zoomWithPrimary,\r\n    onBeginMovePoint,\r\n    onSelectRegion,\r\n    layoutParams,\r\n    fullImageSegmentationMode = false,\r\n    mat,\r\n    onBeginBoxTransform,\r\n    onBeginMovePolygonPoint,\r\n    onBeginMoveKeypoint,\r\n    onAddPolygonPoint,\r\n  }) => {\r\n    const pbox = projectRegionBox(r)\r\n    const { iw, ih } = layoutParams.current\r\n    return (\r\n      <Fragment>\r\n          {r.type === \"polygon\" &&\r\n            !dragWithPrimary &&\r\n            !zoomWithPrimary &&\r\n            !r.locked &&\r\n            r.highlighted &&\r\n            r.points.map(([px, py], i) => {\r\n              const proj = mat\r\n                .clone()\r\n                .inverse()\r\n                .applyToPoint(px * iw, py * ih)\r\n              return (\r\n                <TransformGrabber\r\n                  key={i}\r\n                  {...mouseEvents}\r\n                  onMouseDown={(e) => {\r\n                    if (e.button === 0 && (!r.open || i === 0))\r\n                      return onBeginMovePolygonPoint(r, i)\r\n                    mouseEvents.onMouseDown(e)\r\n                  }}\r\n                  style={{\r\n                    cursor: !r.open ? \"move\" : i === 0 ? \"pointer\" : undefined,\r\n                    zIndex: 10,\r\n                    pointerEvents:\r\n                      r.open && i === r.points.length - 1 ? \"none\" : undefined,\r\n                    left: proj.x - 4,\r\n                    top: proj.y - 4,\r\n                  }}\r\n                />\r\n              )\r\n            })}\r\n          {r.type === \"polygon\" &&\r\n            r.highlighted &&\r\n            !dragWithPrimary &&\r\n            !zoomWithPrimary &&\r\n            !r.locked &&\r\n            !r.open &&\r\n            r.points.length > 1 &&\r\n            r.points\r\n              .map((p1, i) => [p1, r.points[(i + 1) % r.points.length]])\r\n              .map(([p1, p2]) => [(p1[0] + p2[0]) / 2, (p1[1] + p2[1]) / 2])\r\n              .map((pa, i) => {\r\n                const proj = mat\r\n                  .clone()\r\n                  .inverse()\r\n                  .applyToPoint(pa[0] * iw, pa[1] * ih)\r\n                return (\r\n                  <TransformGrabber\r\n                    key={i}\r\n                    {...mouseEvents}\r\n                    onMouseDown={(e) => {\r\n                      if (e.button === 0) return onAddPolygonPoint(r, pa, i + 1)\r\n                      mouseEvents.onMouseDown(e)\r\n                    }}\r\n                    style={{\r\n                      cursor: \"copy\",\r\n                      zIndex: 10,\r\n                      left: proj.x - 4,\r\n                      top: proj.y - 4,\r\n                      border: \"2px dotted #fff\",\r\n                      opacity: 0.5,\r\n                    }}\r\n                  />\r\n                )\r\n              })}\r\n      </Fragment>\r\n    )\r\n  },\r\n  arePropsEqual\r\n)\r\n\r\nexport const RegionSelectAndTransformBoxes = memo(\r\n  (props) => {\r\n    return props.regions\r\n      .filter((r) => r.visible || r.visible === undefined)\r\n      .filter((r) => !r.locked)\r\n      .map((r, i) => {\r\n        return <RegionSelectAndTransformBox key={r.id} {...props} region={r} />\r\n      })\r\n  },\r\n  (n, p) => n.regions === p.regions && n.mat === p.mat\r\n)\r\n\r\nexport default RegionSelectAndTransformBoxes\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/RegionShapes/index.js",["289","290","291"],"// @flow\n\nimport React, { memo,useEffect } from \"react\"\nimport colorAlpha from \"color-alpha\"\n\nfunction clamp(num, min, max) {\n  return num <= min ? min : num >= max ? max : num\n}\n\nconst RegionComponents = {\n\n  polygon: memo(({ region, iw, ih, fullSegmentationMode }) => {\n    const Component = region.open ? \"polyline\" : \"polygon\"\n    const alphaBase = fullSegmentationMode ? 0.5 : 1\n    return (\n      <Component\n        points={region.points\n          .map(([x, y]) => [x * iw, y * ih])\n          .map((a) => a.join(\" \"))\n          .join(\" \")}\n        strokeWidth={0}\n        stroke={colorAlpha(region.color, 0.75)}\n        fill={colorAlpha(region.color, 0.75)}\n      />\n    )\n  })\n}\n\nexport const WrappedRegionList = memo(\n  ({ regions, keypointDefinitions, iw, ih, fullSegmentationMode }) => {\n    return regions\n      .filter((r) => r.visible !== false)\n      .map((r) => {\n        const Component = RegionComponents[r.type]\n        return (\n          <Component\n            key={r.id}\n            region={r}\n            iw={iw}\n            ih={ih}\n            keypointDefinitions={keypointDefinitions}\n            fullSegmentationMode={fullSegmentationMode}\n          />\n        )\n      })\n  },\n  (n, p) => n.regions === p.regions && n.iw === p.iw && n.ih === p.ih\n)\n\nexport const RegionShapes = ({\n  mat,\n  imagePosition,\n  regions = [],\n  keypointDefinitions,\n  fullSegmentationMode,\n  onRegionChange,\n}) => {\n  const svgRef = React.useRef(null);\n  const svg = svgRef.current;\n  const iw = imagePosition.bottomRight.x - imagePosition.topLeft.x\n  const ih = imagePosition.bottomRight.y - imagePosition.topLeft.y\n  useEffect(() => {\n    if (svg) {\n      //Do this when image regions are changed\n      /**\n       * 1.Clone svg dom node. (regions are drawn as svg's path)\n       * 2.Reset top and left set by pan control to 0\n       * 3.Serialize and encode cloned node to string\n       * 4.Persist encoded svg data to store\n       *  */\n      var newSvg = svg.cloneNode(true);\n      newSvg.style.top= '0px'\n      newSvg.style.left = '0px'\n      var s = new XMLSerializer().serializeToString(newSvg);\n      var encodedData = window.btoa(s);\n      onRegionChange(encodedData);\n    }\n  },[regions]);\n\n  if (isNaN(iw) || isNaN(ih)) return null\n\n\n\n  return (\n    <svg\n      ref={svgRef}\n      width={iw}\n      height={ih}\n      style={{\n        position: \"absolute\",\n        zIndex: 2,\n        left: imagePosition.topLeft.x,\n        top: imagePosition.topLeft.y,\n        pointerEvents: \"none\",\n        width: iw,\n        height: ih,\n      }}\n    >\n      <WrappedRegionList\n        key=\"wrapped-region-list\"\n        regions={regions}\n        iw={iw}\n        ih={ih}\n        keypointDefinitions={keypointDefinitions}\n        fullSegmentationMode={fullSegmentationMode}\n      />\n    </svg>\n  )\n}\n\nexport default RegionShapes\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/LeftSidebar/index.js",["292","293","294","295","296","297","298","299","300","301","302","303","304"],"import React, { useReducer, useEffect,useState, useMemo,memo } from \"react\"\r\nimport ButtonBase from \"@material-ui/core/ButtonBase\"\r\nimport ExpandIcon from \"@material-ui/icons/KeyboardArrowLeft\"\r\nimport ContractIcon from \"@material-ui/icons/KeyboardArrowRight\"\r\nimport { grey } from \"@material-ui/core/colors\"\r\nimport { makeStyles, styled } from \"@material-ui/core/styles\"\r\nimport RegionIcon from \"@material-ui/icons/PictureInPicture\"\r\nimport Grid from \"@material-ui/core/Grid\"\r\nimport ReorderIcon from \"@material-ui/icons/SwapVert\"\r\nimport PieChartIcon from \"@material-ui/icons/PieChart\"\r\nimport TrashIcon from \"@material-ui/icons/Delete\"\r\nimport LockIcon from \"@material-ui/icons/Lock\"\r\nimport UnlockIcon from \"@material-ui/icons/LockOpen\"\r\nimport VisibleIcon from \"@material-ui/icons/Visibility\"\r\nimport VisibleOffIcon from \"@material-ui/icons/VisibilityOff\"\r\nimport styles from \"./styles\"\r\nimport LabelSelector from './LabelSelector';\r\nimport ObjectSelector from './ObjectSelector';\r\n\r\nimport classnames from \"classnames\"\r\nconst useStyles = makeStyles(styles)\r\nconst colors = ['red','green','blue','pink','violet','indigo','black']\r\n\r\nconst Chip = ({ color, text }) => {\r\n  const classes = useStyles()\r\n  return (\r\n    <span className={classes.chip}>\r\n      <div className=\"color\" style={{ backgroundColor: color }} />\r\n      <div className=\"text\">{text}</div>\r\n    </span>\r\n  )\r\n}\r\n\r\n\r\n\r\nconst RowLayout = ({\r\n  header,\r\n  highlighted,\r\n  order,\r\n  classification,\r\n  area,\r\n  tags,\r\n  lock,\r\n  visible,\r\n  onClick,\r\n}) => {\r\n  const classes = useStyles()\r\n\r\n  const [mouseOver, changeMouseOver] = useState(false)\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      onMouseEnter={() => changeMouseOver(true)}\r\n      onMouseLeave={() => changeMouseOver(false)}\r\n      className={classnames(classes.row, { header, highlighted })}\r\n    >\r\n      <Grid container alignItems=\"center\">\r\n        <Grid item xs={5}>\r\n          {classification}\r\n        </Grid>\r\n        <Grid item xs={5}>\r\n          <div style={{ textAlign: \"right\", paddingRight: 6 }}>{area}</div>\r\n        </Grid>\r\n        <Grid item sm={1}>\r\n          {visible}\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          {lock}\r\n        </Grid>\r\n       \r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst RowHeader = () => {\r\n  return (\r\n    <RowLayout\r\n      header\r\n      highlighted={false}\r\n      order={<ReorderIcon className=\"icon\" />}\r\n      classification={<div style={{ paddingLeft: 10 }}>Label</div>}\r\n      lock={<LockIcon className=\"icon\" />}\r\n      visible={<VisibleIcon className=\"icon\" />}\r\n    />\r\n  )\r\n}\r\n\r\nconst MemoRowHeader = memo(RowHeader)\r\n\r\n\r\n\r\nconst Row = ({\r\n  region: r,\r\n  highlighted,\r\n  onSelectRegion,\r\n  onDeleteRegion,\r\n  onChangeRegion,\r\n  visible,\r\n  selected,\r\n  locked,\r\n  color,\r\n  cls,\r\n  index,\r\n}) => {\r\n\r\n  return (\r\n    <RowLayout\r\n      header={true}\r\n      key={Math.random()}\r\n      highlighted={selected}\r\n      onClick={() => {\r\n        onSelectRegion(r)\r\n      }}\r\n\r\n      classification={<Chip text={r.cls || \"\"} color={r.color || \"#ddd\"} />}\r\n      area=\"\"\r\n      \r\n      lock={\r\n        r.locked ? (\r\n          <LockIcon\r\n            onClick={() =>\r\n              onChangeRegion({\r\n                ...r,\r\n                edit:true,\r\n                locked: r.shouldHideDeleteIcon\r\n                  ? r.createdByUser\r\n                    ? false\r\n                    : true\r\n                  : false,\r\n              })\r\n            }\r\n            className=\"icon2\"\r\n          />\r\n        ) : (\r\n          <UnlockIcon\r\n            onClick={() => onChangeRegion({ ...r, locked: true })}\r\n            className=\"icon2\"\r\n          />\r\n        )\r\n      }\r\n      visible={\r\n        r.visible || r.visible === undefined ? (\r\n          <VisibleIcon\r\n            // onClick={() =>\r\n            //   onChangeRegion({\r\n            //     ...r,\r\n            //     visible: false,\r\n            //   })\r\n            // }\r\n            className=\"icon2\"\r\n          />\r\n        ) : (\r\n          <VisibleOffIcon\r\n            // onClick={() => onChangeRegion({ ...r, visible: true })}\r\n            className=\"icon2\"\r\n          />\r\n        )\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Container = styled(\"div\")({\r\n\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  padding:'0 10px',\r\n  borderLeft: '2px solid #C4C4C4',\r\n  borderRight: '2px solid #C4C4C4',\r\n  transition: '0.3s',\r\n  \"&.expanded\": {\r\n    width: 300,\r\n  },\r\n})\r\n\r\n\r\nconst InnerSliderContent = styled(\"div\")({\r\n  width: 300,\r\n  height:'100%',\r\n})\r\n\r\nconst getInitialExpandedState = () => {\r\n  return Boolean(window.__REACT_WORKSPACE_LAYOUT_EXPANDED_STATE)\r\n}\r\n\r\n\r\nconst MemoRow = memo(\r\n  Row,\r\n  (prevProps, nextProps) =>\r\n    prevProps.highlighted === nextProps.highlighted &&\r\n    prevProps.visible === nextProps.visible &&\r\n    prevProps.locked === nextProps.locked &&\r\n    prevProps.id === nextProps.id &&\r\n    prevProps.index === nextProps.index &&\r\n    prevProps.cls === nextProps.cls &&\r\n    prevProps.color === nextProps.color &&\r\n    prevProps.isNew === nextProps.isNew &&\r\n    prevProps.selected === nextProps.selected\r\n\r\n)\r\n\r\n\r\nexport const LeftSidebar = ({ state,children, onDeleteObject,\r\n  onChangeLabel,\r\n  onSelectLabel,\r\n  onChangeObject,\r\n  onSelectObject,\r\n  expandedByDefault,\r\n   initialExpandedState, height }) => {\r\n  const [expanded, toggleExpanded] = useReducer(\r\n    (state) => !state,\r\n    initialExpandedState === undefined\r\n      ? getInitialExpandedState()\r\n      : initialExpandedState\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (initialExpandedState !== undefined) {\r\n      window.__REACT_WORKSPACE_LAYOUT_EXPANDED_STATE = expanded\r\n    }\r\n  }, [initialExpandedState, expanded])\r\n\r\n  const containerStyle = useMemo(() => ({ height: height || \"100%\" }), [height])\r\n\r\n  return (\r\n    <Container className=\"dpfLabelcol\">\r\n      <InnerSliderContent >\r\n        {/* Lables */}\r\n         <LabelSelector state={state} onChangeLabel={onChangeLabel}\r\n          onSelectLabel={onSelectLabel} />\r\n        <ObjectSelector state={state}  onSelectObject={onSelectObject}\r\n                onDeleteObject={onDeleteObject}\r\n                onChangeObject={onChangeObject}/>\r\n      \r\n        </InnerSliderContent>      \r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default LeftSidebar\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/WorkContainer/index.js",["305"],"import React from \"react\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport { grey } from \"@material-ui/core/colors\"\r\n\r\nconst Container = styled(\"div\")({\r\n  position: \"relative\",\r\n  height: \"60%\",\r\n  width:'100%',\r\n  // backgroundColor: grey[50],\r\n  overflowY: \"auto\",\r\n})\r\nconst ShadowOverlay = styled(\"div\")({\r\n  content: \"' '\",\r\n  position: \"absolute\",\r\n  left: 0,\r\n  right: 0,\r\n  top: 0,\r\n  bottom: 0,\r\n  pointerEvents: \"none\",\r\n  \r\n})\r\n\r\nexport const WorkContainer = React.forwardRef(({ children }, ref) => {\r\n  return (\r\n    <Container ref={ref} className=\"dpfCanvas\">\r\n      {children}\r\n      <ShadowOverlay />\r\n    </Container>\r\n  )\r\n})\r\n\r\nexport default WorkContainer\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/components/Footer/index.js",[],"/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/components/Toolbar/index.js",[],"/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/components/ImageSwitcher/index.js",[],"/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/icon-mapping.js",["306"],"import React from 'react';\r\nimport BackIcon from \"@material-ui/icons/KeyboardArrowLeft\"\r\nimport NextIcon from \"@material-ui/icons/KeyboardArrowRight\"\r\nimport UndoIcon from \"@material-ui/icons/Undo\"\r\nimport RedoIcon from \"@material-ui/icons/Redo\"\r\nimport PlayIcon from \"@material-ui/icons/PlayArrow\"\r\nimport PauseIcon from \"@material-ui/icons/Pause\"\r\nimport SettingsIcon from \"@material-ui/icons/Settings\"\r\nimport HelpIcon from \"@material-ui/icons/Help\"\r\nimport FullscreenIcon from \"@material-ui/icons/Fullscreen\"\r\nimport ExitIcon from \"@material-ui/icons/ExitToApp\"\r\nimport QueuePlayNextIcon from \"@material-ui/icons/QueuePlayNext\"\r\nimport HotkeysIcon from \"@material-ui/icons/Keyboard\"\r\nimport { ReactSVG } from 'react-svg'\r\n\r\n\r\n\r\n\r\nimport Pan  from './icons/Pan.svg';\r\nimport ZoomIn  from './icons/Zoom_In.svg';\r\nimport ZoomOut  from './icons/Zoom_Out.svg';\r\nimport Invert  from './icons/Invert.svg';\r\nimport Polygon  from './icons/Polygon.svg';\r\nimport Draw  from './icons/Draw.svg';\r\nimport Brightness  from './icons/Brightness.svg';\r\nimport Contrast  from './icons/Contrast.svg';\r\nimport Next  from './icons/Next.svg';\r\nimport Previous  from './icons/Previous.svg';\r\nimport Redo  from './icons/Redo.svg';\r\nimport Undo  from './icons/Undo.svg';\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const iconMapping = {\r\n  back: BackIcon,\r\n  prev: BackIcon,\r\n  undo: UndoIcon,\r\n  redo: RedoIcon,\r\n  previous: BackIcon,\r\n  next: NextIcon,\r\n  forward: NextIcon,\r\n  play: PlayIcon,\r\n  pause: PauseIcon,\r\n  settings: SettingsIcon,\r\n  options: SettingsIcon,\r\n  help: HelpIcon,\r\n  fullscreen: FullscreenIcon,\r\n  exit: ExitIcon,\r\n  quit: ExitIcon,\r\n  save: ExitIcon,\r\n  done: ExitIcon,\r\n  clone: QueuePlayNextIcon,\r\n  hotkeys: HotkeysIcon,\r\n  shortcuts: HotkeysIcon,\r\n  pan: Pan,\r\n  'zoom-in': ZoomIn,\r\n  'zoom-out': ZoomOut,\r\n  inverse: Invert,\r\n  polygon: Polygon,\r\n  draw: Draw,\r\n  brightness: Brightness,\r\n  contrast: Contrast,\r\n}\r\n\r\nexport default iconMapping\r\n\r\n\r\nexport const getIcon = (name, selected) => {\r\n  switch (name) {\r\n    case 'brightness':\r\n      return <ReactSVG src={Brightness}\r\n        className={selected ? 'selected' : ''}\r\n        alt=\"close bubble\"\r\n      />;\r\n    case 'pan':\r\n      return <ReactSVG src={Pan}\r\n        className={selected ? 'selected' : ''}\r\n      />;\r\n    case 'zoom-in':\r\n      return <ReactSVG src={ZoomIn}\r\n        className={selected ? 'selected' : ''}\r\n      />;\r\n    case 'zoom-out':\r\n      return <ReactSVG src={ZoomOut}\r\n        className={selected ? 'selected' : ''}\r\n      />\r\n    case 'contrast':\r\n      return <ReactSVG src={Contrast}\r\n        className={selected ? 'selected' : ''}\r\n      />;\r\n    case 'inverse':\r\n      return <ReactSVG src={Invert}\r\n        className={selected ? 'selected' : ''}\r\n      />;\r\n    case 'draw':\r\n      return <ReactSVG src={Draw}\r\n        className={selected ? 'selected' : ''}\r\n      />;\r\n    case 'polygon':\r\n      return <ReactSVG src={Polygon}\r\n        className={selected ? 'selected' : ''}\r\n      />;\r\n    case 'Undo':\r\n      return <ReactSVG src={Undo}\r\n        style={selected ? {fill:'gray',cursor:'default'}: {}}\r\n        className={selected ? 'disabled' : ''} />;\r\n\r\n    case 'Redo':\r\n      return <ReactSVG src={Redo}\r\n        style={selected ? {fill:'gray',cursor:'default'}: {}}\r\n        className={selected ? 'disabled' : ''} />;\r\n\r\n    case 'Prev':\r\n      return <ReactSVG src={Previous}\r\n        style={selected ? {fill:'gray',cursor:'default'}: {}}\r\n        className={selected ? 'disabled' : ''} />;\r\n\r\n\r\n    case 'Next':\r\n      return <ReactSVG src={Next}\r\n        style={selected ? {fill:'gray',cursor:'default'}: {}}\r\n        className={selected ? 'disabled' : ''}\r\n      />;\r\n  }\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/LeftSidebar/ObjectSelector.js",["307","308","309","310","311","312","313","314","315","316","317","318","319","320","321"],"import React, { useReducer, useEffect,useState, useMemo,memo } from \"react\"\r\nimport ButtonBase from \"@material-ui/core/ButtonBase\"\r\nimport ExpandIcon from \"@material-ui/icons/KeyboardArrowLeft\"\r\nimport ContractIcon from \"@material-ui/icons/KeyboardArrowRight\"\r\nimport { grey } from \"@material-ui/core/colors\"\r\nimport { makeStyles, styled } from \"@material-ui/core/styles\"\r\nimport RegionIcon from \"@material-ui/icons/PictureInPicture\"\r\nimport Grid from \"@material-ui/core/Grid\"\r\nimport ReorderIcon from \"@material-ui/icons/SwapVert\"\r\nimport PieChartIcon from \"@material-ui/icons/PieChart\"\r\nimport TrashIcon from \"@material-ui/icons/Delete\"\r\nimport LockIcon from \"@material-ui/icons/Lock\"\r\nimport UnlockIcon from \"@material-ui/icons/LockOpen\"\r\nimport VisibleIcon from \"@material-ui/icons/Visibility\"\r\nimport VisibleOffIcon from \"@material-ui/icons/VisibilityOff\"\r\nimport styles from \"./styles\"\r\nimport classnames from \"classnames\"\r\nconst useStyles = makeStyles(styles)\r\n\r\nconst colors = ['red','green','blue','pink','violet','indigo','black']\r\n\r\nconst Chip = ({ color, text }) => {\r\n  const classes = useStyles()\r\n  return (\r\n    <span className={classes.chip}>\r\n      <div className=\"color\" style={{ backgroundColor: color }} />\r\n      <div className=\"text\">{text}</div>\r\n    </span>\r\n  )\r\n}\r\n\r\n\r\n\r\nconst RowLayout = ({\r\n  header,\r\n  highlighted,\r\n  order,\r\n  classification,\r\n  area,\r\n  tags,\r\n  trash,\r\n  lock,\r\n  visible,\r\n  onClick,\r\n}) => {\r\n  const classes = useStyles()\r\n\r\n  const [mouseOver, changeMouseOver] = useState(false)\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      onMouseEnter={() => changeMouseOver(true)}\r\n      onMouseLeave={() => changeMouseOver(false)}\r\n      className={classnames(classes.row, { header, highlighted })}\r\n    >\r\n      <Grid container alignItems=\"center\">\r\n        <Grid item xs={5}>\r\n          {classification}\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <div style={{ textAlign: \"right\", paddingRight: 6 }}>{area}</div>\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          {trash}\r\n        </Grid>\r\n        <Grid item sm={1}>\r\n          {visible}\r\n        </Grid>\r\n        \r\n        <Grid item xs={1}>\r\n          {lock}\r\n        </Grid>\r\n       \r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst RowHeader = () => {\r\n  return (\r\n    <RowLayout\r\n      header\r\n      highlighted={false}\r\n      order={<ReorderIcon className=\"icon\" />}\r\n      classification={<div style={{ paddingLeft: 10 }}>Label</div>}\r\n      lock={<LockIcon className=\"icon\" />}\r\n      visible={<VisibleIcon className=\"icon\" />}\r\n    />\r\n  )\r\n}\r\n\r\nconst MemoRowHeader = memo(RowHeader)\r\n\r\n\r\n\r\nconst Row = ({\r\n  region: r,\r\n  highlighted,\r\n  onSelectObject,\r\n  onDeleteObject,\r\n  onChangeObject,\r\n  visible,\r\n  selected,\r\n  locked,\r\n  color,\r\n  cls,\r\n  index,\r\n}) => {\r\n  // console.log(\"Region \", r);\r\n  return (\r\n    <RowLayout\r\n      header={true}\r\n      key={Math.random()}\r\n      highlighted={highlighted}\r\n      onClick={() => {\r\n        onSelectObject(r)\r\n      }}\r\n\r\n      classification={<Chip text={r.cls || \"\"} color={r.color || \"#ddd\"} />}\r\n      area=\"\"\r\n      trash={\r\n        (\r\n          <TrashIcon onClick={() => onDeleteObject(r)} className=\"icon2 deleteIocn\" />\r\n        )\r\n      }\r\n      \r\n      lock={\r\n        r.locked ? (\r\n          <LockIcon\r\n            onClick={() => {\r\n              // console.log(\"current Reggionnnn\",r)\r\n              onChangeObject({\r\n                ...r,\r\n                edit:true,\r\n                locked: false\r\n              })\r\n            }\r\n  \r\n            }\r\n            className=\"icon2 lockIcon\"\r\n          />\r\n        ) : (\r\n          <UnlockIcon\r\n              onClick={() => {\r\n              // console.log(\"current Reggionnnn 136 \",r)\r\n\r\n                onChangeObject({ ...r, locked: true })\r\n              }}\r\n            className=\"icon2 UNlockIcon\"\r\n          />\r\n        )\r\n      }\r\n      visible={\r\n        r.visible || r.visible === undefined ? (\r\n          <VisibleIcon\r\n            onClick={() =>\r\n              onChangeObject({\r\n                ...r,\r\n                visible: false,\r\n              })\r\n            }\r\n            className=\"icon2 visibleIocn\"\r\n          />\r\n        ) : (\r\n          <VisibleOffIcon\r\n            onClick={() => onChangeObject({ ...r, visible: true })}\r\n            className=\"icon2 INvisibleIocn\"\r\n          />\r\n        )\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Container = styled(\"div\")({\r\n  width: 300,\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  height: '80%',\r\n  padding:'0 20px',\r\n  marginRight:'20px',\r\n  boxShadow: '0 2px 2px 0 rgba(0,0,0,0.2)',\r\n  transition: '0.3s',\r\n  marginTop:'30px',\r\n  \"&.expanded\": {\r\n    width: 300,\r\n  },\r\n})\r\n\r\n\r\nconst InnerSliderContent = styled(\"div\")({\r\n  width: 300,\r\n})\r\n\r\nconst getInitialExpandedState = () => {\r\n  return Boolean(window.__REACT_WORKSPACE_LAYOUT_EXPANDED_STATE)\r\n}\r\n\r\n\r\nconst MemoRow = memo(\r\n  Row,\r\n  (prevProps, nextProps) =>\r\n    prevProps.highlighted === nextProps.highlighted &&\r\n    prevProps.visible === nextProps.visible &&\r\n    prevProps.locked === nextProps.locked &&\r\n    prevProps.id === nextProps.id &&\r\n    prevProps.points.length === nextProps.points.length &&\r\n    prevProps.index === nextProps.index &&\r\n    prevProps.cls === nextProps.cls &&\r\n    prevProps.color === nextProps.color &&\r\n    prevProps.isNew === nextProps.isNew &&\r\n    prevProps.selected === nextProps.selected\r\n\r\n)\r\n\r\n\r\nexport const RightSidebar = ({ state,\r\n  onSelectObject,\r\n  onDeleteObject,\r\n  onChangeObject,\r\n  expandedByDefault,\r\n   initialExpandedState, height }) => {\r\n  const [expanded, toggleExpanded] = useReducer(\r\n    (state) => !state,\r\n    initialExpandedState === undefined\r\n      ? getInitialExpandedState()\r\n      : initialExpandedState\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (initialExpandedState !== undefined) {\r\n      window.__REACT_WORKSPACE_LAYOUT_EXPANDED_STATE = expanded\r\n    }\r\n  }, [initialExpandedState, expanded])\r\n\r\n  const containerStyle = useMemo(() => ({ height: height || \"100%\" }), [height])\r\n\r\n  return (\r\n\r\n            <div className=\"labelRow\">\r\n              <div>\r\n          <h4>Objects</h4>\r\n          {state.images[state.selectedImage].regions.map((r, i) => {\r\n            {/* console.log(\"Region:\", r); */ }\r\n            \r\n            return(\r\n              <Row\r\n                key={r.id}\r\n                {...r}\r\n                region={r}\r\n                index={i}\r\n                onDeleteObject={onDeleteObject}\r\n                onChangeObject={onChangeObject}\r\n                onSelectObject={onSelectObject}\r\n              />\r\n            )\r\n          })}\r\n          </div>\r\n              </div>\r\n  )\r\n}\r\n\r\nexport default RightSidebar\r\n\r\n\r\n\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/LeftSidebar/LabelSelector.js",["322","323","324","325","326","327","328","329","330","331","332","333","334","335"],"import React, { useReducer, useEffect,useState, useMemo,memo } from \"react\"\r\nimport ButtonBase from \"@material-ui/core/ButtonBase\"\r\nimport ExpandIcon from \"@material-ui/icons/KeyboardArrowLeft\"\r\nimport ContractIcon from \"@material-ui/icons/KeyboardArrowRight\"\r\nimport { grey } from \"@material-ui/core/colors\"\r\nimport { makeStyles, styled } from \"@material-ui/core/styles\"\r\nimport RegionIcon from \"@material-ui/icons/PictureInPicture\"\r\nimport Grid from \"@material-ui/core/Grid\"\r\nimport ReorderIcon from \"@material-ui/icons/SwapVert\"\r\nimport PieChartIcon from \"@material-ui/icons/PieChart\"\r\nimport TrashIcon from \"@material-ui/icons/Delete\"\r\nimport LockIcon from \"@material-ui/icons/Lock\"\r\nimport UnlockIcon from \"@material-ui/icons/LockOpen\"\r\nimport VisibleIcon from \"@material-ui/icons/Visibility\"\r\nimport VisibleOffIcon from \"@material-ui/icons/VisibilityOff\"\r\nimport styles from \"./styles\"\r\nimport classnames from \"classnames\"\r\nconst useStyles = makeStyles(styles)\r\n\r\nconst colors = ['red','green','blue','pink','violet','indigo','black']\r\n\r\nconst Chip = ({ color, text }) => {\r\n  const classes = useStyles()\r\n  return (\r\n    <span className={classes.chip}>\r\n      <div className=\"color\" style={{ backgroundColor: color }} />\r\n      <div className=\"text dpfLabeltext\">{text}</div>\r\n    </span>\r\n  )\r\n}\r\n\r\n\r\n\r\nconst RowLayout = ({\r\n  header,\r\n  highlighted,\r\n  order,\r\n  classification,\r\n  area,\r\n  tags,\r\n  lock,\r\n  visible,\r\n  onClick,\r\n}) => {\r\n  const classes = useStyles()\r\n\r\n  const [mouseOver, changeMouseOver] = useState(false)\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      onMouseEnter={() => changeMouseOver(true)}\r\n      onMouseLeave={() => changeMouseOver(false)}\r\n      className={classnames(classes.row, { header, highlighted })}\r\n    >\r\n      <Grid container alignItems=\"center\">\r\n        <Grid item xs={5}>\r\n          {classification}\r\n        </Grid>\r\n        <Grid item xs={5}>\r\n          <div style={{ textAlign: \"right\", paddingRight: 6 }}>{area}</div>\r\n        </Grid>\r\n        <Grid item sm={1}>\r\n          {visible}\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          {lock}\r\n        </Grid>\r\n       \r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst RowHeader = () => {\r\n  return (\r\n    <RowLayout\r\n    \r\n      header\r\n      highlighted={false}\r\n      order={<ReorderIcon className=\"icon\" />}\r\n      classification={<div style={{ paddingLeft: 10 }}>Label</div>}\r\n      lock={<LockIcon className=\"icon\" />}\r\n      visible={<VisibleIcon className=\"icon\" />}\r\n    />\r\n  )\r\n}\r\n\r\nconst MemoRowHeader = memo(RowHeader)\r\n\r\n\r\n\r\nconst Row = ({\r\n  region: r,\r\n  highlighted,\r\n  onSelectLabel,\r\n  onChangeLabel,\r\n  visible,\r\n  selected,\r\n  locked,\r\n  color,\r\n  cls,\r\n  index,\r\n}) => {\r\n\r\n  return (\r\n    <RowLayout\r\n      header={true}\r\n      key={Math.random()}\r\n      highlighted={selected}\r\n      onClick={() => {\r\n        onSelectLabel(r)\r\n      }}\r\n\r\n      classification={<Chip text={r.cls || \"\"}\r\n      color={r.color || \"#ddd\"} />}\r\n      area=\"\"\r\n      \r\n      lock={\r\n        r.locked ? (\r\n          <LockIcon\r\n            onClick={() =>\r\n                onChangeLabel({\r\n                ...r,\r\n                edit:true,\r\n                  locked: false,\r\n                \r\n              })\r\n            }\r\n            className=\"icon2 lockIcon\"\r\n          />\r\n        ) : (\r\n          <UnlockIcon\r\n            onClick={() => onChangeLabel({ ...r, locked: true })}\r\n            className=\"icon2 UNlockIcon\"\r\n          />\r\n        )\r\n      }\r\n      visible={\r\n        r.visible || r.visible === undefined ? (\r\n          <VisibleIcon\r\n            onClick={() =>\r\n              onChangeLabel({\r\n                ...r,\r\n                visible: false,\r\n              })\r\n            }\r\n            className=\"icon2 visibleIocn\"\r\n          />\r\n        ) : (\r\n          <VisibleOffIcon\r\n            onClick={() => onChangeLabel({ ...r, visible: true })}\r\n            className=\"icon2 INvisibleIocn\"\r\n          />\r\n        )\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Container = styled(\"div\")({\r\n  width: 300,\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  height: '80%',\r\n  padding:'0 20px',\r\n  marginRight:'20px',\r\n  boxShadow: '0 2px 2px 0 rgba(0,0,0,0.2)',\r\n  transition: '0.3s',\r\n  marginTop:'30px',\r\n  \"&.expanded\": {\r\n    width: 300,\r\n  },\r\n})\r\n\r\n\r\nconst InnerSliderContent = styled(\"div\")({\r\n  width: 300,\r\n})\r\n\r\nconst getInitialExpandedState = () => {\r\n  return Boolean(window.__REACT_WORKSPACE_LAYOUT_EXPANDED_STATE)\r\n}\r\n\r\n\r\nconst MemoRow = memo(\r\n  Row,\r\n  (prevProps, nextProps) =>\r\n    prevProps.highlighted === nextProps.highlighted &&\r\n    prevProps.visible === nextProps.visible &&\r\n    prevProps.locked === nextProps.locked &&\r\n    prevProps.id === nextProps.id &&\r\n    prevProps.index === nextProps.index &&\r\n    prevProps.cls === nextProps.cls &&\r\n    prevProps.color === nextProps.color &&\r\n    prevProps.isNew === nextProps.isNew &&\r\n    prevProps.selected === nextProps.selected\r\n\r\n)\r\n\r\n\r\nexport const RightSidebar = ({ state,\r\n    onSelectLabel,\r\n    onChangeLabel,\r\n  expandedByDefault,\r\n   initialExpandedState, height }) => {\r\n  const [expanded, toggleExpanded] = useReducer(\r\n    (state) => !state,\r\n    initialExpandedState === undefined\r\n      ? getInitialExpandedState()\r\n      : initialExpandedState\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (initialExpandedState !== undefined) {\r\n      window.__REACT_WORKSPACE_LAYOUT_EXPANDED_STATE = expanded\r\n    }\r\n  }, [initialExpandedState, expanded])\r\n\r\n  const containerStyle = useMemo(() => ({ height: height || \"100%\" }), [height])\r\n\r\n  return (\r\n\r\n          <div className=\"labelRow\">\r\n            <div>\r\n              <h4>Labels</h4>\r\n          {state.regionClsList.map((r, i) => {\r\n              const label = state.images[state.selectedImage].label\r\n              let selected;\r\n              if (label && label.cls === r.cls) {\r\n                  selected = true;\r\n              }\r\n              return (\r\n                  <MemoRow\r\n                      key={Math.random()}\r\n                      {...r}\r\n                      selected={selected}\r\n                      region={r}\r\n                      index={i}\r\n                      onChangeLabel={onChangeLabel}\r\n                      onSelectLabel={onSelectLabel}\r\n                  />)\r\n          })}\r\n          </div>\r\n        </div>\r\n  )\r\n}\r\n\r\nexport default RightSidebar\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/LeftSidebar/styles.js",["336","337","338","339"],"import { grey, blue, orange, purple } from \"@material-ui/core/colors\"\r\n\r\nexport default {\r\n  container: {\r\n    fontSize: 11,\r\n    fontWeight: \"bold\",\r\n    color: grey[700],\r\n    \"& .icon\": {\r\n      marginTop: 4,\r\n      width: 10,\r\n      height: 10,\r\n      color:'green',\r\n\r\n    },\r\n    \"& .icon2\": {\r\n      opacity: 0.5,\r\n      width: 10,\r\n      color:'green',\r\n      height: 10,\r\n      transition: \"200ms opacity\",\r\n      \"&:hover\": {\r\n        cursor: \"pointer\",\r\n        opacity: 1,\r\n      },\r\n    },\r\n  },\r\n  row: {\r\n    // padding: 4,\r\n  \r\n    cursor: \"pointer\",\r\n    \"&.header:hover\": {\r\n      // backgroundColor: blue[50],\r\n    },\r\n    \"&.highlighted\": {\r\n      backgroundColor: \"#5999c9\",\r\n    },\r\n    \"&:hover\": {\r\n      // backgroundColor: blue[50],\r\n      color: grey[800],\r\n    },\r\n  },\r\n  chip: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n  \r\n\r\n\r\n    alignItems: \"center\",\r\n    \"& .color\": {\r\n      width: 11,\r\n      height: 11,\r\n      marginRight: 9,\r\n    },\r\n    \"& .text\": {},\r\n  },\r\n}\r\n","/home/compaq/Projects/Danny/react-annotator/src/annotator/Workspace/components/Toolbar/Slider.js",["340","341","342","343","344","345","346","347"],"import React from 'react'\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport Slider from '@material-ui/core/Slider';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    \r\n  }));\r\n\r\nconst FilterSlider = (props) => {\r\n    const filter = props.activeImage.filter;\r\n\r\n    const classes = useStyles();\r\n\r\n    const getDefaultValue = (label) => {\r\n        if (label == 'brightness') {\r\n            return 100;\r\n        }\r\n        if (label == 'contrast') {\r\n            return 1;\r\n        }\r\n    }\r\n    const getMaxValue = (label) => {\r\n        if (label == 'brightness') {\r\n            return 200;\r\n        }\r\n        if (label == 'contrast') {\r\n            return 10;\r\n        }\r\n    }\r\n    const getMinValue = (label) => {\r\n        if (label == 'brightness') {\r\n            return 10;\r\n        }\r\n        if (label == 'contrast') {\r\n            return 1;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            \r\n            <input type=\"range\" step={0} min={getMinValue(props.id)} max={getMaxValue(props.id)}\r\n                value={filter ? filter[props.id] : getDefaultValue(props.id)} aria-label={props.id} id={props.id} onChange={props.onChange} defaultValue={getDefaultValue(props.id)} />\r\n            {/* <span>{filter ? filter[props.id] : getDefaultValue(props.id) }</span>            */}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilterSlider\r\n",{"ruleId":"348","severity":1,"message":"349","line":4,"column":10,"nodeType":"350","messageId":"351","endLine":4,"endColumn":15},{"ruleId":"348","severity":1,"message":"352","line":7,"column":3,"nodeType":"350","messageId":"351","endLine":7,"endColumn":11},{"ruleId":"348","severity":1,"message":"353","line":9,"column":3,"nodeType":"350","messageId":"351","endLine":9,"endColumn":7},{"ruleId":"354","severity":1,"message":"355","line":209,"column":6,"nodeType":"356","endLine":209,"endColumn":21,"suggestions":"357"},{"ruleId":"354","severity":1,"message":"358","line":218,"column":5,"nodeType":"356","endLine":218,"endColumn":7,"suggestions":"359"},{"ruleId":"360","severity":1,"message":"361","line":1,"column":1,"nodeType":"362","endLine":6,"endColumn":2},{"ruleId":"360","severity":1,"message":"361","line":11,"column":1,"nodeType":"362","endLine":83,"endColumn":2},{"ruleId":"363","severity":1,"message":"364","line":32,"column":5,"nodeType":"365","messageId":"366","endLine":39,"endColumn":6},{"ruleId":"367","severity":1,"message":"368","line":33,"column":7,"nodeType":"369","messageId":"370","endLine":38,"endColumn":8},{"ruleId":"363","severity":1,"message":"364","line":40,"column":5,"nodeType":"365","messageId":"366","endLine":42,"endColumn":6},{"ruleId":"360","severity":1,"message":"361","line":10,"column":1,"nodeType":"362","endLine":24,"endColumn":2},{"ruleId":"348","severity":1,"message":"371","line":11,"column":30,"nodeType":"350","messageId":"351","endLine":11,"endColumn":47},{"ruleId":"348","severity":1,"message":"372","line":11,"column":49,"nodeType":"350","messageId":"351","endLine":11,"endColumn":60},{"ruleId":"367","severity":1,"message":"368","line":15,"column":3,"nodeType":"369","messageId":"370","endLine":22,"endColumn":4},{"ruleId":"348","severity":1,"message":"373","line":4,"column":27,"nodeType":"350","messageId":"351","endLine":4,"endColumn":36},{"ruleId":"360","severity":1,"message":"361","line":24,"column":1,"nodeType":"362","endLine":60,"endColumn":2},{"ruleId":"348","severity":1,"message":"374","line":2,"column":32,"nodeType":"350","messageId":"351","endLine":2,"endColumn":38},{"ruleId":"348","severity":1,"message":"375","line":4,"column":34,"nodeType":"350","messageId":"351","endLine":4,"endColumn":42},{"ruleId":"348","severity":1,"message":"376","line":5,"column":8,"nodeType":"350","messageId":"351","endLine":5,"endColumn":14},{"ruleId":"348","severity":1,"message":"377","line":10,"column":8,"nodeType":"350","messageId":"351","endLine":10,"endColumn":18},{"ruleId":"348","severity":1,"message":"378","line":11,"column":8,"nodeType":"350","messageId":"351","endLine":11,"endColumn":37},{"ruleId":"348","severity":1,"message":"379","line":14,"column":8,"nodeType":"350","messageId":"351","endLine":14,"endColumn":33},{"ruleId":"348","severity":1,"message":"380","line":87,"column":9,"nodeType":"350","messageId":"351","endLine":87,"endColumn":24},{"ruleId":"348","severity":1,"message":"381","line":112,"column":11,"nodeType":"350","messageId":"351","endLine":112,"endColumn":14},{"ruleId":"348","severity":1,"message":"382","line":172,"column":13,"nodeType":"350","messageId":"351","endLine":172,"endColumn":23},{"ruleId":"348","severity":1,"message":"383","line":298,"column":15,"nodeType":"350","messageId":"351","endLine":298,"endColumn":26},{"ruleId":"348","severity":1,"message":"383","line":429,"column":15,"nodeType":"350","messageId":"351","endLine":429,"endColumn":26},{"ruleId":"348","severity":1,"message":"384","line":445,"column":15,"nodeType":"350","messageId":"351","endLine":445,"endColumn":21},{"ruleId":"348","severity":1,"message":"384","line":464,"column":15,"nodeType":"350","messageId":"351","endLine":464,"endColumn":21},{"ruleId":"385","severity":1,"message":"386","line":658,"column":7,"nodeType":"387","messageId":"388","endLine":658,"endColumn":13},{"ruleId":"389","severity":1,"message":"390","line":694,"column":44,"nodeType":"391","messageId":"392","endLine":694,"endColumn":46},{"ruleId":"385","severity":1,"message":"386","line":145,"column":3,"nodeType":"393","messageId":"388","endLine":145,"endColumn":36},{"ruleId":"367","severity":1,"message":"368","line":149,"column":3,"nodeType":"369","messageId":"370","endLine":156,"endColumn":4},{"ruleId":"360","severity":1,"message":"361","line":7,"column":1,"nodeType":"362","endLine":99,"endColumn":2},{"ruleId":"360","severity":1,"message":"361","line":3,"column":1,"nodeType":"362","endLine":21,"endColumn":2},{"ruleId":"360","severity":1,"message":"361","line":7,"column":1,"nodeType":"362","endLine":53,"endColumn":2},{"ruleId":"360","severity":1,"message":"361","line":3,"column":1,"nodeType":"362","endLine":6,"endColumn":2},{"ruleId":"348","severity":1,"message":"394","line":5,"column":10,"nodeType":"350","messageId":"351","endLine":5,"endColumn":20},{"ruleId":"348","severity":1,"message":"395","line":5,"column":22,"nodeType":"350","messageId":"351","endLine":5,"endColumn":28},{"ruleId":"348","severity":1,"message":"396","line":15,"column":7,"nodeType":"350","messageId":"351","endLine":15,"endColumn":15},{"ruleId":"397","severity":1,"message":"398","line":52,"column":66,"nodeType":"399","messageId":"400","endLine":52,"endColumn":67},{"ruleId":"348","severity":1,"message":"401","line":63,"column":5,"nodeType":"350","messageId":"351","endLine":63,"endColumn":14},{"ruleId":"348","severity":1,"message":"402","line":80,"column":9,"nodeType":"350","messageId":"351","endLine":80,"endColumn":28},{"ruleId":"360","severity":1,"message":"361","line":12,"column":1,"nodeType":"362","endLine":23,"endColumn":2},{"ruleId":"360","severity":1,"message":"361","line":9,"column":1,"nodeType":"362","endLine":17,"endColumn":2},{"ruleId":"348","severity":1,"message":"403","line":19,"column":3,"nodeType":"350","messageId":"351","endLine":19,"endColumn":22},{"ruleId":"348","severity":1,"message":"404","line":145,"column":10,"nodeType":"350","messageId":"351","endLine":145,"endColumn":26},{"ruleId":"348","severity":1,"message":"405","line":145,"column":28,"nodeType":"350","messageId":"351","endLine":145,"endColumn":50},{"ruleId":"348","severity":1,"message":"406","line":149,"column":9,"nodeType":"350","messageId":"351","endLine":149,"endColumn":19},{"ruleId":"348","severity":1,"message":"407","line":152,"column":9,"nodeType":"350","messageId":"351","endLine":152,"endColumn":21},{"ruleId":"348","severity":1,"message":"408","line":155,"column":38,"nodeType":"350","messageId":"351","endLine":155,"endColumn":44},{"ruleId":"354","severity":1,"message":"409","line":174,"column":49,"nodeType":"356","endLine":174,"endColumn":61,"suggestions":"410"},{"ruleId":"348","severity":1,"message":"411","line":176,"column":9,"nodeType":"350","messageId":"351","endLine":176,"endColumn":22},{"ruleId":"348","severity":1,"message":"412","line":241,"column":13,"nodeType":"350","messageId":"351","endLine":241,"endColumn":24},{"ruleId":"348","severity":1,"message":"413","line":241,"column":26,"nodeType":"350","messageId":"351","endLine":241,"endColumn":38},{"ruleId":"348","severity":1,"message":"414","line":312,"column":9,"nodeType":"350","messageId":"351","endLine":312,"endColumn":26},{"ruleId":"348","severity":1,"message":"415","line":15,"column":10,"nodeType":"350","messageId":"351","endLine":15,"endColumn":13},{"ruleId":"354","severity":1,"message":"416","line":62,"column":5,"nodeType":"356","endLine":62,"endColumn":7,"suggestions":"417"},{"ruleId":"354","severity":1,"message":"418","line":28,"column":6,"nodeType":"356","endLine":28,"endColumn":8,"suggestions":"419"},{"ruleId":"348","severity":1,"message":"420","line":1,"column":10,"nodeType":"350","messageId":"351","endLine":1,"endColumn":14},{"ruleId":"360","severity":1,"message":"421","line":3,"column":1,"nodeType":"362","endLine":31,"endColumn":2},{"ruleId":"360","severity":1,"message":"361","line":8,"column":1,"nodeType":"362","endLine":170,"endColumn":2},{"ruleId":"360","severity":1,"message":"361","line":5,"column":1,"nodeType":"362","endLine":23,"endColumn":2},{"ruleId":"360","severity":1,"message":"361","line":6,"column":1,"nodeType":"362","endLine":27,"endColumn":2},{"ruleId":"348","severity":1,"message":"422","line":71,"column":9,"nodeType":"350","messageId":"351","endLine":71,"endColumn":23},{"ruleId":"360","severity":1,"message":"423","line":1,"column":1,"nodeType":"362","endLine":1,"endColumn":280},{"ruleId":"360","severity":1,"message":"361","line":33,"column":1,"nodeType":"362","endLine":183,"endColumn":2},{"ruleId":"354","severity":1,"message":"424","line":56,"column":6,"nodeType":"356","endLine":56,"endColumn":17,"suggestions":"425"},{"ruleId":"354","severity":1,"message":"426","line":87,"column":6,"nodeType":"356","endLine":87,"endColumn":20,"suggestions":"427"},{"ruleId":"354","severity":1,"message":"428","line":133,"column":6,"nodeType":"356","endLine":139,"endColumn":4,"suggestions":"429"},{"ruleId":"348","severity":1,"message":"430","line":3,"column":8,"nodeType":"350","messageId":"351","endLine":3,"endColumn":30},{"ruleId":"348","severity":1,"message":"431","line":13,"column":7,"nodeType":"350","messageId":"351","endLine":13,"endColumn":19},{"ruleId":"348","severity":1,"message":"432","line":47,"column":11,"nodeType":"350","messageId":"351","endLine":47,"endColumn":15},{"ruleId":"348","severity":1,"message":"433","line":6,"column":10,"nodeType":"350","messageId":"351","endLine":6,"endColumn":15},{"ruleId":"348","severity":1,"message":"434","line":14,"column":11,"nodeType":"350","messageId":"351","endLine":14,"endColumn":20},{"ruleId":"354","severity":1,"message":"435","line":78,"column":5,"nodeType":"356","endLine":78,"endColumn":14,"suggestions":"436"},{"ruleId":"348","severity":1,"message":"437","line":2,"column":8,"nodeType":"350","messageId":"351","endLine":2,"endColumn":18},{"ruleId":"348","severity":1,"message":"438","line":3,"column":8,"nodeType":"350","messageId":"351","endLine":3,"endColumn":18},{"ruleId":"348","severity":1,"message":"439","line":4,"column":8,"nodeType":"350","messageId":"351","endLine":4,"endColumn":20},{"ruleId":"348","severity":1,"message":"420","line":5,"column":10,"nodeType":"350","messageId":"351","endLine":5,"endColumn":14},{"ruleId":"348","severity":1,"message":"440","line":7,"column":8,"nodeType":"350","messageId":"351","endLine":7,"endColumn":18},{"ruleId":"348","severity":1,"message":"441","line":10,"column":8,"nodeType":"350","messageId":"351","endLine":10,"endColumn":20},{"ruleId":"348","severity":1,"message":"442","line":11,"column":8,"nodeType":"350","messageId":"351","endLine":11,"endColumn":17},{"ruleId":"348","severity":1,"message":"443","line":22,"column":7,"nodeType":"350","messageId":"351","endLine":22,"endColumn":13},{"ruleId":"348","severity":1,"message":"444","line":49,"column":10,"nodeType":"350","messageId":"351","endLine":49,"endColumn":19},{"ruleId":"348","severity":1,"message":"445","line":89,"column":7,"nodeType":"350","messageId":"351","endLine":89,"endColumn":20},{"ruleId":"348","severity":1,"message":"446","line":193,"column":7,"nodeType":"350","messageId":"351","endLine":193,"endColumn":14},{"ruleId":"348","severity":1,"message":"422","line":216,"column":20,"nodeType":"350","messageId":"351","endLine":216,"endColumn":34},{"ruleId":"348","severity":1,"message":"447","line":229,"column":9,"nodeType":"350","messageId":"351","endLine":229,"endColumn":23},{"ruleId":"348","severity":1,"message":"420","line":3,"column":10,"nodeType":"350","messageId":"351","endLine":3,"endColumn":14},{"ruleId":"367","severity":1,"message":"368","line":72,"column":3,"nodeType":"369","messageId":"370","endLine":127,"endColumn":4},{"ruleId":"348","severity":1,"message":"437","line":2,"column":8,"nodeType":"350","messageId":"351","endLine":2,"endColumn":18},{"ruleId":"348","severity":1,"message":"438","line":3,"column":8,"nodeType":"350","messageId":"351","endLine":3,"endColumn":18},{"ruleId":"348","severity":1,"message":"439","line":4,"column":8,"nodeType":"350","messageId":"351","endLine":4,"endColumn":20},{"ruleId":"348","severity":1,"message":"420","line":5,"column":10,"nodeType":"350","messageId":"351","endLine":5,"endColumn":14},{"ruleId":"348","severity":1,"message":"440","line":7,"column":8,"nodeType":"350","messageId":"351","endLine":7,"endColumn":18},{"ruleId":"348","severity":1,"message":"441","line":10,"column":8,"nodeType":"350","messageId":"351","endLine":10,"endColumn":20},{"ruleId":"348","severity":1,"message":"443","line":20,"column":7,"nodeType":"350","messageId":"351","endLine":20,"endColumn":13},{"ruleId":"348","severity":1,"message":"444","line":48,"column":10,"nodeType":"350","messageId":"351","endLine":48,"endColumn":19},{"ruleId":"348","severity":1,"message":"445","line":92,"column":7,"nodeType":"350","messageId":"351","endLine":92,"endColumn":20},{"ruleId":"348","severity":1,"message":"448","line":180,"column":7,"nodeType":"350","messageId":"351","endLine":180,"endColumn":16},{"ruleId":"348","severity":1,"message":"449","line":196,"column":7,"nodeType":"350","messageId":"351","endLine":196,"endColumn":25},{"ruleId":"348","severity":1,"message":"446","line":205,"column":7,"nodeType":"350","messageId":"351","endLine":205,"endColumn":14},{"ruleId":"348","severity":1,"message":"422","line":228,"column":20,"nodeType":"350","messageId":"351","endLine":228,"endColumn":34},{"ruleId":"348","severity":1,"message":"447","line":241,"column":9,"nodeType":"350","messageId":"351","endLine":241,"endColumn":23},{"ruleId":"450","severity":1,"message":"451","line":249,"column":13,"nodeType":"452","messageId":"453","endLine":249,"endColumn":48},{"ruleId":"348","severity":1,"message":"437","line":2,"column":8,"nodeType":"350","messageId":"351","endLine":2,"endColumn":18},{"ruleId":"348","severity":1,"message":"438","line":3,"column":8,"nodeType":"350","messageId":"351","endLine":3,"endColumn":18},{"ruleId":"348","severity":1,"message":"439","line":4,"column":8,"nodeType":"350","messageId":"351","endLine":4,"endColumn":20},{"ruleId":"348","severity":1,"message":"420","line":5,"column":10,"nodeType":"350","messageId":"351","endLine":5,"endColumn":14},{"ruleId":"348","severity":1,"message":"440","line":7,"column":8,"nodeType":"350","messageId":"351","endLine":7,"endColumn":18},{"ruleId":"348","severity":1,"message":"441","line":10,"column":8,"nodeType":"350","messageId":"351","endLine":10,"endColumn":20},{"ruleId":"348","severity":1,"message":"442","line":11,"column":8,"nodeType":"350","messageId":"351","endLine":11,"endColumn":17},{"ruleId":"348","severity":1,"message":"443","line":20,"column":7,"nodeType":"350","messageId":"351","endLine":20,"endColumn":13},{"ruleId":"348","severity":1,"message":"444","line":47,"column":10,"nodeType":"350","messageId":"351","endLine":47,"endColumn":19},{"ruleId":"348","severity":1,"message":"445","line":88,"column":7,"nodeType":"350","messageId":"351","endLine":88,"endColumn":20},{"ruleId":"348","severity":1,"message":"448","line":165,"column":7,"nodeType":"350","messageId":"351","endLine":165,"endColumn":16},{"ruleId":"348","severity":1,"message":"449","line":181,"column":7,"nodeType":"350","messageId":"351","endLine":181,"endColumn":25},{"ruleId":"348","severity":1,"message":"422","line":211,"column":20,"nodeType":"350","messageId":"351","endLine":211,"endColumn":34},{"ruleId":"348","severity":1,"message":"447","line":224,"column":9,"nodeType":"350","messageId":"351","endLine":224,"endColumn":23},{"ruleId":"348","severity":1,"message":"454","line":1,"column":16,"nodeType":"350","messageId":"351","endLine":1,"endColumn":20},{"ruleId":"348","severity":1,"message":"455","line":1,"column":22,"nodeType":"350","messageId":"351","endLine":1,"endColumn":28},{"ruleId":"348","severity":1,"message":"456","line":1,"column":30,"nodeType":"350","messageId":"351","endLine":1,"endColumn":36},{"ruleId":"360","severity":1,"message":"421","line":3,"column":1,"nodeType":"362","endLine":56,"endColumn":2},{"ruleId":"348","severity":1,"message":"457","line":2,"column":10,"nodeType":"350","messageId":"351","endLine":2,"endColumn":20},{"ruleId":"348","severity":1,"message":"458","line":3,"column":8,"nodeType":"350","messageId":"351","endLine":3,"endColumn":14},{"ruleId":"389","severity":1,"message":"390","line":15,"column":19,"nodeType":"391","messageId":"392","endLine":15,"endColumn":21},{"ruleId":"389","severity":1,"message":"390","line":18,"column":19,"nodeType":"391","messageId":"392","endLine":18,"endColumn":21},{"ruleId":"389","severity":1,"message":"390","line":23,"column":19,"nodeType":"391","messageId":"392","endLine":23,"endColumn":21},{"ruleId":"389","severity":1,"message":"390","line":26,"column":19,"nodeType":"391","messageId":"392","endLine":26,"endColumn":21},{"ruleId":"389","severity":1,"message":"390","line":31,"column":19,"nodeType":"391","messageId":"392","endLine":31,"endColumn":21},{"ruleId":"389","severity":1,"message":"390","line":34,"column":19,"nodeType":"391","messageId":"392","endLine":34,"endColumn":21},"no-unused-vars","'Route' is defined but never used.","Identifier","unusedVar","'ToolEnum' is defined but never used.","'Mode' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'state.images'. Either include it or remove the dependency array.","ArrayExpression",["459"],"React Hook useEffect has missing dependencies: 'selectedImage' and 'selectedImageRegion'. Either include them or remove the dependency array.",["460"],"import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration","no-fallthrough","Expected a 'break' statement before 'case'.","SwitchCase","case","default-case","Expected a default case.","SwitchStatement","missingDefaultCase","'pathToActiveImage' is assigned a value but never used.","'activeImage' is assigned a value but never used.","'asMutable' is defined but never used.","'Action' is defined but never used.","'updateIn' is defined but never used.","'moment' is defined but never used.","'fixTwisted' is defined but never used.","'convertExpandingLineToPolygon' is defined but never used.","'getLandmarksWithTransform' is defined but never used.","'unselectRegions' is assigned a value but never used.","'src' is assigned a value but never used.","'regionData' is assigned a value but never used.","'mouseDownAt' is assigned a value but never used.","'region' is assigned a value but never used.","no-unreachable","Unreachable code.","BreakStatement","unreachableCode","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","ThrowStatement","'makeStyles' is defined but never used.","'styled' is defined but never used.","'emptyArr' is assigned a value but never used.","no-sequences","Unexpected use of comma operator.","SequenceExpression","unexpectedCommaExpression","'nextImage' is assigned a value but never used.","'refocusOnMouseEvent' is assigned a value but never used.","'KeypointsDefinition' is defined but never used.","'maskImagesLoaded' is assigned a value but never used.","'changeMaskImagesLoaded' is assigned a value but never used.","'maskImages' is assigned a value but never used.","'getLatestMat' is assigned a value but never used.","'zoomIn' is assigned a value but never used.","React Hook useLayoutEffect has missing dependencies: 'changeMat' and 'mat'. Either include them or remove the dependency array.",["461"],"'innerMousePos' is assigned a value but never used.","'clientWidth' is assigned a value but never used.","'clientHeight' is assigned a value but never used.","'highlightedRegion' is assigned a value but never used.","'job' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'handleRouteChange', 'history', 'images', and 'onSelect'. Either include them or remove the dependency array. If 'onSelect' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["462"],"React Hook useEffect has missing dependencies: 'isClient' and 'setState'. Either include them or remove the dependency array.",["463"],"'grey' is defined but never used.","Assign object to a variable before exporting as module default","'toggleExpanded' is assigned a value but never used.","Assign literal to a variable before exporting as module default","React Hook useEffect has a missing dependency: 'videoPlaying'. Either include it or remove the dependency array.",["464"],"React Hook useEffect has missing dependencies: 'onChangeVideoPlaying', 'onChangeVideoTime', and 'videoTime'. Either include them or remove the dependency array. If 'onChangeVideoTime' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["465"],"React Hook useMemo has an unnecessary dependency: 'activeImage.filter'. Either exclude it or remove the dependency array.",["466"],"'PreventScrollToParents' is defined but never used.","'boxCursorMap' is assigned a value but never used.","'pbox' is assigned a value but never used.","'clamp' is defined but never used.","'alphaBase' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'onRegionChange' and 'svg'. Either include them or remove the dependency array. If 'onRegionChange' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["467"],"'ButtonBase' is defined but never used.","'ExpandIcon' is defined but never used.","'ContractIcon' is defined but never used.","'RegionIcon' is defined but never used.","'PieChartIcon' is defined but never used.","'TrashIcon' is defined but never used.","'colors' is assigned a value but never used.","'mouseOver' is assigned a value but never used.","'MemoRowHeader' is assigned a value but never used.","'MemoRow' is assigned a value but never used.","'containerStyle' is assigned a value but never used.","'Container' is assigned a value but never used.","'InnerSliderContent' is assigned a value but never used.","no-lone-blocks","Nested block is redundant.","BlockStatement","redundantNestedBlock","'blue' is defined but never used.","'orange' is defined but never used.","'purple' is defined but never used.","'withStyles' is defined but never used.","'Slider' is defined but never used.",{"desc":"468","fix":"469"},{"desc":"470","fix":"471"},{"desc":"472","fix":"473"},{"desc":"474","fix":"475"},{"desc":"476","fix":"477"},{"desc":"478","fix":"479"},{"desc":"480","fix":"481"},{"desc":"482","fix":"483"},{"desc":"484","fix":"485"},"Update the dependencies array to be: [selectedImage, state.images]",{"range":"486","text":"487"},"Update the dependencies array to be: [selectedImage, selectedImageRegion]",{"range":"488","text":"489"},"Update the dependencies array to be: [changeMat, mat, windowSize]",{"range":"490","text":"491"},"Update the dependencies array to be: [handleRouteChange, history, images, onSelect]",{"range":"492","text":"493"},"Update the dependencies array to be: [isClient, setState]",{"range":"494","text":"495"},"Update the dependencies array to be: [videoPlaying, videoTime]",{"range":"496","text":"497"},"Update the dependencies array to be: [onChangeVideoPlaying, onChangeVideoTime, videoPlaying, videoTime]",{"range":"498","text":"499"},"Update the dependencies array to be: [imagePosition.topLeft.x, imagePosition.topLeft.y, imagePosition.bottomRight.x, imagePosition.bottomRight.y]",{"range":"500","text":"501"},"Update the dependencies array to be: [onRegionChange, regions, svg]",{"range":"502","text":"503"},[5676,5691],"[selectedImage, state.images]",[5899,5901],"[selectedImage, selectedImageRegion]",[4871,4883],"[changeMat, mat, windowSize]",[1954,1956],"[handleRouteChange, history, images, onSelect]",[724,726],"[isClient, setState]",[1034,1045],"[videoPlaying, videoTime]",[1807,1821],"[onChangeVideoPlaying, onChangeVideoTime, videoPlaying, videoTime]",[3673,3829],"[imagePosition.topLeft.x, imagePosition.topLeft.y, imagePosition.bottomRight.x, imagePosition.bottomRight.y]",[2190,2199],"[onRegionChange, regions, svg]"]